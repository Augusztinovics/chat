import{L,p as D,B as F}from"./BaseLayout-B0hCtxmk.js";import{I as k}from"./IconUser-Bc6QuSHP.js";import{_ as p,x as o,g as r,h as s,d as C,e as y,z as w,u as R,i as c,t as a,w as I,k as S,l as x,v as M,o as g,s as l,m as B,f as N,A as $,F as A,B as O,q as v,C as P,n as b}from"./index-L7sfOh-d.js";import{M as U,F as G}from"./Modal-CPWQdMbp.js";const H={},V={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function j(t,e){return o(),r("svg",V,e[0]||(e[0]=[s("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"},null,-1)]))}const E=p(H,[["render",j]]),K={},J={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function Q(t,e){return o(),r("svg",J,e[0]||(e[0]=[s("path",{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},null,-1)]))}const W=p(K,[["render",Q]]),X={},Y={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function Z(t,e){return o(),r("svg",Y,e[0]||(e[0]=[s("path",{d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"},null,-1)]))}const ee=p(X,[["render",Z]]),se=C("requestSend",{state:()=>({requests:[]}),actions:{loadRequests(){return new Promise((t,e)=>{})},sendRequest(t){return new Promise((e,d)=>{console.log(t),setTimeout(()=>{e(!0)},1e3)})}}}),te=C("requestGet",{state:()=>({requests:[]}),actions:{loadRequests(){return new Promise((t,e)=>{})},acceptRequest(t){return new Promise((e,d)=>{console.log(t),setTimeout(()=>{e(!0)},1e3)})}}}),ne={props:{friend:{type:Object,default(t){return{friendId:null,friendName:"",friendDescription:"",friendCountry:"",friendCity:"",friendImg:null,reqId:null,reqAcceptedDate:null,sendId:null,sendAcceptedDate:null}}}},components:{IconUser:k,Modal:U},data(){return{showDetails:!1,sending:!1,showRequestModal:!1,requestText:""}},computed:{...y(R,["lg"]),hasFriend(){return this.friend.friendId!=null},isFriend(){return this.friend.reqId&&this.friend.reqAcceptedDate||this.friend.sendId&&this.friend.sendAcceptedDate},isReqGet(){return this.friend.reqId&&!this.friend.reqAcceptedDate},isReqSend(){return this.friend.sendId&&!this.friend.sendAcceptedDate}},methods:{...w(se,["sendRequest"]),...w(te,["acceptRequest"]),modalClose(){this.showDetails=!1},openModal(){this.showDetails=!0},openRequestModal(){this.requestText="",this.showRequestModal=!0,setTimeout(()=>{document.getElementById("request_text_input_field").focus()},300)},sendFriendRequest(){this.showRequestModal=!1,this.sending=!0,this.sendRequest({friendId:this.friend.friendId,text:this.requestText.trim()}).then(()=>{this.sending=!1,this.requestText="",this.friend.sendId=1}).catch(()=>{this.sending=!1})},acceptFriendRequest(){this.sending=!0,this.acceptRequest({friendId:this.friend.friendId,reqId:this.friend.reqId}).then(()=>{this.sending=!1,this.friend.reqAcceptedDate=!0}).catch(()=>{this.sending=!1})},sendMessage(){}}},ie={key:0,class:"friend-card"},oe={class:"friend-card-img"},re=["src"],ae={key:1,class:"icon-lg"},de={class:"friend-card-action"},ce=["disabled"],le=["disabled"],ue={key:2},he=["disabled"],_e={class:"text-left"},fe={class:"text-center mt-1 mb-2"},ge=["src"],me={key:1,class:"icon-lg"},pe={class:"friend-modal-des"},be={class:"text-bold"},Se={class:"text-bold"},ve={class:"text-bold"},qe={class:"mb-2"},Te={class:"request-modal-body"},Ie={for:"request_text_input_field"};function ye(t,e,d,m,i,n){const _=l("IconUser"),f=l("Modal");return n.hasFriend?(o(),r("div",ie,[s("div",oe,[d.friend.friendImg?(o(),r("img",{key:0,src:d.friend.friendImg,alt:"Profile Image",class:"profile-img md"},null,8,re)):(o(),r("span",ae,[c(_)]))]),s("div",{class:"friend-card-name",onClick:e[0]||(e[0]=(...u)=>n.openModal&&n.openModal(...u))},[s("h5",null,a(d.friend.friendName),1)]),s("div",de,[n.isFriend?(o(),r("button",{key:0,class:"btn-sm btn-primary",onClick:e[1]||(e[1]=(...u)=>n.sendMessage&&n.sendMessage(...u)),disabled:i.sending},a(i.sending?t.lg("sending"):t.lg("send_message")),9,ce)):n.isReqGet?(o(),r("button",{key:1,class:"btn-sm btn-primary",onClick:e[2]||(e[2]=(...u)=>n.acceptFriendRequest&&n.acceptFriendRequest(...u)),disabled:i.sending},a(i.sending?t.lg("sending"):t.lg("accept_request")),9,le)):n.isReqSend?(o(),r("p",ue,a(t.lg("already_send")),1)):(o(),r("button",{key:3,class:"btn-sm btn-primary",onClick:e[3]||(e[3]=(...u)=>n.openRequestModal&&n.openRequestModal(...u)),disabled:i.sending},a(i.sending?t.lg("sending"):t.lg("send_request")),9,he))]),c(f,{show:i.showDetails,size:"md",title:d.friend.friendName,headerClass:"text-left",showFooter:!1,onClose:n.modalClose},{default:I(()=>[s("div",_e,[s("div",fe,[d.friend.friendImg?(o(),r("img",{key:0,src:d.friend.friendImg,alt:"Profile Image",class:"profile-img md"},null,8,ge)):(o(),r("span",me,[c(_)]))]),s("div",pe,[s("p",null,[s("span",be,a(t.lg("city"))+" :",1),S(a(d.friend.friendCity??"????"),1)]),s("p",null,[s("span",Se,a(t.lg("friend_country"))+" :",1),S(a(d.friend.friendCountry??"????"),1)]),s("p",null,[s("span",ve,a(t.lg("friend_des")),1)]),s("p",qe,a(d.friend.friendDescription??"??????"),1)])])]),_:1},8,["show","title","onClose"]),c(f,{show:i.showRequestModal,size:"sm",title:t.lg("send_request"),headerClass:"text-left",showCancel:!0,cancelBtnText:t.lg("cancel"),okBtnText:t.lg("send"),onClose:e[5]||(e[5]=u=>i.showRequestModal=!1),onCancel:e[6]||(e[6]=u=>i.showRequestModal=!1),onOk:n.sendFriendRequest},{default:I(()=>[s("div",Te,[s("p",null,[S(a(t.lg("addresse"))+" ",1),s("span",null,a(d.friend.friendName),1)]),s("label",Ie,a(t.lg("few_words")),1),x(s("textarea",{name:"requestText",id:"request_text_input_field","onUpdate:modelValue":e[4]||(e[4]=u=>i.requestText=u)},null,512),[[M,i.requestText]])])]),_:1},8,["show","title","cancelBtnText","okBtnText","onOk"])])):g("",!0)}const Re=p(ne,[["render",ye]]),we={components:{IconSearch:E,LoadingOverlay:L,FailToast:G,FriendCard:Re},data(){return{submitting:!1,searchText:"",firstSearch:!0,searchResult:[],searchError:!1,paginationIndex:0}},computed:{...y(R,["lg"]),...B(D),hasSearchResult(){return this.searchResult.length>0},hasPagination(){return this.searchResult.length>this.paginationSizesStore.topSize},rightPaginationDisabled(){return this.paginationIndex*this.paginationSizesStore.topSize+this.paginationSizesStore.topSize>=this.searchResult.length},cardsToShow(){let t=[];if(!this.hasSearchResult)return t;let e=this.paginationIndex*this.paginationSizesStore.topSize;e>this.searchResult.length-1&&(e=this.searchResult.length-1),this.paginationSizesStore.topSize>=this.searchResult.length&&(e=0);let d=e+this.paginationSizesStore.topSize;d>this.searchResult.length&&(d=this.searchResult.length);for(let m=e;m<d;m++)t.push(this.searchResult[m]);return t}},methods:{searchUsers(){this.searchText.trim()!=""&&(this.firstSearch=!1,this.submitting=!0,this.searchError=!1,N.get("/api/resources/search-user?un="+this.searchText.trim()).then(t=>{this.submitting=!1,this.searchResult=t.data.users}).catch(t=>{this.submitting=!1,this.searchError=!0,setTimeout(()=>{this.searchError=!1},3e3),console.log(t)}))},paginateLeft(){this.paginationIndex--},paginateRight(){this.paginationIndex++}},mounted(){this.submitting=!1,this.searchText="",this.firstSearch=!0,document.getElementById("search_input").focus()}},ke={class:"search-menu"},Ce={class:"user-search-input"},xe={for:"search_input"},Me={class:"password-container"},Ee=["disabled"],ze=["disabled"],Le={class:"icon"},De={key:0,class:"search-result-holder"},Fe={class:"results"},Be={key:0},Ne=["disabled"],$e={class:"result-cards"},Ae={key:1},Oe=["disabled"],Pe={key:1,class:"search-result-no-result-holder"},Ue={key:0},Ge={key:1};function He(t,e,d,m,i,n){const _=l("IconSearch"),f=l("FriendCard"),u=l("LoadingOverlay"),q=l("FailToast");return o(),r("div",null,[s("div",ke,[s("div",Ce,[s("label",xe,a(t.lg("user_search")),1),s("div",Me,[x(s("input",{id:"search_input",type:"text","onUpdate:modelValue":e[0]||(e[0]=h=>i.searchText=h),disabled:i.submitting,onKeypress:e[1]||(e[1]=$((...h)=>n.searchUsers&&n.searchUsers(...h),["enter"]))},null,40,Ee),[[M,i.searchText]]),s("button",{type:"button",onClick:e[2]||(e[2]=(...h)=>n.searchUsers&&n.searchUsers(...h)),disabled:i.submitting},[s("span",Le,[c(_)])],8,ze)])])]),s("div",null,[n.hasSearchResult?(o(),r("div",De,[s("p",null,[s("span",null,a(i.searchResult.length),1),e[5]||(e[5]=S()),s("span",null,a(t.lg("results")),1)]),s("div",Fe,[n.hasPagination?(o(),r("div",Be,[s("button",{type:"button",disabled:i.paginationIndex==0,class:"pag-btn",onClick:e[3]||(e[3]=(...h)=>n.paginateLeft&&n.paginateLeft(...h))},"<",8,Ne)])):g("",!0),s("div",$e,[(o(!0),r(A,null,O(n.cardsToShow,h=>(o(),v(f,{key:"friend_"+h.friendId,friend:h},null,8,["friend"]))),128))]),n.hasPagination?(o(),r("div",Ae,[s("button",{type:"button",disabled:n.rightPaginationDisabled,class:"pag-btn",onClick:e[4]||(e[4]=(...h)=>n.paginateRight&&n.paginateRight(...h))},">",8,Oe)])):g("",!0)])])):(o(),r("div",Pe,[i.firstSearch?(o(),r("p",Ue,a(t.lg("user_search_before")),1)):(o(),r("p",Ge,a(t.lg("user_search_not_find")),1))]))]),i.submitting?(o(),v(u,{key:0})):g("",!0),i.searchError?(o(),v(q,{key:1})):g("",!0)])}const Ve=p(we,[["render",He]]),je={components:{IconUser:k,IconEarth:P,IconSearch:E,IconLeft:W,IconRight:ee,SearchContactTab:Ve},data(){return{selectedTab:"SOME"}},computed:{...y(R,["lg"])},methods:{selectTab(t){t==this.selectedTab?this.selectedTab="NONE":this.selectedTab=t}}},Ke={class:"contact-tabs"},Je={class:"tab"},Qe={class:"icon"},We={class:"icon"},Xe={class:"tab-text"},Ye={class:"icon"},Ze={class:"icon"},es={class:"tab-text"},ss={class:"icon"},ts={class:"icon"},ns={class:"tab-text"},is={class:"icon"},os={class:"icon"},rs={class:"tab-text"},as={key:0,class:"tab-content"},ds={key:0},cs={key:1},ls={key:2},us={key:3};function hs(t,e,d,m,i,n){const _=l("IconUser"),f=l("IconEarth"),u=l("IconSearch"),q=l("IconLeft"),h=l("IconRight"),z=l("SearchContactTab");return o(),r("div",Ke,[s("div",Je,[s("span",{class:b(["tab-menu",{"active-tab":i.selectedTab=="SOME"}]),onClick:e[0]||(e[0]=T=>n.selectTab("SOME"))},[s("span",Qe,[c(_)]),s("span",We,[c(f)]),s("span",Xe,a(t.lg("who_can_know")),1)],2),s("span",{class:b(["tab-menu",{"active-tab":i.selectedTab=="SEARCH"}]),onClick:e[1]||(e[1]=T=>n.selectTab("SEARCH"))},[s("span",Ye,[c(_)]),s("span",Ze,[c(u)]),s("span",es,a(t.lg("contact_search")),1)],2),s("span",{class:b(["tab-menu",{"active-tab":i.selectedTab=="GET"}]),onClick:e[2]||(e[2]=T=>n.selectTab("GET"))},[s("span",ss,[c(_)]),s("span",ts,[c(q)]),s("span",ns,a(t.lg("friend_requests")),1)],2),s("span",{class:b(["tab-menu",{"active-tab":i.selectedTab=="SEND"}]),onClick:e[3]||(e[3]=T=>n.selectTab("SEND"))},[s("span",is,[c(_)]),s("span",os,[c(h)]),s("span",rs,a(t.lg("send_requests")),1)],2)]),i.selectedTab!="NONE"?(o(),r("div",as,[i.selectedTab=="SOME"?(o(),r("div",ds,"Ajanlas")):g("",!0),i.selectedTab=="SEARCH"?(o(),r("div",cs,[c(z)])):g("",!0),i.selectedTab=="GET"?(o(),r("div",ls,"Kapottak")):g("",!0),i.selectedTab=="SEND"?(o(),r("div",us,"Elkuldtem, de hun a valasz")):g("",!0)])):g("",!0)])}const _s=p(je,[["render",hs]]),fs={};function gs(t,e,d,m,i,n){return o(),r("div",null," contacts ")}const ms=p(fs,[["render",gs]]),ps={components:{ContactTabs:_s,Contacts:ms}},bs={class:"mt-2"};function Ss(t,e,d,m,i,n){const _=l("ContactTabs"),f=l("Contacts");return o(),r("div",null,[s("div",null,[c(_)]),s("div",bs,[c(f)])])}const vs=p(ps,[["render",Ss]]),qs={components:{BaseLayout:F,Home:vs},props:["socket"]};function Ts(t,e,d,m,i,n){const _=l("Home"),f=l("BaseLayout");return o(),v(f,null,{default:I(()=>[c(_)]),_:1})}const ks=p(qs,[["render",Ts]]);export{ks as default};
