import{l as x,p as z,u as W,B as X}from"./BaseLayout-DqpvruMP.js";import{I as P}from"./IconUser-8iLmp-uJ.js";import{_ as m,x as a,g as d,h as i,d as M,f as q,e as p,z as v,u as I,i as f,t as l,w as E,k as S,o as g,l as N,v as U,s as h,m as T,A as Y,F,B as w,q as b,n as D}from"./index-R1AFGzt4.js";import{M as B,I as Z,F as L,S as A}from"./SuccessToast-BiO7ucVC.js";const j={},ee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function se(e,s){return a(),d("svg",ee,s[0]||(s[0]=[i("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"},null,-1)]))}const O=m(j,[["render",se]]),te={},ne={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function ie(e,s){return a(),d("svg",ne,s[0]||(s[0]=[i("path",{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},null,-1)]))}const ae=m(te,[["render",ie]]),re={},de={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function oe(e,s){return a(),d("svg",de,s[0]||(s[0]=[i("path",{d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"},null,-1)]))}const le=m(re,[["render",oe]]),y=M("requestSend",{state:()=>({loaded:!1,requests:[]}),getters:{numSendRequests:e=>e.requests.length??0,isLoaded:e=>e.loaded,sendRequests:e=>e.requests},actions:{loadRequests(){return new Promise((e,s)=>{q.get("/api/resources/sended-friend-requests").then(t=>{var o;this.requests=((o=t.data)==null?void 0:o.sendedRequests)??[],this.loaded=!0,e(!0)}).catch(t=>{t.response.status==401?s(401):s(t)})})},sendRequest(e){return new Promise((s,t)=>{q.post("/api/resources/friend-request-send",e).then(o=>{var r;this.requests=((r=o.data)==null?void 0:r.sendedRequests)??[],s(!0)}).catch(o=>{o.response.status==401?t(401):t(o)})})},cancelFrienRequest(e){return new Promise((s,t)=>{q.post("/api/resources/friend-request-delete",e).then(o=>{var r;this.requests=((r=o.data)==null?void 0:r.sendedRequests)??[],s(!0)}).catch(o=>{o.response.status==401?t(401):t(o)})})},editFriendRequest(e){return new Promise((s,t)=>{q.post("/api/resources/friend-request-edit",e).then(o=>{var r;this.requests=((r=o.data)==null?void 0:r.sendedRequests)??[],s(!0)}).catch(o=>{o.response.status==401?t(401):t(o)})})}}}),C=M("requestGet",{state:()=>({loaded:!1,requests:[]}),getters:{numGetRequests:e=>e.requests.length??0,isLoaded:e=>e.loaded,getRequests:e=>e.requests},actions:{loadRequests(){return new Promise((e,s)=>{q.get("/api/resources/received-friend-requests").then(t=>{var o;this.requests=((o=t.data)==null?void 0:o.receivedRequests)??[],this.loaded=!0,e(!0)}).catch(t=>{t.response.status==401?s(401):s(t)})})},acceptRequest(e){return new Promise((s,t)=>{q.post("/api/resources/friend-request-accept",e).then(o=>{var r;this.requests=((r=o.data)==null?void 0:r.receivedRequests)??[],s(!0)}).catch(o=>{o.response.status==401?t(401):t(o)})})},denieRequest(e){return new Promise((s,t)=>{q.post("/api/resources/friend-request-denie",e).then(o=>{var r;this.requests=((r=o.data)==null?void 0:r.receivedRequests)??[],s(!0)}).catch(o=>{o.response.status==401?t(401):t(o)})})}}}),H=M("friends",{state:()=>({friends:[],groups:[]}),getters:{numFriends:e=>e.friends.length??0,numGroups:e=>e.groups.length??0,allFriends:e=>e.friends,allGroups:e=>e.groups,getFriendData:e=>s=>e.friends.find(t=>t.friendId==s)},actions:{loadFriends(){return new Promise((e,s)=>{q.get("/api/resources/friends").then(t=>{var o,r;this.friends=((o=t.data)==null?void 0:o.friends)??[],this.groups=((r=t.data)==null?void 0:r.groups)??[],console.log(this.groups),e(!0)}).catch(t=>{console.log(t),t.response.status==401?s(401):s(t)})})}}}),ue={props:{friend:{type:Object,default(e){return{friendId:null,friendName:"",friendDescription:"",friendCountry:"",friendCity:"",friendImg:null,reqId:null,reqAcceptedDate:null,sendId:null,sendAcceptedDate:null,messageToFriend:"",messageFromFriend:""}}}},components:{IconUser:P,Modal:B,IconEdit:Z},data(){return{showDetails:!1,sending:!1,showRequestModal:!1,requestText:"",editing:!1}},computed:{...p(I,["lg"]),hasFriend(){return this.friend.friendId!=null},isFriend(){return this.friend.reqId&&this.friend.reqAcceptedDate||this.friend.sendId&&this.friend.sendAcceptedDate},isReqGet(){return this.friend.reqId&&!this.friend.reqAcceptedDate},isReqSend(){return this.friend.sendId&&!this.friend.sendAcceptedDate}},methods:{...v(y,["sendRequest","cancelFrienRequest","editFriendRequest"]),...v(C,["acceptRequest","denieRequest"]),modalClose(){this.showDetails=!1},openModal(){this.showDetails=!0},openRequestModal(){this.requestText="",this.showRequestModal=!0,setTimeout(()=>{document.getElementById("request_text_input_field").focus()},300)},sendFriendRequest(){this.editing?(this.showRequestModal=!1,this.sending=!0,this.editFriendRequest({requestId:this.friend.sendId,text:this.requestText.trim()}).then(()=>{this.sending=!1,this.friend.messageToFriend=this.requestText,this.editing=!1,this.showDetails=!0}).catch(e=>{this.sending=!1,this.editing=!1,e==401&&this.$router.push("/login")})):(this.showRequestModal=!1,this.sending=!0,this.sendRequest({friendId:this.friend.friendId,text:this.requestText.trim()}).then(()=>{this.sending=!1,this.$emit("reloadData","SUCCESS",this.lg("frind_request_send"))}).catch(e=>{this.sending=!1,e==401?this.$router.push("/login"):this.$emit("reloadData","ERROR",this.lg("frind_request_send_fail"))}))},acceptFriendRequest(){this.sending=!0,this.acceptRequest({requestId:this.friend.reqId}).then(()=>{this.sending=!1,this.$emit("reloadData","SUCCESS",this.lg("frien_request_accepted"))}).catch(e=>{this.sending=!1,e==401?this.$router.push("/login"):this.$emit("reloadData","ERROR",this.lg("general_error"))})},denieFriendRequest(){this.sending=!0,this.denieRequest({requestId:this.friend.reqId}).then(()=>{this.sending=!1,this.$emit("reloadData","SUCCESS",this.lg("request_denited"))}).catch(e=>{this.sending=!1,e==401?this.$router.push("/login"):this.$emit("reloadData","ERROR",this.lg("general_error"))})},cancelRequest(){this.sending=!0,this.cancelFrienRequest({requestId:this.friend.sendId}).then(()=>{this.sending=!1,this.$emit("reloadData","SUCCESS",this.lg("request_canceled"))}).catch(e=>{this.sending=!1,e==401?this.$router.push("/login"):this.$emit("reloadData","ERROR",this.lg("general_error"))})},editRequestMessage(){this.showDetails=!1,this.editing=!0,this.requestText=this.friend.messageToFriend??"",this.showRequestModal=!0,setTimeout(()=>{document.getElementById("request_text_input_field").focus().select()},300)},sendMessage(){}}},ce={key:0,class:"friend-card"},he={class:"friend-card-img"},ge=["src"],fe={key:1,class:"icon-lg"},_e={class:"friend-card-action"},me=["disabled"],pe={key:1},qe=["disabled"],be=["disabled"],Re={key:2},Se=["disabled"],Ie=["disabled"],ve={class:"text-left"},Te={class:"text-center mt-1 mb-2"},ke=["src"],ye={key:1,class:"icon-lg"},Ce={class:"friend-modal-des"},Fe={class:"text-bold"},we={class:"text-bold"},De={class:"text-bold"},Ee={class:"mb-2"},xe={key:0},ze={key:0},Me={key:1},Le={class:"mt-2 friend-card-btns"},Ge=["disabled"],Pe=["disabled"],Ne={key:1},Ue={key:0},Be={key:1},Ae={class:"request-modal-body"},Oe={for:"request_text_input_field"};function He(e,s,t,o,r,n){const _=h("IconUser"),c=h("IconEdit"),R=h("Modal");return n.hasFriend?(a(),d("div",ce,[i("div",he,[t.friend.friendImg?(a(),d("img",{key:0,src:t.friend.friendImg,alt:"Profile Image",class:"profile-img md"},null,8,ge)):(a(),d("span",fe,[f(_)]))]),i("div",{class:"friend-card-name",onClick:s[0]||(s[0]=(...u)=>n.openModal&&n.openModal(...u))},[i("h5",null,l(t.friend.friendName),1)]),i("div",_e,[n.isFriend?(a(),d("button",{key:0,class:"btn-sm btn-primary btn-block",onClick:s[1]||(s[1]=(...u)=>n.sendMessage&&n.sendMessage(...u)),disabled:r.sending},l(r.sending?e.lg("sending"):e.lg("send_message")),9,me)):n.isReqGet?(a(),d("div",pe,[i("button",{class:"btn-sm btn-primary btn-block",onClick:s[2]||(s[2]=(...u)=>n.acceptFriendRequest&&n.acceptFriendRequest(...u)),disabled:r.sending},l(r.sending?e.lg("sending"):e.lg("accept_request")),9,qe),i("button",{class:"btn-sm btn-danger btn-block",onClick:s[3]||(s[3]=(...u)=>n.denieFriendRequest&&n.denieFriendRequest(...u)),disabled:r.sending},l(r.sending?e.lg("sending"):e.lg("denie_request")),9,be)])):n.isReqSend?(a(),d("div",Re,[i("p",null,l(e.lg("already_send")),1),i("button",{class:"btn-sm btn-danger btn-block",onClick:s[4]||(s[4]=(...u)=>n.cancelRequest&&n.cancelRequest(...u)),disabled:r.sending},l(r.sending?e.lg("sending"):e.lg("cancel_request")),9,Se)])):(a(),d("button",{key:3,class:"btn-sm btn-primary btn-block",onClick:s[5]||(s[5]=(...u)=>n.openRequestModal&&n.openRequestModal(...u)),disabled:r.sending},l(r.sending?e.lg("sending"):e.lg("send_request")),9,Ie))]),f(R,{show:r.showDetails,size:"md",title:t.friend.friendName,headerClass:"text-left",showFooter:!1,onClose:n.modalClose},{default:E(()=>[i("div",ve,[i("div",Te,[t.friend.friendImg?(a(),d("img",{key:0,src:t.friend.friendImg,alt:"Profile Image",class:"profile-img md"},null,8,ke)):(a(),d("span",ye,[f(_)]))]),i("div",Ce,[i("p",null,[i("span",Fe,l(e.lg("city"))+" :",1),S(l(t.friend.friendCity??"????"),1)]),i("p",null,[i("span",we,l(e.lg("friend_country"))+" :",1),S(l(t.friend.friendCountry??"????"),1)]),i("p",null,[i("span",De,l(e.lg("friend_des"))+" :",1)]),i("p",Ee,l(t.friend.friendDescription??"??????"),1),n.isReqGet?(a(),d("div",xe,[i("p",null,l(e.lg("message")),1),t.friend.messageFromFriend?(a(),d("p",ze,l(t.friend.messageFromFriend),1)):(a(),d("p",Me,l(e.lg("no_message")),1)),i("div",Le,[i("button",{class:"btn btn-primary",onClick:s[6]||(s[6]=(...u)=>n.acceptFriendRequest&&n.acceptFriendRequest(...u)),disabled:r.sending},l(r.sending?e.lg("sending"):e.lg("accept_request")),9,Ge),i("button",{class:"btn btn-danger",onClick:s[7]||(s[7]=(...u)=>n.denieFriendRequest&&n.denieFriendRequest(...u)),disabled:r.sending},l(r.sending?e.lg("sending"):e.lg("denie_request")),9,Pe)])])):g("",!0),n.isReqSend?(a(),d("div",Ne,[i("p",null,l(e.lg("you_request_text")),1),t.friend.messageToFriend?(a(),d("p",Ue,[S(l(t.friend.messageToFriend)+" ",1),i("span",{class:"icon-edit-btn ml-1",onClick:s[8]||(s[8]=(...u)=>n.editRequestMessage&&n.editRequestMessage(...u))},[f(c)])])):(a(),d("p",Be,[S(l(e.lg("no_request_send_text"))+" ",1),i("span",{class:"icon-edit-btn ml-1",onClick:s[9]||(s[9]=(...u)=>n.editRequestMessage&&n.editRequestMessage(...u))},[f(c)])]))])):g("",!0)])])]),_:1},8,["show","title","onClose"]),f(R,{show:r.showRequestModal,size:"sm",title:e.lg("send_request"),headerClass:"text-left",showCancel:!0,cancelBtnText:e.lg("cancel"),okBtnText:e.lg("send"),onClose:s[11]||(s[11]=u=>r.showRequestModal=!1),onCancel:s[12]||(s[12]=u=>r.showRequestModal=!1),onOk:n.sendFriendRequest},{default:E(()=>[i("div",Ae,[i("p",null,[S(l(e.lg("addresse"))+" ",1),i("span",null,l(t.friend.friendName),1)]),i("label",Oe,l(e.lg("few_words")),1),N(i("textarea",{name:"requestText",id:"request_text_input_field","onUpdate:modelValue":s[10]||(s[10]=u=>r.requestText=u)},null,512),[[U,r.requestText]])])]),_:1},8,["show","title","cancelBtnText","okBtnText","onOk"])])):g("",!0)}const G=m(ue,[["render",He]]),Ve={components:{IconSearch:O,FailToast:L,FriendCard:G},data(){return{submitting:!1,searchText:"",firstSearch:!0,searchResult:[],searchError:!1,paginationIndex:0}},computed:{...p(I,["lg"]),...T(z,x),hasSearchResult(){return this.searchResult.length>0},hasPagination(){return this.searchResult.length>this.paginationSizesStore.topSize},rightPaginationDisabled(){return this.paginationIndex*this.paginationSizesStore.topSize+this.paginationSizesStore.topSize>=this.searchResult.length},cardsToShow(){let e=[];if(!this.hasSearchResult)return e;let s=this.paginationIndex*this.paginationSizesStore.topSize;s>this.searchResult.length-1&&(s=this.searchResult.length-1),this.paginationSizesStore.topSize>=this.searchResult.length&&(s=0);let t=s+this.paginationSizesStore.topSize;t>this.searchResult.length&&(t=this.searchResult.length);for(let o=s;o<t;o++)e.push(this.searchResult[o]);return e}},methods:{searchUsers(){this.searchText.trim()!=""&&(this.firstSearch=!1,this.submitting=!0,this.loadingStore.startLoading(),this.searchError=!1,q.get("/api/resources/search-user?un="+this.searchText.trim()).then(e=>{this.submitting=!1,this.loadingStore.finishLoading(),this.searchResult=e.data.users}).catch(e=>{this.submitting=!1,this.loadingStore.finishLoading(),this.searchError=!0,setTimeout(()=>{this.searchError=!1},3e3),console.log(e)}))},paginateLeft(){this.paginationIndex--},paginateRight(){this.paginationIndex++},reloadData(e,s){this.$emit("reloadData",e,s)}},mounted(){this.submitting=!1,this.searchText="",this.firstSearch=!0,document.getElementById("search_input").focus()}},$e={class:"search-menu"},Ke={class:"user-search-input"},Je={for:"search_input"},Qe={class:"password-container"},We=["disabled"],Xe=["disabled"],Ye={class:"icon"},Ze={key:0,class:"search-result-holder"},je={class:"results"},es={key:0},ss=["disabled"],ts={class:"result-cards"},ns={key:1},is=["disabled"],as={key:1,class:"search-result-no-result-holder"},rs={key:0},ds={key:1};function os(e,s,t,o,r,n){const _=h("IconSearch"),c=h("FriendCard"),R=h("FailToast");return a(),d("div",null,[i("div",$e,[i("div",Ke,[i("label",Je,l(e.lg("user_search")),1),i("div",Qe,[N(i("input",{id:"search_input",type:"text","onUpdate:modelValue":s[0]||(s[0]=u=>r.searchText=u),disabled:r.submitting,onKeypress:s[1]||(s[1]=Y((...u)=>n.searchUsers&&n.searchUsers(...u),["enter"]))},null,40,We),[[U,r.searchText]]),i("button",{type:"button",onClick:s[2]||(s[2]=(...u)=>n.searchUsers&&n.searchUsers(...u)),disabled:r.submitting},[i("span",Ye,[f(_)])],8,Xe)])])]),i("div",null,[n.hasSearchResult?(a(),d("div",Ze,[i("p",null,[i("span",null,l(r.searchResult.length),1),s[5]||(s[5]=S()),i("span",null,l(e.lg("results")),1)]),i("div",je,[n.hasPagination?(a(),d("div",es,[i("button",{type:"button",disabled:r.paginationIndex==0,class:"pag-btn",onClick:s[3]||(s[3]=(...u)=>n.paginateLeft&&n.paginateLeft(...u))},"<",8,ss)])):g("",!0),i("div",ts,[(a(!0),d(F,null,w(n.cardsToShow,u=>(a(),b(c,{key:"friend_"+u.friendId,friend:u,onReloadData:n.reloadData},null,8,["friend","onReloadData"]))),128))]),n.hasPagination?(a(),d("div",ns,[i("button",{type:"button",disabled:n.rightPaginationDisabled,class:"pag-btn",onClick:s[4]||(s[4]=(...u)=>n.paginateRight&&n.paginateRight(...u))},">",8,is)])):g("",!0)])])):(a(),d("div",as,[r.firstSearch?(a(),d("p",rs,l(e.lg("user_search_before")),1)):(a(),d("p",ds,l(e.lg("user_search_not_find")),1))]))]),r.searchError?(a(),b(R,{key:0})):g("",!0)])}const ls=m(Ve,[["render",os]]),us={components:{FriendCard:G},data(){return{paginationIndex:0}},computed:{...p(I,["lg"]),...p(y,["numSendRequests","sendRequests"]),...T(z),hasPagination(){return this.numSendRequests>this.paginationSizesStore.topSize},rightPaginationDisabled(){return this.paginationIndex*this.paginationSizesStore.topSize+this.paginationSizesStore.topSize>=this.numSendRequests},cardsToShow(){let e=[];if(this.numSendRequests<1)return e;let s=this.paginationIndex*this.paginationSizesStore.topSize;s>this.sendRequests.length-1&&(s=this.sendRequests.length-1),this.paginationSizesStore.topSize>=this.sendRequests.length&&(s=0);let t=s+this.paginationSizesStore.topSize;t>this.sendRequests.length&&(t=this.sendRequests.length);for(let o=s;o<t;o++)e.push(this.sendRequests[o]);return e}},methods:{paginateLeft(){this.paginationIndex--},paginateRight(){this.paginationIndex++},changeTabToSearch(){this.$emit("changeTab")},reloadData(e,s){this.$emit("reloadData",e,s)}}},cs={key:0,class:"search-result-holder"},hs={class:"results"},gs={key:0},fs=["disabled"],_s={class:"result-cards"},ms={key:1},ps=["disabled"],qs={key:1,class:"text-center m-2"};function bs(e,s,t,o,r,n){const _=h("FriendCard");return a(),d("div",null,[e.numSendRequests?(a(),d("div",cs,[i("div",hs,[n.hasPagination?(a(),d("div",gs,[i("button",{type:"button",disabled:r.paginationIndex==0,class:"pag-btn",onClick:s[0]||(s[0]=(...c)=>n.paginateLeft&&n.paginateLeft(...c))},"<",8,fs)])):g("",!0),i("div",_s,[(a(!0),d(F,null,w(n.cardsToShow,c=>(a(),b(_,{key:"send__request_"+c.friendId,friend:c,onReloadData:n.reloadData},null,8,["friend","onReloadData"]))),128))]),n.hasPagination?(a(),d("div",ms,[i("button",{type:"button",disabled:n.rightPaginationDisabled,class:"pag-btn",onClick:s[1]||(s[1]=(...c)=>n.paginateRight&&n.paginateRight(...c))},">",8,ps)])):g("",!0)])])):(a(),d("div",qs,[i("p",null,[S(l(e.lg("not_send_any_request_yet"))+" ",1),i("span",{class:"btn-link",onClick:s[2]||(s[2]=(...c)=>n.changeTabToSearch&&n.changeTabToSearch(...c))},l(e.lg("contact_search")),1)])]))])}const Rs=m(us,[["render",bs]]),Ss={components:{FriendCard:G},data(){return{paginationIndex:0}},computed:{...p(I,["lg"]),...p(C,["numGetRequests","getRequests"]),...T(z),hasPagination(){return this.numGetRequests>this.paginationSizesStore.topSize},rightPaginationDisabled(){return this.paginationIndex*this.paginationSizesStore.topSize+this.paginationSizesStore.topSize>=this.numGetRequests},cardsToShow(){let e=[];if(this.numGetRequests<1)return e;let s=this.paginationIndex*this.paginationSizesStore.topSize;s>this.getRequests.length-1&&(s=this.getRequests.length-1),this.paginationSizesStore.topSize>=this.getRequests.length&&(s=0);let t=s+this.paginationSizesStore.topSize;t>this.getRequests.length&&(t=this.getRequests.length);for(let o=s;o<t;o++)e.push(this.getRequests[o]);return e}},methods:{paginateLeft(){this.paginationIndex--},paginateRight(){this.paginationIndex++},changeTabToSearch(){this.$emit("changeTab")},reloadData(e,s){this.$emit("reloadData",e,s)}}},Is={key:0,class:"search-result-holder"},vs={class:"results"},Ts={key:0},ks=["disabled"],ys={class:"result-cards"},Cs={key:1},Fs=["disabled"],ws={key:1,class:"text-center m-2"};function Ds(e,s,t,o,r,n){const _=h("FriendCard");return a(),d("div",null,[e.numGetRequests?(a(),d("div",Is,[i("div",vs,[n.hasPagination?(a(),d("div",Ts,[i("button",{type:"button",disabled:r.paginationIndex==0,class:"pag-btn",onClick:s[0]||(s[0]=(...c)=>n.paginateLeft&&n.paginateLeft(...c))},"<",8,ks)])):g("",!0),i("div",ys,[(a(!0),d(F,null,w(n.cardsToShow,c=>(a(),b(_,{key:"send__request_"+c.friendId,friend:c,onReloadData:n.reloadData},null,8,["friend","onReloadData"]))),128))]),n.hasPagination?(a(),d("div",Cs,[i("button",{type:"button",disabled:n.rightPaginationDisabled,class:"pag-btn",onClick:s[1]||(s[1]=(...c)=>n.paginateRight&&n.paginateRight(...c))},">",8,Fs)])):g("",!0)])])):(a(),d("div",ws,[i("p",null,[S(l(e.lg("not_send_any_request_yet"))+" ",1),i("span",{class:"btn-link",onClick:s[2]||(s[2]=(...c)=>n.changeTabToSearch&&n.changeTabToSearch(...c))},l(e.lg("contact_search")),1)])]))])}const Es=m(Ss,[["render",Ds]]),xs={components:{IconUser:P,IconSearch:O,IconLeft:ae,IconRight:le,SearchContactTab:ls,SendRequestsTab:Rs,GetRequestsTab:Es,SuccessToast:A,FailToast:L},data(){return{selectedTab:"GET",saveSuccess:!1,saveError:!1,toastMessage:""}},computed:{...T(x),...p(I,["lg"]),...p(y,{numSendRequests:"numSendRequests",isSendStoreLoaded:"isLoaded"}),...p(C,{numGetRequests:"numGetRequests",isGetStoreLoaded:"isLoaded"})},methods:{...v(y,{loadSendRequests:"loadRequests"}),...v(C,{loadGetRequests:"loadRequests"}),...v(H,{loadFriends:"loadFriends"}),selectTab(e){e==this.selectedTab?this.selectedTab="NONE":this.selectedTab=e},loadStores(e="NONE",s=""){let t=[];this.isSendStoreLoaded||t.push(this.loadSendRequests()),this.isGetStoreLoaded||t.push(this.loadGetRequests()),t.push(this.loadFriends()),this.loadingStore.startLoading(),Promise.all(t).then(()=>{this.loadingStore.finishLoading(),this.numGetRequests>0?this.selectedTab="GET":this.selectedTab="NONE",e!=="NONE"&&(e==="SUCCESS"&&(this.toastMessage=s,this.saveSuccess=!0,setTimeout(()=>{this.saveSuccess=!1,this.toastMessage=""},3e3)),e==="ERROR"&&(this.toastMessage=s,this.saveError=!0,setTimeout(()=>{this.saveError=!1,this.toastMessage=""},3e3)))}).catch(o=>{this.loadingStore.finishLoading(),o==401?this.$router.push("/login"):(this.toastMessage=this.lg("general_error"),this.saveError=!0,setTimeout(()=>{this.saveError=!1,this.toastMessage=""},3e3))})}},mounted(){this.loadStores()}},zs={class:"contact-tabs"},Ms={class:"tab"},Ls={class:"icon"},Gs={class:"icon"},Ps={class:"tab-text"},Ns={class:"icon"},Us={class:"icon"},Bs={class:"tab-text"},As={key:0,class:"tab-num"},Os={class:"icon"},Hs={class:"icon"},Vs={class:"tab-text"},$s={key:0,class:"tab-num"},Ks={key:0,class:"tab-content"},Js={key:0},Qs={key:1},Ws={key:2};function Xs(e,s,t,o,r,n){const _=h("IconUser"),c=h("IconSearch"),R=h("IconLeft"),u=h("IconRight"),V=h("SearchContactTab"),$=h("GetRequestsTab"),K=h("SendRequestsTab"),J=h("SuccessToast"),Q=h("FailToast");return a(),d("div",zs,[i("div",Ms,[i("span",{class:D(["tab-menu",{"active-tab":r.selectedTab=="SEARCH"}]),onClick:s[0]||(s[0]=k=>n.selectTab("SEARCH"))},[i("span",Ls,[f(_)]),i("span",Gs,[f(c)]),i("span",Ps,l(e.lg("contact_search")),1)],2),i("span",{class:D(["tab-menu",{"active-tab":r.selectedTab=="GET"}]),onClick:s[1]||(s[1]=k=>n.selectTab("GET"))},[i("span",Ns,[f(_)]),i("span",Us,[f(R)]),i("span",Bs,l(e.lg("friend_requests")),1),e.numGetRequests?(a(),d("sup",As,l(e.numGetRequests),1)):g("",!0)],2),i("span",{class:D(["tab-menu",{"active-tab":r.selectedTab=="SEND"}]),onClick:s[2]||(s[2]=k=>n.selectTab("SEND"))},[i("span",Os,[f(_)]),i("span",Hs,[f(u)]),i("span",Vs,l(e.lg("send_requests")),1),e.numSendRequests?(a(),d("sup",$s,l(e.numSendRequests),1)):g("",!0)],2)]),r.selectedTab!="NONE"?(a(),d("div",Ks,[r.selectedTab=="SEARCH"?(a(),d("div",Js,[f(V,{onReloadData:n.loadStores},null,8,["onReloadData"])])):g("",!0),r.selectedTab=="GET"?(a(),d("div",Qs,[f($,{onChangeTab:s[3]||(s[3]=k=>n.selectTab("SEARCH")),onReloadData:n.loadStores},null,8,["onReloadData"])])):g("",!0),r.selectedTab=="SEND"?(a(),d("div",Ws,[f(K,{onChangeTab:s[4]||(s[4]=k=>n.selectTab("SEARCH")),onReloadData:n.loadStores},null,8,["onReloadData"])])):g("",!0)])):g("",!0),r.saveSuccess?(a(),b(J,{key:1,msg:r.toastMessage},null,8,["msg"])):g("",!0),r.saveError?(a(),b(Q,{key:2,msg:r.toastMessage},null,8,["msg"])):g("",!0)])}const Ys=m(xs,[["render",Xs]]),Zs={props:{friends:Array},computed:{friendInitiative(){return e=>{let s=e.split(" "),t="";return s.forEach(o=>{o&&(t+=o.charAt(0))}),t?t.toUpperCase():"F"}}}},js={class:"friend-img"},et={key:0},st={key:1},tt=["src"],nt={key:1,class:"profile-init"},it={key:2},at=["src"],rt={key:1,class:"profile-init"},dt=["src"],ot={key:3,class:"profile-init"},lt={key:3},ut=["src"],ct={key:1,class:"profile-init"},ht=["src"],gt={key:3,class:"profile-init"},ft=["src"],_t={key:5,class:"profile-init"},mt={key:6};function pt(e,s,t,o,r,n){return a(),d("div",js,[t.friends.length<1?(a(),d("span",et,s[0]||(s[0]=[i("span",null,"?",-1)]))):t.friends.length==1?(a(),d("span",st,[t.friends[0].friendImg?(a(),d("img",{key:0,src:t.friends[0].friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,tt)):(a(),d("span",nt,l(n.friendInitiative(t.friends[0].friendName)),1))])):t.friends.length==2?(a(),d("span",it,[t.friends[0].friendImg?(a(),d("img",{key:0,src:t.friends[0].friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,at)):(a(),d("span",rt,l(n.friendInitiative(t.friends[0].friendName)),1)),t.friends[1].friendImg?(a(),d("img",{key:2,src:t.friends[1].friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,dt)):(a(),d("span",ot,l(n.friendInitiative(t.friends[1].friendName)),1))])):(a(),d("span",lt,[t.friends[0].friendImg?(a(),d("img",{key:0,src:t.friends[0].friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,ut)):(a(),d("span",ct,l(n.friendInitiative(t.friends[0].friendName)),1)),t.friends[1].friendImg?(a(),d("img",{key:2,src:t.friends[1].friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,ht)):(a(),d("span",gt,l(n.friendInitiative(t.friends[1].friendName)),1)),t.friends[2].friendImg?(a(),d("img",{key:4,src:t.friends[2].friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,ft)):(a(),d("span",_t,l(n.friendInitiative(t.friends[2].friendName)),1)),t.friends.length>3?(a(),d("b",mt," + "+l(t.friends.length-3),1)):g("",!0)]))])}const qt=m(Zs,[["render",pt]]),bt={components:{Modal:B,ContactImage:qt,SuccessToast:A,FailToast:L},data(){return{showCreateGroupModal:!1,saveError:!1,saveSuccess:!1}},computed:{...T(W,x),...p(H,{numFriends:"numFriends",friends:"allFriends",groups:"allGroups",numGroups:"numGroups",friendData:"getFriendData"}),...p(I,["lg"]),groupCards(){let e=[];return this.groups.forEach(s=>{let t={groupId:s.id,groupName:s.group_name,groupCreated:s.created_at,groupUsers:[]};s.users.forEach(o=>{if(o!==this.userStore.id){let r=this.friendData(o);r&&t.groupUsers.push(r)}}),e.push(t)}),e}}},Rt={class:"friend-list-container"},St={class:"friend-actions"},It={class:"contact-total"},vt={class:"btn-sm btn-secondary"},Tt={class:"friend-list"},kt={class:"friend-data"},yt={class:"btn-sm btn-primary"};function Ct(e,s,t,o,r,n){const _=h("ContactImage"),c=h("SuccessToast"),R=h("FailToast");return a(),d("div",Rt,[i("div",St,[i("p",It,l(e.lg("friends_count"))+" : "+l(e.numGroups),1),i("button",vt,l(e.lg("create_group")),1)]),i("div",Tt,[(a(!0),d(F,null,w(n.groupCards,u=>(a(),d("div",{key:u.groupId,class:"friend-wrapper mb-1"},[i("div",kt,[f(_,{friends:u.groupUsers},null,8,["friends"]),i("div",null,[i("h5",null,l(u.groupName),1)])]),i("div",null,[i("button",yt,l(e.lg("send_message")),1)])]))),128))]),r.saveSuccess?(a(),b(c,{key:0})):g("",!0),r.saveError?(a(),b(R,{key:1})):g("",!0)])}const Ft=m(bt,[["render",Ct]]),wt={components:{ContactTabs:Ys,Contacts:Ft}},Dt={class:"mt-2"};function Et(e,s,t,o,r,n){const _=h("ContactTabs"),c=h("Contacts");return a(),d("div",null,[i("div",null,[f(_)]),i("div",Dt,[f(c)])])}const xt=m(wt,[["render",Et]]),zt={components:{BaseLayout:X,Home:xt},props:["socket"]};function Mt(e,s,t,o,r,n){const _=h("Home"),c=h("BaseLayout");return a(),b(c,null,{default:E(()=>[f(_)]),_:1})}const Ut=m(zt,[["render",Mt]]);export{Ut as default};
