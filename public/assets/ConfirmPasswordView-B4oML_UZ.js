import{_ as w,b as c,c as h,m as f,f as b,g as r,h as t,j as y,k as a,t as g,l as d,p as _,n as P,q as l,o as v,v as C,x as i,s as u}from"./index--BqbERIe.js";import{a as E}from"./admin_user-BlVdyJIe.js";const x={components:{IconEyeClose:c,IconEyeOpen:h},data(){return{password:"",showPassword:!1,submitting:!1,missingPassword:!1,hpot:"",tryCounter:1}},computed:{...f(E),passwordInputType(){return this.showPassword?"text":"password"}},methods:{clearErrors(){this.missingPassword=!1},toogleShowPassword(){this.showPassword=!this.showPassword},submit(){if(!this.submitting){if(this.submitting=!0,this.tryCounter++,this.hpot||this.tryCounter>3){this.$router.push("/login");return}if(this.password.trim()===""){this.submitting=!1,this.missingPassword=!0,document.getElementById("password_input").focus();return}b.post("/api/admin/admin-confirm",{password:this.password.trim()}).then(()=>{this.adminUserStore.confirmed=!0,this.$router.push("/admin")}).catch(()=>{this.submitting=!1,this.missingPassword=!0,document.getElementById("password_input").focus()})}}}},I={class:"admin-confirm-card"},k={for:"password_input"},S={class:"password-container"},B=["type","disabled"],V={class:"icon"},N={key:0,class:"invalid-text"},T={class:"text-center mb-2"},U=["disabled"];function D(M,s,O,j,o,n){const p=u("IconEyeClose"),m=u("IconEyeOpen");return i(),r("div",null,[t("div",I,[t("form",{novalidate:"",onSubmit:s[4]||(s[4]=y((...e)=>n.submit&&n.submit(...e),["prevent"]))},[t("div",null,[t("label",k,[s[5]||(s[5]=a("Confirm your password")),s[6]||(s[6]=t("span",null,"*",-1)),s[7]||(s[7]=a()),t("b",null,"-"+g(o.tryCounter),1)]),t("div",S,[d(t("input",{id:"password_input",type:n.passwordInputType,class:P({"invalid-input":o.missingPassword}),"onUpdate:modelValue":s[0]||(s[0]=e=>o.password=e),onInput:s[1]||(s[1]=(...e)=>n.clearErrors&&n.clearErrors(...e)),disabled:o.submitting},null,42,B),[[_,o.password]]),t("button",{type:"button",onClick:s[2]||(s[2]=(...e)=>n.toogleShowPassword&&n.toogleShowPassword(...e))},[t("span",V,[o.showPassword?(i(),l(p,{key:0})):(i(),l(m,{key:1}))])])]),o.missingPassword?(i(),r("p",N,"Noooooooooo")):v("",!0)]),d(t("input",{type:"text",class:"hidden-input","onUpdate:modelValue":s[3]||(s[3]=e=>o.hpot=e)},null,512),[[C,o.hpot]]),t("div",T,[t("button",{type:"submit",class:"btn btn-block btn-primary",disabled:o.submitting},"Confirm",8,U)])],32)])])}const A=w(x,[["render",D]]);export{A as default};
