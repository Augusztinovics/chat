import{A as I}from"./AdminLayout-Ci_1cm3w.js";import{I as S,a as w}from"./IconSearch-BngtnvWq.js";import{c as R,m as V,f as N,_,s as p,x as o,g as i,h as t,t as r,k as U,l as u,v as a,o as c,i as b,G as h,B as A,D,F as L,C as B,n as T,q as C,w as M}from"./index-DxlZPYn7.js";import{I as P}from"./IconEdit-CpIMXNVg.js";import{I as F}from"./IconUser-DBU-PVOa.js";import{a as X}from"./admin_user-Cy_CTU53.js";import{l as z}from"./LoadingOverlay-CrWr_Qsm.js";const G={components:{IconSearch:S,IconEyeOpen:R,IconEdit:P,IconUser:F,IconX:w},data(){return{users:[],userDetail:null,isEdit:!1,limit:10,offset:1,totalCount:0,searchText:"",submitting:!1}},computed:{...V(X,z),canEdit(){return this.adminUserStore.roleId>1},usersNum(){return this.users.length},hasResult(){return this.usersNum>0},pageCount(){return this.totalCount<1?0:Math.ceil(this.totalCount/this.limit)}},methods:{paginateLeft(){this.offset<2||(this.offset--,this.fetchUsers(null,this.offset))},paginatRight(){this.offset>=this.pageCount||(this.offset++,this.fetchUsers(null,this.offset))},fetchUsers(d,e=1){let f={s:e,l:parseInt(this.limit),st:this.searchText};N.get("/api/admin/users?"+new URLSearchParams(f).toString()).then(m=>{this.users=m.data.users,this.totalCount=m.data.result_count,this.offset=e}).catch(m=>{console.log(m)})},viewUser(d){this.userDetail=d},viewEditUser(d){this.isEdit=!0,this.userDetail={...d}},closeDetail(){this.isEdit=!1,this.userDetail=null},createNewUser(){this.isEdit=!0,this.userDetail={id:0,username:null,password:null,email:null,lg:null,country:null,city:null,description:null,profile_img:null,ip:null,device_data:null,created_at:null}},deleteUser(d){},saveUser(){}}},O={class:"resurce"},K={key:0,class:"detail-container"},q={class:"details-header"},H=["readonly"],j={class:"mt-2"},J=["src"],Q={key:1,class:"icon-lg"},W={class:"detail"},Y={key:0},Z=["readonly"],$=["readonly"],ee=["disabled"],te=["readonly"],se=["readonly"],ne=["readonly"],le=["readonly"],oe=["readonly"],ie={key:1},re={class:"resurce-control"},ue={class:"password-container"},ae=["disabled"],de=["disabled"],pe={class:"icon"},me=["onClick"],ce=["onClick"],be=["onClick"],ye={key:0,class:"text-center mt-2"},fe=["disabled"],ge={class:"mr-1 ml-1"},Ue=["disabled"];function _e(d,e,f,m,n,l){const y=p("IconUser"),g=p("IconSearch"),E=p("IconEyeOpen"),k=p("IconEdit"),x=p("IconX");return o(),i("div",O,[n.userDetail?(o(),i("div",K,[t("div",q,[t("h2",null,[t("span",null,"#"+r(n.userDetail.id),1),e[20]||(e[20]=U()),u(t("input",{type:"text",name:"username",readonly:!n.isEdit,"onUpdate:modelValue":e[0]||(e[0]=s=>n.userDetail.username=s)},null,8,H),[[a,n.userDetail.username]])]),t("div",null,[n.isEdit?(o(),i("button",{key:0,class:"btn btn-success mr-2",onClick:e[1]||(e[1]=(...s)=>l.saveUser&&l.saveUser(...s))},"Save")):c("",!0),t("button",{class:"btn-sm btn-secondary",onClick:e[2]||(e[2]=(...s)=>l.closeDetail&&l.closeDetail(...s))},"X")])]),t("div",j,[n.userDetail.profile_img?(o(),i("img",{key:0,src:n.userDetail.profile_img,alt:"Profile Image",class:"profile-img md"},null,8,J)):(o(),i("span",Q,[b(y)]))]),t("div",W,[n.userDetail.id==0?(o(),i("p",Y,[e[21]||(e[21]=t("b",null,"Password: ",-1)),u(t("input",{type:"text",name:"pass",readonly:!n.isEdit,"onUpdate:modelValue":e[3]||(e[3]=s=>n.userDetail.password=s)},null,8,Z),[[a,n.userDetail.password]])])):c("",!0),t("p",null,[e[22]||(e[22]=t("b",null,"E-mail: ",-1)),u(t("input",{type:"text",name:"email",readonly:!n.isEdit,"onUpdate:modelValue":e[4]||(e[4]=s=>n.userDetail.email=s)},null,8,$),[[a,n.userDetail.email]])]),t("p",null,[e[24]||(e[24]=t("b",null,"Language: ",-1)),e[25]||(e[25]=U()),u(t("select",{name:"user_lg",id:"user_lg",disabled:!n.isEdit,"onUpdate:modelValue":e[5]||(e[5]=s=>n.userDetail.lg=s)},e[23]||(e[23]=[t("option",{value:"HU"},"Magyar",-1),t("option",{value:"SR"},"Serbian",-1),t("option",{value:"EN"},"English",-1)]),8,ee),[[h,n.userDetail.lg]])]),t("p",null,[e[26]||(e[26]=t("b",null,"Country: ",-1)),u(t("input",{type:"text",name:"country",readonly:!n.isEdit,"onUpdate:modelValue":e[6]||(e[6]=s=>n.userDetail.country=s)},null,8,te),[[a,n.userDetail.country]])]),t("p",null,[e[27]||(e[27]=t("b",null,"City: ",-1)),u(t("input",{type:"text",name:"city",readonly:!n.isEdit,"onUpdate:modelValue":e[7]||(e[7]=s=>n.userDetail.city=s)},null,8,se),[[a,n.userDetail.city]])]),t("p",null,[e[28]||(e[28]=t("b",null,"Description: ",-1)),u(t("textarea",{name:"description",readonly:!n.isEdit,"onUpdate:modelValue":e[8]||(e[8]=s=>n.userDetail.description=s)},null,8,ne),[[a,n.userDetail.description]])]),t("p",null,[e[29]||(e[29]=t("b",null,"IP: ",-1)),u(t("input",{type:"text",name:"ip",readonly:!n.isEdit,"onUpdate:modelValue":e[9]||(e[9]=s=>n.userDetail.ip=s)},null,8,le),[[a,n.userDetail.ip]])]),t("p",null,[e[30]||(e[30]=t("b",null,"Device Data: ",-1)),u(t("textarea",{name:"device_data",readonly:!n.isEdit,"onUpdate:modelValue":e[10]||(e[10]=s=>n.userDetail.device_data=s)},null,8,oe),[[a,n.userDetail.device_data]])]),t("p",null,[e[31]||(e[31]=t("b",null,"Created At: ",-1)),U(r(n.userDetail.created_at),1)])])])):(o(),i("div",ie,[e[34]||(e[34]=t("h2",null,"Users",-1)),t("div",re,[t("div",ue,[u(t("input",{id:"search_input",type:"text","onUpdate:modelValue":e[11]||(e[11]=s=>n.searchText=s),disabled:n.submitting,onKeypress:e[12]||(e[12]=A((...s)=>l.fetchUsers&&l.fetchUsers(...s),["enter"]))},null,40,ae),[[a,n.searchText]]),t("button",{type:"button",onClick:e[13]||(e[13]=(...s)=>l.fetchUsers&&l.fetchUsers(...s)),disabled:n.submitting},[t("span",pe,[b(g)])],8,de)]),t("div",null,[u(t("select",{name:"pag_size",id:"pag_size","onUpdate:modelValue":e[14]||(e[14]=s=>n.limit=s),onChange:e[15]||(e[15]=(...s)=>l.fetchUsers&&l.fetchUsers(...s))},e[32]||(e[32]=[D('<option value="2">2 / page</option><option value="10">10 / page</option><option value="15">15 / page</option><option value="20">20 / page</option><option value="25">25 / page</option>',5)]),544),[[h,n.limit]]),t("button",{class:"btn-sm btn-primary",onClick:e[16]||(e[16]=(...s)=>l.fetchUsers&&l.fetchUsers(...s))},"Fetch All Users"),l.canEdit?(o(),i("button",{key:0,class:"btn-sm btn-success ml-2",onClick:e[17]||(e[17]=(...s)=>l.createNewUser&&l.createNewUser(...s))},"Create New User")):c("",!0)])]),t("table",null,[e[33]||(e[33]=t("tr",null,[t("th",null,"ID"),t("th",null,"Name"),t("th",null,"E-mail"),t("th",null,"Language"),t("th",null,"Country"),t("th",null,"City"),t("th",null,"Description"),t("th",null,"Created At"),t("th",null,"Actions")],-1)),(o(!0),i(L,null,B(n.users,s=>(o(),i("tr",null,[t("td",null,r(s.id),1),t("td",null,r(s.username),1),t("td",null,r(s.email),1),t("td",null,r(s.lg),1),t("td",null,r(s.country),1),t("td",null,r(s.city),1),t("td",null,r(s.description),1),t("td",null,r(s.created_at),1),t("td",null,[t("span",{class:"icon-edit-btn ml-1",onClick:v=>l.viewUser(s)},[b(E)],8,me),l.canEdit?(o(),i("span",{key:0,class:"icon-edit-btn ml-1",onClick:v=>l.viewEditUser(s)},[b(k)],8,ce)):c("",!0),l.canEdit?(o(),i("span",{key:1,class:"icon-edit-btn danger ml-1",onClick:v=>l.deleteUser(s.id)},[b(x)],8,be)):c("",!0)])]))),256))]),l.hasResult?(o(),i("div",ye,[t("button",{type:"button",class:"btn pag-btn",disabled:n.offset==1,onClick:e[18]||(e[18]=(...s)=>l.paginateLeft&&l.paginateLeft(...s))},"<",8,fe),t("span",ge,"Page: "+r(n.offset)+" / "+r(l.pageCount)+" All Resource: "+r(n.totalCount),1),t("button",{type:"button",class:"btn pag-btn",onClick:e[19]||(e[19]=(...s)=>l.paginatRight&&l.paginatRight(...s)),disabled:n.offset>=l.pageCount},">",8,Ue)])):c("",!0)]))])}const ve=_(G,[["render",_e]]),he={components:{UsersResource:ve},data(){return{resource:"USERS"}}},De={class:"admin-resource-holder"},Ce={class:"admin-resource-side"},Ee={class:"admin-resource-content"};function ke(d,e,f,m,n,l){const y=p("UsersResource");return o(),i("div",De,[t("div",Ce,[t("button",{type:"button",class:T(["resource-btn",{active:n.resource=="USERS"}]),onClick:e[0]||(e[0]=g=>n.resource="USERS")},"Users",2),e[1]||(e[1]=D('<button type="button" class="resource-btn">Groups</button><button type="button" class="resource-btn">Group Users</button><button type="button" class="resource-btn">Friends</button><button type="button" class="resource-btn">Chat Messages</button><button type="button" class="resource-btn">Logs</button><button type="button" class="resource-btn">Admin Users</button>',6))]),t("div",Ee,[n.resource=="USERS"?(o(),C(y,{key:0})):c("",!0)])])}const xe=_(he,[["render",ke]]),Ie={components:{AdminLayout:I,BaseResurce:xe}};function Se(d,e,f,m,n,l){const y=p("BaseResurce"),g=p("AdminLayout");return o(),C(g,null,{default:M(()=>[b(y)]),_:1})}const Te=_(Ie,[["render",Se]]);export{Te as default};
