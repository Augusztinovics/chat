import{A as I}from"./AdminLayout-B3mZGOMF.js";import{I as S,a as x}from"./IconSearch-ssHGfAuK.js";import{c as w,m as V,f as R,_,s as a,x as i,g as r,h as e,t as o,k as U,l as d,v as c,o as b,i as p,B as A,G as N,D,F as B,C as L,n as T,q as E,w as F}from"./index--BqbERIe.js";import{I as P}from"./IconEdit-BA5XhIEa.js";import{I as X}from"./IconUser-wLaRT8fh.js";import{a as z}from"./admin_user-BlVdyJIe.js";import{l as G}from"./LoadingOverlay-JJ6UYH7t.js";const M={components:{IconSearch:S,IconEyeOpen:w,IconEdit:P,IconUser:X,IconX:x},data(){return{users:[],userDetail:null,isEdit:!1,limit:10,offset:1,totalCount:0,searchText:"",submitting:!1}},computed:{...V(z,G),canEdit(){return this.adminUserStore.roleId>1}},methods:{fetchUsers(){let u={s:1,l:parseInt(this.limit),st:this.searchText};R.get("/api/admin/users?"+new URLSearchParams(u).toString()).then(t=>{this.users=t.data.users,this.totalCount=t.data.result_count}).catch(t=>{console.log(t)})},viewUser(u){this.userDetail=u},viewEditUser(u){this.isEdit=!0,this.userDetail={...u}},closeDetail(){this.isEdit=!1,this.userDetail=null},createNewUser(){this.isEdit=!0,this.userDetail={id:0,username:null,password:null,email:null,lg:null,country:null,city:null,description:null,profile_img:null,ip:null,device_data:null,created_at:null}},deleteUser(u){},saveUser(){}}},O={class:"resurce"},K={key:0,class:"detail-container"},q={class:"details-header"},j=["readonly"],H={class:"mt-2"},J=["src"],Q={key:1,class:"icon-lg"},W={class:"detail"},Y=["readonly"],Z=["readonly"],$=["readonly"],ee=["readonly"],te={key:1},se={class:"resurce-control"},ne={class:"password-container"},le=["disabled"],oe=["disabled"],ie={class:"icon"},re=["onClick"],ue=["onClick"],ae=["onClick"];function de(u,t,v,f,s,l){const m=a("IconUser"),y=a("IconSearch"),C=a("IconEyeOpen"),k=a("IconEdit"),h=a("IconX");return i(),r("div",O,[s.userDetail?(i(),r("div",K,[e("div",q,[e("h2",null,[e("span",null,"#"+o(s.userDetail.id),1),t[13]||(t[13]=U()),d(e("input",{type:"text",name:"username",readonly:!s.isEdit,"onUpdate:modelValue":t[0]||(t[0]=n=>s.userDetail.username=n)},null,8,j),[[c,s.userDetail.username]])]),e("div",null,[s.isEdit?(i(),r("button",{key:0,class:"btn btn-success mr-2",onClick:t[1]||(t[1]=(...n)=>l.saveUser&&l.saveUser(...n))},"Save")):b("",!0),e("button",{class:"btn-sm btn-secondary",onClick:t[2]||(t[2]=(...n)=>l.closeDetail&&l.closeDetail(...n))},"X")])]),e("div",H,[s.userDetail.profile_img?(i(),r("img",{key:0,src:s.userDetail.profile_img,alt:"Profile Image",class:"profile-img md"},null,8,J)):(i(),r("span",Q,[p(m)]))]),e("div",W,[e("p",null,[t[14]||(t[14]=e("b",null,"E-mail: ",-1)),d(e("input",{type:"text",name:"email",readonly:!s.isEdit,"onUpdate:modelValue":t[3]||(t[3]=n=>s.userDetail.email=n)},null,8,Y),[[c,s.userDetail.email]])]),e("p",null,[t[15]||(t[15]=e("b",null,"Language: ",-1)),U(o(s.userDetail.lg),1)]),e("p",null,[t[16]||(t[16]=e("b",null,"Country: ",-1)),d(e("input",{type:"text",name:"country",readonly:!s.isEdit,"onUpdate:modelValue":t[4]||(t[4]=n=>s.userDetail.country=n)},null,8,Z),[[c,s.userDetail.country]])]),e("p",null,[t[17]||(t[17]=e("b",null,"City: ",-1)),d(e("input",{type:"text",name:"city",readonly:!s.isEdit,"onUpdate:modelValue":t[5]||(t[5]=n=>s.userDetail.city=n)},null,8,$),[[c,s.userDetail.city]])]),e("p",null,[t[18]||(t[18]=e("b",null,"Description: ",-1)),d(e("textarea",{name:"description",readonly:!s.isEdit,"onUpdate:modelValue":t[6]||(t[6]=n=>s.userDetail.description=n)},null,8,ee),[[c,s.userDetail.description]])]),e("p",null,[t[19]||(t[19]=e("b",null,"IP: ",-1)),U(o(s.userDetail.ip),1)]),e("p",null,[t[20]||(t[20]=e("b",null,"Device Data: ",-1)),e("span",null,o(s.userDetail.device_data),1)]),e("p",null,[t[21]||(t[21]=e("b",null,"Created At: ",-1)),U(o(s.userDetail.created_at),1)])])])):(i(),r("div",te,[t[24]||(t[24]=e("h2",null,"Users",-1)),e("div",se,[e("div",ne,[d(e("input",{id:"search_input",type:"text","onUpdate:modelValue":t[7]||(t[7]=n=>s.searchText=n),disabled:s.submitting,onKeypress:t[8]||(t[8]=A((...n)=>l.fetchUsers&&l.fetchUsers(...n),["enter"]))},null,40,le),[[c,s.searchText]]),e("button",{type:"button",onClick:t[9]||(t[9]=(...n)=>l.fetchUsers&&l.fetchUsers(...n)),disabled:s.submitting},[e("span",ie,[p(y)])],8,oe)]),e("div",null,[d(e("select",{name:"pag_size",id:"pag_size","onUpdate:modelValue":t[10]||(t[10]=n=>s.limit=n)},t[22]||(t[22]=[D('<option value="5">5 / page</option><option value="10">10 / page</option><option value="15">15 / page</option><option value="20">20 / page</option><option value="25">25 / page</option>',5)]),512),[[N,s.limit]]),e("button",{class:"btn-sm btn-primary",onClick:t[11]||(t[11]=(...n)=>l.fetchUsers&&l.fetchUsers(...n))},"Fetch All Users"),l.canEdit?(i(),r("button",{key:0,class:"btn-sm btn-success ml-2",onClick:t[12]||(t[12]=(...n)=>l.createNewUser&&l.createNewUser(...n))},"Create New User")):b("",!0)])]),e("table",null,[t[23]||(t[23]=e("tr",null,[e("th",null,"ID"),e("th",null,"Name"),e("th",null,"E-mail"),e("th",null,"Language"),e("th",null,"Country"),e("th",null,"City"),e("th",null,"Description"),e("th",null,"Created At"),e("th",null,"Actions")],-1)),(i(!0),r(B,null,L(s.users,n=>(i(),r("tr",null,[e("td",null,o(n.id),1),e("td",null,o(n.username),1),e("td",null,o(n.email),1),e("td",null,o(n.lg),1),e("td",null,o(n.country),1),e("td",null,o(n.city),1),e("td",null,o(n.description),1),e("td",null,o(n.created_at),1),e("td",null,[e("span",{class:"icon-edit-btn ml-1",onClick:g=>l.viewUser(n)},[p(C)],8,re),l.canEdit?(i(),r("span",{key:0,class:"icon-edit-btn ml-1",onClick:g=>l.viewEditUser(n)},[p(k)],8,ue)):b("",!0),l.canEdit?(i(),r("span",{key:1,class:"icon-edit-btn danger ml-1",onClick:g=>l.deleteUser(n.id)},[p(h)],8,ae)):b("",!0)])]))),256))]),e("div",null," Pagination "+o(s.totalCount),1)]))])}const ce=_(M,[["render",de]]),pe={components:{UsersResource:ce},data(){return{resource:"USERS"}}},me={class:"admin-resource-holder"},be={class:"admin-resource-side"},ye={class:"admin-resource-content"};function Ue(u,t,v,f,s,l){const m=a("UsersResource");return i(),r("div",me,[e("div",be,[e("button",{type:"button",class:T(["resource-btn",{active:s.resource=="USERS"}]),onClick:t[0]||(t[0]=y=>s.resource="USERS")},"Users",2),t[1]||(t[1]=D('<button type="button" class="resource-btn">Groups</button><button type="button" class="resource-btn">Group Users</button><button type="button" class="resource-btn">Friends</button><button type="button" class="resource-btn">Chat Messages</button><button type="button" class="resource-btn">Logs</button><button type="button" class="resource-btn">Admin Users</button>',6))]),e("div",ye,[s.resource=="USERS"?(i(),E(m,{key:0})):b("",!0)])])}const _e=_(pe,[["render",Ue]]),ve={components:{AdminLayout:I,BaseResurce:_e}};function fe(u,t,v,f,s,l){const m=a("BaseResurce"),y=a("AdminLayout");return i(),E(y,null,{default:F(()=>[p(m)]),_:1})}const Se=_(ve,[["render",fe]]);export{Se as default};
