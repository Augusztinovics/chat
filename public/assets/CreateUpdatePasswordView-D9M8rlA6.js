import{_ as b,b as g,c as _,m as y,f as C,g as d,h as o,j as k,k as u,t as c,l as p,p as h,n as f,q as a,o as w,x as i,s as P}from"./index-BNAkoScm.js";import{a as v}from"./admin_user-CbaLGgfr.js";const I={components:{IconEyeClose:g,IconEyeOpen:_},data(){return{password:"",showPassword:!1,rePassword:"",showRePassword:!1,confirmPassword:"",showConfirmPassword:!1,submitting:!1,missingPassword:!1,missingRePassword:!1,missingConfirmPassword:!1}},computed:{...y(v),passwordInputType(){return this.showPassword?"text":"password"},rePasswordInputType(){return this.showRePassword?"text":"password"},confirmPasswordInputType(){return this.showConfirmPassword?"text":"password"},isUpdate(){return this.adminUserStore.hasUpdatePassword}},methods:{goBack(){this.$router.push("/admin")},clearErrors(){this.missingPassword=!1,this.missingRePassword=!1,this.missingConfirmPassword=!1},toogleShowPassword(){this.showPassword=!this.showPassword},toogleShowRePassword(){this.showRePassword=!this.showRePassword},toogleShowConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword},validateInput(){let n=!1;return this.password.trim()===""&&(this.missingPassword=!0,n||(document.getElementById("password_input").focus(),n=!0)),(this.rePassword.trim()===""||this.rePassword.trim()!=this.password.trim())&&(this.missingRePassword=!0,n||(document.getElementById("re_password_input").focus(),n=!0)),this.confirmPassword.trim()===""&&this.isUpdate&&(this.missingConfirmPassword=!0,n||(document.getElementById("confirm_password_input").focus(),n=!0)),n},submit(){if(this.submitting||this.validateInput())return;this.submitting=!0;let n={password:this.password.trim(),re_password:this.rePassword.trim()};this.isUpdate&&(n.confirm_password=this.confirmPassword.trim()),C.post("/api/admin/admin-password",n).then(()=>{this.adminUserStore.hasUpdatePassword=!0,this.$router.push("/admin")}).catch(()=>{this.submitting=!1,this.password="",this.rePassword="",this.confirmPassword="",this.missingPassword=!0,this.missingRePassword=!0,this.missingConfirmPassword=!0,document.getElementById("password_input").focus()})}},mounted(){setTimeout(()=>{document.getElementById("password_input").focus()},300)}},E={class:"admin-confirm-card"},U={class:"mb-1"},S={for:"password_input"},R={class:"password-container"},x=["type","disabled"],B={class:"icon"},N={key:0,class:"invalid-text"},T={class:"mb-1"},V={for:"re_password_input"},D={class:"password-container"},O=["type","disabled"],A={class:"icon"},M={key:0,class:"invalid-text"},j={key:0,class:"mb-1"},q={class:"password-container"},z=["type","disabled"],F={class:"icon"},G={key:0,class:"invalid-text"},H={class:"text-center mb-2 mt-2"},J=["disabled"],K=["disabled"];function L(n,s,Q,W,r,t){const m=P("IconEyeClose"),l=P("IconEyeOpen");return i(),d("div",null,[o("div",E,[o("form",{novalidate:"",onSubmit:s[10]||(s[10]=k((...e)=>t.submit&&t.submit(...e),["prevent"]))},[o("div",U,[o("label",S,[u(c(t.isUpdate?"New":"")+" Admin Update Password",1),s[11]||(s[11]=o("span",null,"*",-1))]),o("div",R,[p(o("input",{id:"password_input",type:t.passwordInputType,class:f({"invalid-input":r.missingPassword}),"onUpdate:modelValue":s[0]||(s[0]=e=>r.password=e),onInput:s[1]||(s[1]=(...e)=>t.clearErrors&&t.clearErrors(...e)),disabled:r.submitting},null,42,x),[[h,r.password]]),o("button",{type:"button",onClick:s[2]||(s[2]=(...e)=>t.toogleShowPassword&&t.toogleShowPassword(...e))},[o("span",B,[r.showPassword?(i(),a(m,{key:0})):(i(),a(l,{key:1}))])])]),r.missingPassword?(i(),d("p",N,"Noooooooooo")):w("",!0)]),o("div",T,[o("label",V,[u(c(t.isUpdate?"New":"")+" Admin Update Password again",1),s[12]||(s[12]=o("span",null,"*",-1))]),o("div",D,[p(o("input",{id:"re_password_input",type:t.rePasswordInputType,class:f({"invalid-input":r.missingRePassword}),"onUpdate:modelValue":s[3]||(s[3]=e=>r.rePassword=e),onInput:s[4]||(s[4]=(...e)=>t.clearErrors&&t.clearErrors(...e)),disabled:r.submitting},null,42,O),[[h,r.rePassword]]),o("button",{type:"button",onClick:s[5]||(s[5]=(...e)=>t.toogleShowRePassword&&t.toogleShowRePassword(...e))},[o("span",A,[r.showRePassword?(i(),a(m,{key:0})):(i(),a(l,{key:1}))])])]),r.missingRePassword?(i(),d("p",M,"Noooooooooo")):w("",!0)]),t.isUpdate?(i(),d("div",j,[s[13]||(s[13]=o("label",{for:"confirm_password_input"},[u("Old Admin Update Password"),o("span",null,"*")],-1)),o("div",q,[p(o("input",{id:"confirm_password_input",type:t.confirmPasswordInputType,class:f({"invalid-input":r.missingConfirmPassword}),"onUpdate:modelValue":s[6]||(s[6]=e=>r.confirmPassword=e),onInput:s[7]||(s[7]=(...e)=>t.clearErrors&&t.clearErrors(...e)),disabled:r.submitting},null,42,z),[[h,r.confirmPassword]]),o("button",{type:"button",onClick:s[8]||(s[8]=(...e)=>t.toogleShowConfirmPassword&&t.toogleShowConfirmPassword(...e))},[o("span",F,[r.showConfirmPassword?(i(),a(m,{key:0})):(i(),a(l,{key:1}))])])]),r.missingConfirmPassword?(i(),d("p",G,"Noooooooooo")):w("",!0)])):w("",!0),o("div",H,[o("button",{type:"submit",class:"btn btn-block btn-primary",disabled:r.submitting},"Confirm",8,J),t.isUpdate?(i(),d("button",{key:0,type:"button",class:"btn btn-block btn-secondary mt-1",onClick:s[9]||(s[9]=e=>t.goBack()),disabled:r.submitting},"Back",8,K)):w("",!0)])],32)])])}const Z=b(I,[["render",L]]);export{Z as default};
