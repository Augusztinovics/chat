import{L as z,p as L,B as D}from"./BaseLayout-CQgiS79k.js";import{I as C}from"./IconUser-UJk6ukpL.js";import{_ as m,x as i,g as o,h as s,d as q,e as T,z as R,u as k,i as d,t as c,w,k as y,o as f,s as l,m as F,f as M,l as $,v as N,A,F as B,B as P,q as S,C as U,n as b}from"./index-Ce8MgaW7.js";import{M as O,F as G}from"./Modal-D5EFjxiE.js";const H={},j={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function V(t,e){return i(),o("svg",j,e[0]||(e[0]=[s("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"},null,-1)]))}const x=m(H,[["render",V]]),K={},J={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function Q(t,e){return i(),o("svg",J,e[0]||(e[0]=[s("path",{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},null,-1)]))}const W=m(K,[["render",Q]]),X={},Y={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function Z(t,e){return i(),o("svg",Y,e[0]||(e[0]=[s("path",{d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"},null,-1)]))}const ee=m(X,[["render",Z]]),se=q("requestSend",{state:()=>({requests:[]}),actions:{loadRequests(){return new Promise((t,e)=>{})},sendRequest(t){return new Promise((e,a)=>{console.log(t),setTimeout(()=>{e(!0)},1e3)})}}}),te=q("requestGet",{state:()=>({requests:[]}),actions:{loadRequests(){return new Promise((t,e)=>{})},acceptRequest(t){return new Promise((e,a)=>{console.log(t),setTimeout(()=>{e(!0)},1e3)})}}}),ne={props:{friend:{type:Object,default(t){return{friendId:null,friendName:"",friendDescription:"",friendCountry:"",friendCity:"",friendImg:null,reqId:null,reqAcceptedDate:null,sendId:null,sendAcceptedDate:null}}}},components:{IconUser:C,Modal:O},data(){return{showDetails:!1,sending:!1}},computed:{...T(k,["lg"]),hasFriend(){return this.friend.friendId!=null},isFriend(){return this.friend.reqId&&this.friend.reqAcceptedDate||this.friend.sendId&&this.friend.sendAcceptedDate},isReqGet(){return this.friend.reqId&&!this.friend.reqAcceptedDate},isReqSend(){return this.friend.sendId&&!this.friend.sendAcceptedDate}},methods:{...R(se,["sendRequest"]),...R(te,["acceptRequest"]),modalClose(){this.showDetails=!1},openModal(){this.showDetails=!0},sendFriendRequest(){this.sending=!0,this.sendRequest({friendId:this.friend.friendId}).then(()=>{this.sending=!1,this.friend.sendId=1}).catch(()=>{this.sending=!1})},acceptFriendRequest(){this.sending=!0,this.acceptRequest({friendId:this.friend.friendId,reqId:this.friend.reqId}).then(()=>{this.sending=!1,this.friend.reqAcceptedDate=!0}).catch(()=>{this.sending=!1})},sendMessage(){}}},ie={key:0,class:"friend-card"},re={class:"friend-card-img"},oe=["src"],ae={key:1,class:"icon-lg"},ce={class:"friend-card-action"},de=["disabled"],le=["disabled"],he={key:2},ue=["disabled"],_e={class:"text-left"},fe={class:"text-center mt-1 mb-2"},ge=["src"],pe={key:1,class:"icon-lg"},me={class:"friend-modal-des"},be={class:"text-bold"},Se={class:"text-bold"},ve={class:"text-bold"},Ie={class:"mb-2"};function ye(t,e,a,g,r,n){const u=l("IconUser"),p=l("Modal");return n.hasFriend?(i(),o("div",ie,[s("div",re,[a.friend.friendImg?(i(),o("img",{key:0,src:a.friend.friendImg,alt:"Profile Image",class:"profile-img md"},null,8,oe)):(i(),o("span",ae,[d(u)]))]),s("div",{class:"friend-card-name",onClick:e[0]||(e[0]=(..._)=>n.openModal&&n.openModal(..._))},[s("h5",null,c(a.friend.friendName),1)]),s("div",ce,[n.isFriend?(i(),o("button",{key:0,class:"btn-sm btn-primary",onClick:e[1]||(e[1]=(..._)=>n.sendMessage&&n.sendMessage(..._)),disabled:r.sending},c(r.sending?t.lg("sending"):t.lg("send_message")),9,de)):n.isReqGet?(i(),o("button",{key:1,class:"btn-sm btn-primary",onClick:e[2]||(e[2]=(..._)=>n.acceptFriendRequest&&n.acceptFriendRequest(..._)),disabled:r.sending},c(r.sending?t.lg("sending"):t.lg("accept_request")),9,le)):n.isReqSend?(i(),o("p",he,c(t.lg("already_send")),1)):(i(),o("button",{key:3,class:"btn-sm btn-primary",onClick:e[3]||(e[3]=(..._)=>n.sendFriendRequest&&n.sendFriendRequest(..._)),disabled:r.sending},c(r.sending?t.lg("sending"):t.lg("send_request")),9,ue))]),d(p,{show:r.showDetails,size:"md",title:a.friend.friendName,headerClass:"text-left",showFooter:!1,onClose:n.modalClose},{default:w(()=>[s("div",_e,[s("div",fe,[a.friend.friendImg?(i(),o("img",{key:0,src:a.friend.friendImg,alt:"Profile Image",class:"profile-img md"},null,8,ge)):(i(),o("span",pe,[d(u)]))]),s("div",me,[s("p",null,[s("span",be,c(t.lg("city"))+" :",1),y(c(a.friend.friendCity??"????"),1)]),s("p",null,[s("span",Se,c(t.lg("friend_country"))+" :",1),y(c(a.friend.friendCountry??"????"),1)]),s("p",null,[s("span",ve,c(t.lg("friend_des")),1)]),s("p",Ie,c(a.friend.friendDescription??"??????"),1)])])]),_:1},8,["show","title","onClose"])])):f("",!0)}const Te=m(ne,[["render",ye]]),ke={components:{IconSearch:x,LoadingOverlay:z,FailToast:G,FriendCard:Te},data(){return{submitting:!1,searchText:"",firstSearch:!0,searchResult:[],searchError:!1,paginationIndex:0}},computed:{...T(k,["lg"]),...F(L),hasSearchResult(){return this.searchResult.length>0},hasPagination(){return this.searchResult.length>this.paginationSizesStore.topSize},rightPaginationDisabled(){return this.paginationIndex*this.paginationSizesStore.topSize+this.paginationSizesStore.topSize>=this.searchResult.length},cardsToShow(){let t=[];if(!this.hasSearchResult)return t;let e=this.paginationIndex*this.paginationSizesStore.topSize;e>this.searchResult.length-1&&(e=this.searchResult.length-1),this.paginationSizesStore.topSize>=this.searchResult.length&&(e=0);let a=e+this.paginationSizesStore.topSize;a>this.searchResult.length&&(a=this.searchResult.length);for(let g=e;g<a;g++)t.push(this.searchResult[g]);return t}},methods:{searchUsers(){this.searchText.trim()!=""&&(this.firstSearch=!1,this.submitting=!0,this.searchError=!1,M.get("/api/resources/search-user?un="+this.searchText.trim()).then(t=>{this.submitting=!1,this.searchResult=t.data.users}).catch(t=>{this.submitting=!1,this.searchError=!0,setTimeout(()=>{this.searchError=!1},3e3),console.log(t)}))},paginateLeft(){this.paginationIndex--},paginateRight(){this.paginationIndex++}},mounted(){this.submitting=!1,this.searchText="",this.firstSearch=!0,document.getElementById("search_input").focus()}},Re={class:"search-menu"},Ce={class:"user-search-input"},qe={for:"search_input"},we={class:"password-container"},xe=["disabled"],Ee=["disabled"],ze={class:"icon"},Le={key:0,class:"search-result-holder"},De={class:"results"},Fe={key:0},Me=["disabled"],$e={class:"result-cards"},Ne={key:1},Ae=["disabled"],Be={key:1,class:"search-result-no-result-holder"},Pe={key:0},Ue={key:1};function Oe(t,e,a,g,r,n){const u=l("IconSearch"),p=l("FriendCard"),_=l("LoadingOverlay"),v=l("FailToast");return i(),o("div",null,[s("div",Re,[s("div",Ce,[s("label",qe,c(t.lg("user_search")),1),s("div",we,[$(s("input",{id:"search_input",type:"text","onUpdate:modelValue":e[0]||(e[0]=h=>r.searchText=h),disabled:r.submitting,onKeypress:e[1]||(e[1]=A((...h)=>n.searchUsers&&n.searchUsers(...h),["enter"]))},null,40,xe),[[N,r.searchText]]),s("button",{type:"button",onClick:e[2]||(e[2]=(...h)=>n.searchUsers&&n.searchUsers(...h)),disabled:r.submitting},[s("span",ze,[d(u)])],8,Ee)])])]),s("div",null,[n.hasSearchResult?(i(),o("div",Le,[s("p",null,[s("span",null,c(r.searchResult.length),1),e[5]||(e[5]=y()),s("span",null,c(t.lg("results")),1)]),s("div",De,[n.hasPagination?(i(),o("div",Fe,[s("button",{type:"button",disabled:r.paginationIndex==0,class:"pag-btn",onClick:e[3]||(e[3]=(...h)=>n.paginateLeft&&n.paginateLeft(...h))},"<",8,Me)])):f("",!0),s("div",$e,[(i(!0),o(B,null,P(n.cardsToShow,h=>(i(),S(p,{key:"friend_"+h.friendId,friend:h},null,8,["friend"]))),128))]),n.hasPagination?(i(),o("div",Ne,[s("button",{type:"button",disabled:n.rightPaginationDisabled,class:"pag-btn",onClick:e[4]||(e[4]=(...h)=>n.paginateRight&&n.paginateRight(...h))},">",8,Ae)])):f("",!0)])])):(i(),o("div",Be,[r.firstSearch?(i(),o("p",Pe,c(t.lg("user_search_before")),1)):(i(),o("p",Ue,c(t.lg("user_search_not_find")),1))]))]),r.submitting?(i(),S(_,{key:0})):f("",!0),r.searchError?(i(),S(v,{key:1})):f("",!0)])}const Ge=m(ke,[["render",Oe]]),He={components:{IconUser:C,IconEarth:U,IconSearch:x,IconLeft:W,IconRight:ee,SearchContactTab:Ge},data(){return{selectedTab:"SOME"}},computed:{...T(k,["lg"])},methods:{selectTab(t){t==this.selectedTab?this.selectedTab="NONE":this.selectedTab=t}}},je={class:"contact-tabs"},Ve={class:"tab"},Ke={class:"icon"},Je={class:"icon"},Qe={class:"tab-text"},We={class:"icon"},Xe={class:"icon"},Ye={class:"tab-text"},Ze={class:"icon"},es={class:"icon"},ss={class:"tab-text"},ts={class:"icon"},ns={class:"icon"},is={class:"tab-text"},rs={key:0,class:"tab-content"},os={key:0},as={key:1},cs={key:2},ds={key:3};function ls(t,e,a,g,r,n){const u=l("IconUser"),p=l("IconEarth"),_=l("IconSearch"),v=l("IconLeft"),h=l("IconRight"),E=l("SearchContactTab");return i(),o("div",je,[s("div",Ve,[s("span",{class:b(["tab-menu",{"active-tab":r.selectedTab=="SOME"}]),onClick:e[0]||(e[0]=I=>n.selectTab("SOME"))},[s("span",Ke,[d(u)]),s("span",Je,[d(p)]),s("span",Qe,c(t.lg("who_can_know")),1)],2),s("span",{class:b(["tab-menu",{"active-tab":r.selectedTab=="SEARCH"}]),onClick:e[1]||(e[1]=I=>n.selectTab("SEARCH"))},[s("span",We,[d(u)]),s("span",Xe,[d(_)]),s("span",Ye,c(t.lg("contact_search")),1)],2),s("span",{class:b(["tab-menu",{"active-tab":r.selectedTab=="GET"}]),onClick:e[2]||(e[2]=I=>n.selectTab("GET"))},[s("span",Ze,[d(u)]),s("span",es,[d(v)]),s("span",ss,c(t.lg("friend_requests")),1)],2),s("span",{class:b(["tab-menu",{"active-tab":r.selectedTab=="SEND"}]),onClick:e[3]||(e[3]=I=>n.selectTab("SEND"))},[s("span",ts,[d(u)]),s("span",ns,[d(h)]),s("span",is,c(t.lg("send_requests")),1)],2)]),r.selectedTab!="NONE"?(i(),o("div",rs,[r.selectedTab=="SOME"?(i(),o("div",os,"Ajanlas")):f("",!0),r.selectedTab=="SEARCH"?(i(),o("div",as,[d(E)])):f("",!0),r.selectedTab=="GET"?(i(),o("div",cs,"Kapottak")):f("",!0),r.selectedTab=="SEND"?(i(),o("div",ds,"Elkuldtem, de hun a valasz")):f("",!0)])):f("",!0)])}const hs=m(He,[["render",ls]]),us={};function _s(t,e,a,g,r,n){return i(),o("div",null," contacts ")}const fs=m(us,[["render",_s]]),gs={components:{ContactTabs:hs,Contacts:fs}},ps={class:"mt-2"};function ms(t,e,a,g,r,n){const u=l("ContactTabs"),p=l("Contacts");return i(),o("div",null,[s("div",null,[d(u)]),s("div",ps,[d(p)])])}const bs=m(gs,[["render",ms]]),Ss={components:{BaseLayout:D,Home:bs},props:["socket"]};function vs(t,e,a,g,r,n){const u=l("Home"),p=l("BaseLayout");return i(),S(p,null,{default:w(()=>[d(u)]),_:1})}const Rs=m(Ss,[["render",vs]]);export{Rs as default};
