import{_ as b,b as g,c as _,m as y,f as C,g as d,h as o,j as k,k as u,t as P,l as p,p as h,n as f,q as a,o as w,x as e,s as c}from"./index-DZSTK283.js";import{a as v}from"./admin_user-DXg-hO-i.js";const I={components:{IconEyeClose:g,IconEyeOpen:_},data(){return{password:"",showPassword:!1,rePassword:"",showRePassword:!1,confirmPassword:"",showConfirmPassword:!1,submitting:!1,missingPassword:!1,missingRePassword:!1,missingConfirmPassword:!1}},computed:{...y(v),passwordInputType(){return this.showPassword?"text":"password"},rePasswordInputType(){return this.showRePassword?"text":"password"},confirmPasswordInputType(){return this.showConfirmPassword?"text":"password"},isUpdate(){return this.adminUserStore.hasUpdatePassword}},methods:{goBack(){this.$router.push("/admin")},clearErrors(){this.missingPassword=!1,this.missingRePassword=!1,this.missingConfirmPassword=!1},toogleShowPassword(){this.showPassword=!this.showPassword},toogleShowRePassword(){this.showRePassword=!this.showRePassword},toogleShowConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword},validateInput(){let n=!1;return this.password.trim()===""&&(this.missingPassword=!0,n||(document.getElementById("password_input").focus(),n=!0)),(this.rePassword.trim()===""||this.rePassword.trim()!=this.password.trim())&&(this.missingRePassword=!0,n||(document.getElementById("re_password_input").focus(),n=!0)),this.confirmPassword.trim()===""&&this.isUpdate&&(this.missingConfirmPassword=!0,n||(document.getElementById("confirm_password_input").focus(),n=!0)),n},submit(){if(this.submitting||this.validateInput())return;this.submitting=!0;let n={password:this.password.trim(),re_password:this.rePassword.trim()};this.isUpdate&&(n.confirm_password=this.confirmPassword.trim()),C.post("/api/admin/admin-password",n).then(()=>{this.adminUserStore.hasUpdatePassword=!0,this.$router.push("/admin")}).catch(()=>{this.submitting=!1,this.password="",this.rePassword="",this.confirmPassword="",this.missingPassword=!0,this.missingRePassword=!0,this.missingConfirmPassword=!0,document.getElementById("password_input").focus()})}}},E={class:"admin-confirm-card"},U={class:"mb-1"},S={for:"password_input"},R={class:"password-container"},x=["type","disabled"],B={class:"icon"},N={key:0,class:"invalid-text"},T={class:"mb-1"},V={for:"re_password_input"},D={class:"password-container"},O=["type","disabled"],M={class:"icon"},j={key:0,class:"invalid-text"},q={key:0,class:"mb-1"},z={class:"password-container"},A=["type","disabled"],F={class:"icon"},G={key:0,class:"invalid-text"},H={class:"text-center mb-2 mt-2"},J=["disabled"],K=["disabled"];function L(n,s,Q,W,r,t){const l=c("IconEyeClose"),m=c("IconEyeOpen");return e(),d("div",null,[o("div",E,[o("form",{novalidate:"",onSubmit:s[10]||(s[10]=k((...i)=>t.submit&&t.submit(...i),["prevent"]))},[o("div",U,[o("label",S,[u(P(t.isUpdate?"New":"")+" Password",1),s[11]||(s[11]=o("span",null,"*",-1))]),o("div",R,[p(o("input",{id:"password_input",type:t.passwordInputType,class:f({"invalid-input":r.missingPassword}),"onUpdate:modelValue":s[0]||(s[0]=i=>r.password=i),onInput:s[1]||(s[1]=(...i)=>t.clearErrors&&t.clearErrors(...i)),disabled:r.submitting},null,42,x),[[h,r.password]]),o("button",{type:"button",onClick:s[2]||(s[2]=(...i)=>t.toogleShowPassword&&t.toogleShowPassword(...i))},[o("span",B,[r.showPassword?(e(),a(l,{key:0})):(e(),a(m,{key:1}))])])]),r.missingPassword?(e(),d("p",N,"Noooooooooo")):w("",!0)]),o("div",T,[o("label",V,[u(P(t.isUpdate?"New":"")+" Password again",1),s[12]||(s[12]=o("span",null,"*",-1))]),o("div",D,[p(o("input",{id:"re_password_input",type:t.rePasswordInputType,class:f({"invalid-input":r.missingRePassword}),"onUpdate:modelValue":s[3]||(s[3]=i=>r.rePassword=i),onInput:s[4]||(s[4]=(...i)=>t.clearErrors&&t.clearErrors(...i)),disabled:r.submitting},null,42,O),[[h,r.rePassword]]),o("button",{type:"button",onClick:s[5]||(s[5]=(...i)=>t.toogleShowRePassword&&t.toogleShowRePassword(...i))},[o("span",M,[r.showRePassword?(e(),a(l,{key:0})):(e(),a(m,{key:1}))])])]),r.missingRePassword?(e(),d("p",j,"Noooooooooo")):w("",!0)]),t.isUpdate?(e(),d("div",q,[s[13]||(s[13]=o("label",{for:"confirm_password_input"},[u("Old Password"),o("span",null,"*")],-1)),o("div",z,[p(o("input",{id:"confirm_password_input",type:t.confirmPasswordInputType,class:f({"invalid-input":r.missingConfirmPassword}),"onUpdate:modelValue":s[6]||(s[6]=i=>r.confirmPassword=i),onInput:s[7]||(s[7]=(...i)=>t.clearErrors&&t.clearErrors(...i)),disabled:r.submitting},null,42,A),[[h,r.confirmPassword]]),o("button",{type:"button",onClick:s[8]||(s[8]=(...i)=>t.toogleShowConfirmPassword&&t.toogleShowConfirmPassword(...i))},[o("span",F,[r.showConfirmPassword?(e(),a(l,{key:0})):(e(),a(m,{key:1}))])])]),r.missingConfirmPassword?(e(),d("p",G,"Noooooooooo")):w("",!0)])):w("",!0),o("div",H,[o("button",{type:"submit",class:"btn btn-block btn-primary",disabled:r.submitting},"Confirm",8,J),t.isUpdate?(e(),d("button",{key:0,type:"button",class:"btn btn-block btn-secondary mt-1",onClick:s[9]||(s[9]=i=>t.goBack()),disabled:r.submitting},"Back",8,K)):w("",!0)])],32)])])}const Z=b(I,[["render",L]]);export{Z as default};
