import{l as z,p as O,u as $,B as j}from"./BaseLayout-BV6ED6VK.js";import{I as H}from"./IconUser-Qxm55sTx.js";import{_ as b,x as r,g as a,h as n,d as K,f as v,e as S,z as T,u as k,i as f,t as d,w as F,k as p,o as c,l as w,v as P,s as g,m as D,A as ee,F as y,B as C,q as I,n as N,y as se,r as V}from"./index-m1Ief3vh.js";import{M as B,I as J,F as Q,S as X}from"./SuccessToast-BcePD_iX.js";const te={},ne={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function ie(e,s){return r(),a("svg",ne,s[0]||(s[0]=[n("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"},null,-1)]))}const Y=b(te,[["render",ie]]),re={},ae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function oe(e,s){return r(),a("svg",ae,s[0]||(s[0]=[n("path",{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},null,-1)]))}const de=b(re,[["render",oe]]),le={},ue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function ce(e,s){return r(),a("svg",ue,s[0]||(s[0]=[n("path",{d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"},null,-1)]))}const he=b(le,[["render",ce]]),M=K("requestSend",{state:()=>({loaded:!1,requests:[]}),getters:{numSendRequests:e=>e.requests.length??0,isLoaded:e=>e.loaded,sendRequests:e=>e.requests},actions:{loadRequests(){return new Promise((e,s)=>{v.get("/api/resources/sended-friend-requests").then(i=>{var u;this.requests=((u=i.data)==null?void 0:u.sendedRequests)??[],this.loaded=!0,e(!0)}).catch(i=>{i.response.status==401?s(401):s(i)})})},sendRequest(e){return new Promise((s,i)=>{v.post("/api/resources/friend-request-send",e).then(u=>{var o;this.requests=((o=u.data)==null?void 0:o.sendedRequests)??[],s(!0)}).catch(u=>{u.response.status==401?i(401):i(u)})})},cancelFrienRequest(e){return new Promise((s,i)=>{v.post("/api/resources/friend-request-delete",e).then(u=>{var o;this.requests=((o=u.data)==null?void 0:o.sendedRequests)??[],s(!0)}).catch(u=>{u.response.status==401?i(401):i(u)})})},editFriendRequest(e){return new Promise((s,i)=>{v.post("/api/resources/friend-request-edit",e).then(u=>{var o;this.requests=((o=u.data)==null?void 0:o.sendedRequests)??[],s(!0)}).catch(u=>{u.response.status==401?i(401):i(u)})})}}}),U=K("requestGet",{state:()=>({loaded:!1,requests:[]}),getters:{numGetRequests:e=>e.requests.length??0,isLoaded:e=>e.loaded,getRequests:e=>e.requests},actions:{loadRequests(){return new Promise((e,s)=>{v.get("/api/resources/received-friend-requests").then(i=>{var u;this.requests=((u=i.data)==null?void 0:u.receivedRequests)??[],this.loaded=!0,e(!0)}).catch(i=>{i.response.status==401?s(401):s(i)})})},acceptRequest(e){return new Promise((s,i)=>{v.post("/api/resources/friend-request-accept",e).then(u=>{var o;this.requests=((o=u.data)==null?void 0:o.receivedRequests)??[],s(!0)}).catch(u=>{u.response.status==401?i(401):i(u)})})},denieRequest(e){return new Promise((s,i)=>{v.post("/api/resources/friend-request-denie",e).then(u=>{var o;this.requests=((o=u.data)==null?void 0:o.receivedRequests)??[],s(!0)}).catch(u=>{u.response.status==401?i(401):i(u)})})}}}),L=K("friends",{state:()=>({friends:[],groups:[]}),getters:{numFriends:e=>e.friends.length??0,numGroups:e=>e.groups.length??0,allFriends:e=>e.friends,allGroups:e=>e.groups,getFriendData:e=>s=>e.friends.find(i=>i.friendId==s)},actions:{loadFriends(){return new Promise((e,s)=>{v.get("/api/resources/friends").then(i=>{var u,o;this.friends=((u=i.data)==null?void 0:u.friends)??[],this.groups=((o=i.data)==null?void 0:o.groups)??[],e(!0)}).catch(i=>{console.log(i),i.response.status==401?s(401):s(i)})})},createGroup(e){return new Promise((s,i)=>{v.post("/api/resources/create-group",e).then(()=>{s(!0)}).catch(u=>{u.response.status==401?i(401):i(u)})})},updateGroup(e){return new Promise((s,i)=>{v.post("/api/resources/update-group",e).then(()=>{s(!0)}).catch(u=>{u.response.status==401?i(401):i(u)})})}}}),ge={props:{friend:{type:Object,default(e){return{friendId:null,friendName:"",friendDescription:"",friendCountry:"",friendCity:"",friendImg:null,reqId:null,reqAcceptedDate:null,sendId:null,sendAcceptedDate:null,messageToFriend:"",messageFromFriend:""}}}},components:{IconUser:H,Modal:B,IconEdit:J},data(){return{showDetails:!1,sending:!1,showRequestModal:!1,requestText:"",editing:!1}},computed:{...S(k,["lg"]),hasFriend(){return this.friend.friendId!=null},isFriend(){return this.friend.reqId&&this.friend.reqAcceptedDate||this.friend.sendId&&this.friend.sendAcceptedDate},isReqGet(){return this.friend.reqId&&!this.friend.reqAcceptedDate},isReqSend(){return this.friend.sendId&&!this.friend.sendAcceptedDate}},methods:{...T(M,["sendRequest","cancelFrienRequest","editFriendRequest"]),...T(U,["acceptRequest","denieRequest"]),modalClose(){this.showDetails=!1},openModal(){this.showDetails=!0},openRequestModal(){this.requestText="",this.showRequestModal=!0,setTimeout(()=>{document.getElementById("request_text_input_field").focus()},300)},sendFriendRequest(){this.editing?(this.showRequestModal=!1,this.sending=!0,this.editFriendRequest({requestId:this.friend.sendId,text:this.requestText.trim()}).then(()=>{this.sending=!1,this.friend.messageToFriend=this.requestText,this.editing=!1,this.showDetails=!0}).catch(e=>{this.sending=!1,this.editing=!1,e==401&&this.$router.push("/login")})):(this.showRequestModal=!1,this.sending=!0,this.sendRequest({friendId:this.friend.friendId,text:this.requestText.trim()}).then(()=>{this.sending=!1,this.$emit("reloadData","SUCCESS",this.lg("frind_request_send"))}).catch(e=>{this.sending=!1,e==401?this.$router.push("/login"):this.$emit("reloadData","ERROR",this.lg("frind_request_send_fail"))}))},acceptFriendRequest(){this.sending=!0,this.acceptRequest({requestId:this.friend.reqId}).then(()=>{this.sending=!1,this.$emit("reloadData","SUCCESS",this.lg("frien_request_accepted"))}).catch(e=>{this.sending=!1,e==401?this.$router.push("/login"):this.$emit("reloadData","ERROR",this.lg("general_error"))})},denieFriendRequest(){this.sending=!0,this.denieRequest({requestId:this.friend.reqId}).then(()=>{this.sending=!1,this.$emit("reloadData","SUCCESS",this.lg("request_denited"))}).catch(e=>{this.sending=!1,e==401?this.$router.push("/login"):this.$emit("reloadData","ERROR",this.lg("general_error"))})},cancelRequest(){this.sending=!0,this.cancelFrienRequest({requestId:this.friend.sendId}).then(()=>{this.sending=!1,this.$emit("reloadData","SUCCESS",this.lg("request_canceled"))}).catch(e=>{this.sending=!1,e==401?this.$router.push("/login"):this.$emit("reloadData","ERROR",this.lg("general_error"))})},editRequestMessage(){this.showDetails=!1,this.editing=!0,this.requestText=this.friend.messageToFriend??"",this.showRequestModal=!0,setTimeout(()=>{document.getElementById("request_text_input_field").focus().select()},300)},sendMessage(){}}},fe={key:0,class:"friend-card"},me={class:"friend-card-img"},_e=["src"],pe={key:1,class:"icon-lg"},be={class:"friend-card-action"},Se=["disabled"],qe={key:1},ve=["disabled"],Re=["disabled"],Ie={key:2},ye=["disabled"],Ce=["disabled"],ke={class:"text-left"},Ge={class:"text-center mt-1 mb-2"},Te=["src"],we={key:1,class:"icon-lg"},Fe={class:"friend-modal-des"},De={class:"text-bold"},Ne={class:"text-bold"},Ee={class:"text-bold"},xe={class:"mb-2"},Me={key:0},Ue={key:0},Le={key:1},ze={class:"mt-2 friend-card-btns"},Pe=["disabled"],Be=["disabled"],Ae={key:1},Ve={key:0},Oe={key:1},He={class:"request-modal-body"},Ke={for:"request_text_input_field"};function Je(e,s,i,u,o,t){const _=g("IconUser"),h=g("IconEdit"),q=g("Modal");return t.hasFriend?(r(),a("div",fe,[n("div",me,[i.friend.friendImg?(r(),a("img",{key:0,src:i.friend.friendImg,alt:"Profile Image",class:"profile-img md"},null,8,_e)):(r(),a("span",pe,[f(_)]))]),n("div",{class:"friend-card-name",onClick:s[0]||(s[0]=(...l)=>t.openModal&&t.openModal(...l))},[n("h5",null,d(i.friend.friendName),1)]),n("div",be,[t.isFriend?(r(),a("button",{key:0,class:"btn-sm btn-primary btn-block",onClick:s[1]||(s[1]=(...l)=>t.sendMessage&&t.sendMessage(...l)),disabled:o.sending},d(o.sending?e.lg("sending"):e.lg("send_message")),9,Se)):t.isReqGet?(r(),a("div",qe,[n("button",{class:"btn-sm btn-primary btn-block",onClick:s[2]||(s[2]=(...l)=>t.acceptFriendRequest&&t.acceptFriendRequest(...l)),disabled:o.sending},d(o.sending?e.lg("sending"):e.lg("accept_request")),9,ve),n("button",{class:"btn-sm btn-danger btn-block",onClick:s[3]||(s[3]=(...l)=>t.denieFriendRequest&&t.denieFriendRequest(...l)),disabled:o.sending},d(o.sending?e.lg("sending"):e.lg("denie_request")),9,Re)])):t.isReqSend?(r(),a("div",Ie,[n("p",null,d(e.lg("already_send")),1),n("button",{class:"btn-sm btn-danger btn-block",onClick:s[4]||(s[4]=(...l)=>t.cancelRequest&&t.cancelRequest(...l)),disabled:o.sending},d(o.sending?e.lg("sending"):e.lg("cancel_request")),9,ye)])):(r(),a("button",{key:3,class:"btn-sm btn-primary btn-block",onClick:s[5]||(s[5]=(...l)=>t.openRequestModal&&t.openRequestModal(...l)),disabled:o.sending},d(o.sending?e.lg("sending"):e.lg("send_request")),9,Ce))]),f(q,{show:o.showDetails,size:"md",title:i.friend.friendName,headerClass:"text-left",showFooter:!1,onClose:t.modalClose},{default:F(()=>[n("div",ke,[n("div",Ge,[i.friend.friendImg?(r(),a("img",{key:0,src:i.friend.friendImg,alt:"Profile Image",class:"profile-img md"},null,8,Te)):(r(),a("span",we,[f(_)]))]),n("div",Fe,[n("p",null,[n("span",De,d(e.lg("city"))+" :",1),p(d(i.friend.friendCity??"????"),1)]),n("p",null,[n("span",Ne,d(e.lg("friend_country"))+" :",1),p(d(i.friend.friendCountry??"????"),1)]),n("p",null,[n("span",Ee,d(e.lg("friend_des"))+" :",1)]),n("p",xe,d(i.friend.friendDescription??"??????"),1),t.isReqGet?(r(),a("div",Me,[n("p",null,d(e.lg("message")),1),i.friend.messageFromFriend?(r(),a("p",Ue,d(i.friend.messageFromFriend),1)):(r(),a("p",Le,d(e.lg("no_message")),1)),n("div",ze,[n("button",{class:"btn btn-primary",onClick:s[6]||(s[6]=(...l)=>t.acceptFriendRequest&&t.acceptFriendRequest(...l)),disabled:o.sending},d(o.sending?e.lg("sending"):e.lg("accept_request")),9,Pe),n("button",{class:"btn btn-danger",onClick:s[7]||(s[7]=(...l)=>t.denieFriendRequest&&t.denieFriendRequest(...l)),disabled:o.sending},d(o.sending?e.lg("sending"):e.lg("denie_request")),9,Be)])])):c("",!0),t.isReqSend?(r(),a("div",Ae,[n("p",null,d(e.lg("you_request_text")),1),i.friend.messageToFriend?(r(),a("p",Ve,[p(d(i.friend.messageToFriend)+" ",1),n("span",{class:"icon-edit-btn ml-1",onClick:s[8]||(s[8]=(...l)=>t.editRequestMessage&&t.editRequestMessage(...l))},[f(h)])])):(r(),a("p",Oe,[p(d(e.lg("no_request_send_text"))+" ",1),n("span",{class:"icon-edit-btn ml-1",onClick:s[9]||(s[9]=(...l)=>t.editRequestMessage&&t.editRequestMessage(...l))},[f(h)])]))])):c("",!0)])])]),_:1},8,["show","title","onClose"]),f(q,{show:o.showRequestModal,size:"sm",title:e.lg("send_request"),headerClass:"text-left",showCancel:!0,cancelBtnText:e.lg("cancel"),okBtnText:e.lg("send"),onClose:s[11]||(s[11]=l=>o.showRequestModal=!1),onCancel:s[12]||(s[12]=l=>o.showRequestModal=!1),onOk:t.sendFriendRequest},{default:F(()=>[n("div",He,[n("p",null,[p(d(e.lg("addresse"))+" ",1),n("span",null,d(i.friend.friendName),1)]),n("label",Ke,d(e.lg("few_words")),1),w(n("textarea",{name:"requestText",id:"request_text_input_field","onUpdate:modelValue":s[10]||(s[10]=l=>o.requestText=l)},null,512),[[P,o.requestText]])])]),_:1},8,["show","title","cancelBtnText","okBtnText","onOk"])])):c("",!0)}const W=b(ge,[["render",Je]]),Qe={components:{IconSearch:Y,FailToast:Q,FriendCard:W},data(){return{submitting:!1,searchText:"",firstSearch:!0,searchResult:[],searchError:!1,paginationIndex:0}},computed:{...S(k,["lg"]),...D(O,z),hasSearchResult(){return this.searchResult.length>0},hasPagination(){return this.searchResult.length>this.paginationSizesStore.topSize},rightPaginationDisabled(){return this.paginationIndex*this.paginationSizesStore.topSize+this.paginationSizesStore.topSize>=this.searchResult.length},cardsToShow(){let e=[];if(!this.hasSearchResult)return e;let s=this.paginationIndex*this.paginationSizesStore.topSize;s>this.searchResult.length-1&&(s=this.searchResult.length-1),this.paginationSizesStore.topSize>=this.searchResult.length&&(s=0);let i=s+this.paginationSizesStore.topSize;i>this.searchResult.length&&(i=this.searchResult.length);for(let u=s;u<i;u++)e.push(this.searchResult[u]);return e}},methods:{searchUsers(){this.searchText.trim()!=""&&(this.firstSearch=!1,this.submitting=!0,this.loadingStore.startLoading(),this.searchError=!1,v.get("/api/resources/search-user?un="+this.searchText.trim()).then(e=>{this.submitting=!1,this.loadingStore.finishLoading(),this.searchResult=e.data.users}).catch(e=>{this.submitting=!1,this.loadingStore.finishLoading(),this.searchError=!0,setTimeout(()=>{this.searchError=!1},3e3),console.log(e)}))},paginateLeft(){this.paginationIndex--},paginateRight(){this.paginationIndex++},reloadData(e,s){this.$emit("reloadData",e,s)}},mounted(){this.submitting=!1,this.searchText="",this.firstSearch=!0,document.getElementById("search_input").focus()}},We={class:"search-menu"},Xe={class:"user-search-input"},Ye={for:"search_input"},Ze={class:"password-container"},$e=["disabled"],je=["disabled"],es={class:"icon"},ss={key:0,class:"search-result-holder"},ts={class:"results"},ns={key:0},is=["disabled"],rs={class:"result-cards"},as={key:1},os=["disabled"],ds={key:1,class:"search-result-no-result-holder"},ls={key:0},us={key:1};function cs(e,s,i,u,o,t){const _=g("IconSearch"),h=g("FriendCard"),q=g("FailToast");return r(),a("div",null,[n("div",We,[n("div",Xe,[n("label",Ye,d(e.lg("user_search")),1),n("div",Ze,[w(n("input",{id:"search_input",type:"text","onUpdate:modelValue":s[0]||(s[0]=l=>o.searchText=l),disabled:o.submitting,onKeypress:s[1]||(s[1]=ee((...l)=>t.searchUsers&&t.searchUsers(...l),["enter"]))},null,40,$e),[[P,o.searchText]]),n("button",{type:"button",onClick:s[2]||(s[2]=(...l)=>t.searchUsers&&t.searchUsers(...l)),disabled:o.submitting},[n("span",es,[f(_)])],8,je)])])]),n("div",null,[t.hasSearchResult?(r(),a("div",ss,[n("p",null,[n("span",null,d(o.searchResult.length),1),s[5]||(s[5]=p()),n("span",null,d(e.lg("results")),1)]),n("div",ts,[t.hasPagination?(r(),a("div",ns,[n("button",{type:"button",disabled:o.paginationIndex==0,class:"pag-btn",onClick:s[3]||(s[3]=(...l)=>t.paginateLeft&&t.paginateLeft(...l))},"<",8,is)])):c("",!0),n("div",rs,[(r(!0),a(y,null,C(t.cardsToShow,l=>(r(),I(h,{key:"friend_"+l.friendId,friend:l,onReloadData:t.reloadData},null,8,["friend","onReloadData"]))),128))]),t.hasPagination?(r(),a("div",as,[n("button",{type:"button",disabled:t.rightPaginationDisabled,class:"pag-btn",onClick:s[4]||(s[4]=(...l)=>t.paginateRight&&t.paginateRight(...l))},">",8,os)])):c("",!0)])])):(r(),a("div",ds,[o.firstSearch?(r(),a("p",ls,d(e.lg("user_search_before")),1)):(r(),a("p",us,d(e.lg("user_search_not_find")),1))]))]),o.searchError?(r(),I(q,{key:0})):c("",!0)])}const hs=b(Qe,[["render",cs]]),gs={components:{FriendCard:W},data(){return{paginationIndex:0}},computed:{...S(k,["lg"]),...S(M,["numSendRequests","sendRequests"]),...D(O),hasPagination(){return this.numSendRequests>this.paginationSizesStore.topSize},rightPaginationDisabled(){return this.paginationIndex*this.paginationSizesStore.topSize+this.paginationSizesStore.topSize>=this.numSendRequests},cardsToShow(){let e=[];if(this.numSendRequests<1)return e;let s=this.paginationIndex*this.paginationSizesStore.topSize;s>this.sendRequests.length-1&&(s=this.sendRequests.length-1),this.paginationSizesStore.topSize>=this.sendRequests.length&&(s=0);let i=s+this.paginationSizesStore.topSize;i>this.sendRequests.length&&(i=this.sendRequests.length);for(let u=s;u<i;u++)e.push(this.sendRequests[u]);return e}},methods:{paginateLeft(){this.paginationIndex--},paginateRight(){this.paginationIndex++},changeTabToSearch(){this.$emit("changeTab")},reloadData(e,s){this.$emit("reloadData",e,s)}}},fs={key:0,class:"search-result-holder"},ms={class:"results"},_s={key:0},ps=["disabled"],bs={class:"result-cards"},Ss={key:1},qs=["disabled"],vs={key:1,class:"text-center m-2"};function Rs(e,s,i,u,o,t){const _=g("FriendCard");return r(),a("div",null,[e.numSendRequests?(r(),a("div",fs,[n("div",ms,[t.hasPagination?(r(),a("div",_s,[n("button",{type:"button",disabled:o.paginationIndex==0,class:"pag-btn",onClick:s[0]||(s[0]=(...h)=>t.paginateLeft&&t.paginateLeft(...h))},"<",8,ps)])):c("",!0),n("div",bs,[(r(!0),a(y,null,C(t.cardsToShow,h=>(r(),I(_,{key:"send__request_"+h.friendId,friend:h,onReloadData:t.reloadData},null,8,["friend","onReloadData"]))),128))]),t.hasPagination?(r(),a("div",Ss,[n("button",{type:"button",disabled:t.rightPaginationDisabled,class:"pag-btn",onClick:s[1]||(s[1]=(...h)=>t.paginateRight&&t.paginateRight(...h))},">",8,qs)])):c("",!0)])])):(r(),a("div",vs,[n("p",null,[p(d(e.lg("not_send_any_request_yet"))+" ",1),n("span",{class:"btn-link",onClick:s[2]||(s[2]=(...h)=>t.changeTabToSearch&&t.changeTabToSearch(...h))},d(e.lg("contact_search")),1)])]))])}const Is=b(gs,[["render",Rs]]),ys={components:{FriendCard:W},data(){return{paginationIndex:0}},computed:{...S(k,["lg"]),...S(U,["numGetRequests","getRequests"]),...D(O),hasPagination(){return this.numGetRequests>this.paginationSizesStore.topSize},rightPaginationDisabled(){return this.paginationIndex*this.paginationSizesStore.topSize+this.paginationSizesStore.topSize>=this.numGetRequests},cardsToShow(){let e=[];if(this.numGetRequests<1)return e;let s=this.paginationIndex*this.paginationSizesStore.topSize;s>this.getRequests.length-1&&(s=this.getRequests.length-1),this.paginationSizesStore.topSize>=this.getRequests.length&&(s=0);let i=s+this.paginationSizesStore.topSize;i>this.getRequests.length&&(i=this.getRequests.length);for(let u=s;u<i;u++)e.push(this.getRequests[u]);return e}},methods:{paginateLeft(){this.paginationIndex--},paginateRight(){this.paginationIndex++},changeTabToSearch(){this.$emit("changeTab")},reloadData(e,s){this.$emit("reloadData",e,s)}}},Cs={key:0,class:"search-result-holder"},ks={class:"results"},Gs={key:0},Ts=["disabled"],ws={class:"result-cards"},Fs={key:1},Ds=["disabled"],Ns={key:1,class:"text-center m-2"};function Es(e,s,i,u,o,t){const _=g("FriendCard");return r(),a("div",null,[e.numGetRequests?(r(),a("div",Cs,[n("div",ks,[t.hasPagination?(r(),a("div",Gs,[n("button",{type:"button",disabled:o.paginationIndex==0,class:"pag-btn",onClick:s[0]||(s[0]=(...h)=>t.paginateLeft&&t.paginateLeft(...h))},"<",8,Ts)])):c("",!0),n("div",ws,[(r(!0),a(y,null,C(t.cardsToShow,h=>(r(),I(_,{key:"send__request_"+h.friendId,friend:h,onReloadData:t.reloadData},null,8,["friend","onReloadData"]))),128))]),t.hasPagination?(r(),a("div",Fs,[n("button",{type:"button",disabled:t.rightPaginationDisabled,class:"pag-btn",onClick:s[1]||(s[1]=(...h)=>t.paginateRight&&t.paginateRight(...h))},">",8,Ds)])):c("",!0)])])):(r(),a("div",Ns,[n("p",null,[p(d(e.lg("not_send_any_request_yet"))+" ",1),n("span",{class:"btn-link",onClick:s[2]||(s[2]=(...h)=>t.changeTabToSearch&&t.changeTabToSearch(...h))},d(e.lg("contact_search")),1)])]))])}const xs=b(ys,[["render",Es]]),Ms={components:{IconUser:H,IconSearch:Y,IconLeft:de,IconRight:he,SearchContactTab:hs,SendRequestsTab:Is,GetRequestsTab:xs,SuccessToast:X,FailToast:Q},data(){return{selectedTab:"GET",saveSuccess:!1,saveError:!1,toastMessage:""}},computed:{...D(z),...S(k,["lg"]),...S(M,{numSendRequests:"numSendRequests",isSendStoreLoaded:"isLoaded"}),...S(U,{numGetRequests:"numGetRequests",isGetStoreLoaded:"isLoaded"})},methods:{...T(M,{loadSendRequests:"loadRequests"}),...T(U,{loadGetRequests:"loadRequests"}),...T(L,{loadFriends:"loadFriends"}),selectTab(e){e==this.selectedTab?this.selectedTab="NONE":this.selectedTab=e},loadStores(e="NONE",s=""){let i=[];this.isSendStoreLoaded||i.push(this.loadSendRequests()),this.isGetStoreLoaded||i.push(this.loadGetRequests()),i.push(this.loadFriends()),this.loadingStore.startLoading(),Promise.all(i).then(()=>{this.loadingStore.finishLoading(),this.numGetRequests>0?this.selectedTab="GET":this.selectedTab="NONE",e!=="NONE"&&(e==="SUCCESS"&&(this.toastMessage=s,this.saveSuccess=!0,setTimeout(()=>{this.saveSuccess=!1,this.toastMessage=""},3e3)),e==="ERROR"&&(this.toastMessage=s,this.saveError=!0,setTimeout(()=>{this.saveError=!1,this.toastMessage=""},3e3)))}).catch(u=>{this.loadingStore.finishLoading(),u==401?this.$router.push("/login"):(this.toastMessage=this.lg("general_error"),this.saveError=!0,setTimeout(()=>{this.saveError=!1,this.toastMessage=""},3e3))})}},mounted(){this.loadStores()}},Us={class:"contact-tabs"},Ls={class:"tab"},zs={class:"icon"},Ps={class:"icon"},Bs={class:"tab-text"},As={class:"icon"},Vs={class:"icon"},Os={class:"tab-text"},Hs={key:0,class:"tab-num"},Ks={class:"icon"},Js={class:"icon"},Qs={class:"tab-text"},Ws={key:0,class:"tab-num"},Xs={key:0,class:"tab-content"},Ys={key:0},Zs={key:1},$s={key:2};function js(e,s,i,u,o,t){const _=g("IconUser"),h=g("IconSearch"),q=g("IconLeft"),l=g("IconRight"),R=g("SearchContactTab"),E=g("GetRequestsTab"),A=g("SendRequestsTab"),m=g("SuccessToast"),G=g("FailToast");return r(),a("div",Us,[n("div",Ls,[n("span",{class:N(["tab-menu",{"active-tab":o.selectedTab=="SEARCH"}]),onClick:s[0]||(s[0]=x=>t.selectTab("SEARCH"))},[n("span",zs,[f(_)]),n("span",Ps,[f(h)]),n("span",Bs,d(e.lg("contact_search")),1)],2),n("span",{class:N(["tab-menu",{"active-tab":o.selectedTab=="GET"}]),onClick:s[1]||(s[1]=x=>t.selectTab("GET"))},[n("span",As,[f(_)]),n("span",Vs,[f(q)]),n("span",Os,d(e.lg("friend_requests")),1),e.numGetRequests?(r(),a("sup",Hs,d(e.numGetRequests),1)):c("",!0)],2),n("span",{class:N(["tab-menu",{"active-tab":o.selectedTab=="SEND"}]),onClick:s[2]||(s[2]=x=>t.selectTab("SEND"))},[n("span",Ks,[f(_)]),n("span",Js,[f(l)]),n("span",Qs,d(e.lg("send_requests")),1),e.numSendRequests?(r(),a("sup",Ws,d(e.numSendRequests),1)):c("",!0)],2)]),o.selectedTab!="NONE"?(r(),a("div",Xs,[o.selectedTab=="SEARCH"?(r(),a("div",Ys,[f(R,{onReloadData:t.loadStores},null,8,["onReloadData"])])):c("",!0),o.selectedTab=="GET"?(r(),a("div",Zs,[f(E,{onChangeTab:s[3]||(s[3]=x=>t.selectTab("SEARCH")),onReloadData:t.loadStores},null,8,["onReloadData"])])):c("",!0),o.selectedTab=="SEND"?(r(),a("div",$s,[f(A,{onChangeTab:s[4]||(s[4]=x=>t.selectTab("SEARCH")),onReloadData:t.loadStores},null,8,["onReloadData"])])):c("",!0)])):c("",!0),o.saveSuccess?(r(),I(m,{key:1,msg:o.toastMessage},null,8,["msg"])):c("",!0),o.saveError?(r(),I(G,{key:2,msg:o.toastMessage},null,8,["msg"])):c("",!0)])}const et=b(Ms,[["render",js]]),st={props:{friends:Array},computed:{friendInitiative(){return e=>{let s=e.split(" "),i="";return s.forEach(u=>{u&&(i+=u.charAt(0))}),i?i.toUpperCase():"F"}}}},tt={class:"friend-img"},nt={key:0},it={key:1},rt=["src"],at={key:1,class:"profile-init"},ot={key:2},dt=["src"],lt={key:1,class:"profile-init"},ut=["src"],ct={key:3,class:"profile-init"},ht={key:3},gt=["src"],ft={key:1,class:"profile-init"},mt=["src"],_t={key:3,class:"profile-init"},pt=["src"],bt={key:5,class:"profile-init"},St={key:6};function qt(e,s,i,u,o,t){return r(),a("div",tt,[i.friends.length<1?(r(),a("span",nt,s[0]||(s[0]=[n("span",null,"?",-1)]))):i.friends.length==1?(r(),a("span",it,[i.friends[0].friendImg?(r(),a("img",{key:0,src:i.friends[0].friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,rt)):(r(),a("span",at,d(t.friendInitiative(i.friends[0].friendName)),1))])):i.friends.length==2?(r(),a("span",ot,[i.friends[0].friendImg?(r(),a("img",{key:0,src:i.friends[0].friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,dt)):(r(),a("span",lt,d(t.friendInitiative(i.friends[0].friendName)),1)),i.friends[1].friendImg?(r(),a("img",{key:2,src:i.friends[1].friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,ut)):(r(),a("span",ct,d(t.friendInitiative(i.friends[1].friendName)),1))])):(r(),a("span",ht,[i.friends[0].friendImg?(r(),a("img",{key:0,src:i.friends[0].friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,gt)):(r(),a("span",ft,d(t.friendInitiative(i.friends[0].friendName)),1)),i.friends[1].friendImg?(r(),a("img",{key:2,src:i.friends[1].friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,mt)):(r(),a("span",_t,d(t.friendInitiative(i.friends[1].friendName)),1)),i.friends[2].friendImg?(r(),a("img",{key:4,src:i.friends[2].friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,pt)):(r(),a("span",bt,d(t.friendInitiative(i.friends[2].friendName)),1)),i.friends.length>3?(r(),a("b",St," + "+d(i.friends.length-3),1)):c("",!0)]))])}const Z=b(st,[["render",qt]]),vt={components:{Modal:B,IconUser:H,IconIdCard:se},props:["friendGroup"],data(){return{paginationIndex:0,isListView:!0}},computed:{...S(k,["lg"]),showModal(){return!!this.friendGroup},modalTitle(){var e;return((e=this.friendGroup)==null?void 0:e.groupName)??""},groupCreatedDate(){var e;return((e=this.friendGroup)==null?void 0:e.groupCreated)??""},hasUsers(){var e,s;return((s=(e=this.friendGroup)==null?void 0:e.groupUsers)==null?void 0:s.length)>0},onlyOneUser(){var e,s;return((s=(e=this.friendGroup)==null?void 0:e.groupUsers)==null?void 0:s.length)==1},getUserData(){var e,s;return this.hasUsers&&this.paginationIndex<((s=(e=this.friendGroup)==null?void 0:e.groupUsers)==null?void 0:s.length)?this.friendGroup.groupUsers[this.paginationIndex]:{friendCity:null,friendCountry:null,friendDescription:null,friendImg:null,friendName:null}},friendInitiative(){return e=>{let s=e.split(" "),i="";return s.forEach(u=>{u&&(i+=u.charAt(0))}),i?i.toUpperCase():"F"}},paginationLength(){var e,s;return(s=(e=this.friendGroup)==null?void 0:e.groupUsers)!=null&&s.length?this.friendGroup.groupUsers.length-1:0}},methods:{modalClose(){this.paginationIndex=0,this.isListView=!0,this.$emit("closeDetails")},toogleTabView(){this.paginationIndex=0,this.isListView=!this.isListView},paginateLeft(){this.paginationIndex<1||this.paginationIndex--},paginatRight(){this.paginationIndex>=this.paginationLength||this.paginationIndex++},viewDetails(e){this.paginationIndex=e,this.isListView=!1}}},Rt={class:"text-left"},It={key:0},yt={key:0},Ct={class:"mt-1 mb-2"},kt=["src"],Gt={key:1,class:"profile-init-lg"},Tt={class:"friend-modal-des"},wt={class:"text-bold"},Ft={class:"text-bold"},Dt={class:"text-bold"},Nt={class:"text-bold"},Et={class:"mb-2"},xt={key:1,class:"contact-tabs left-tabs mt-1"},Mt={class:"tab"},Ut={class:"icon"},Lt={class:"icon"},zt={class:"tab-content"},Pt={key:0},Bt={class:"friend-img"},At=["src"],Vt={key:1,class:"profile-init"},Ot=["onClick"],Ht={key:1},Kt={class:"mt-1 mb-2"},Jt=["src"],Qt={key:1,class:"profile-init-lg"},Wt={class:"friend-modal-des"},Xt={class:"text-bold"},Yt={class:"text-bold"},Zt={class:"text-bold"},$t={class:"text-bold"},jt={class:"mb-2"},en={class:"text-center"};function sn(e,s,i,u,o,t){const _=g("IconIdCard"),h=g("IconUser"),q=g("Modal");return r(),a("div",null,[f(q,{show:t.showModal,size:"md",title:t.modalTitle,headerClass:"text-left",showFooter:!1,onClose:t.modalClose},{default:F(()=>[n("div",Rt,[n("p",null,[n("small",null,[n("b",null,d(e.lg("group_created_date"))+":",1),p(" "+d(t.groupCreatedDate),1)])]),t.hasUsers?(r(),a("div",It,[t.onlyOneUser?(r(),a("div",yt,[n("div",Ct,[t.getUserData.friendImg?(r(),a("img",{key:0,src:t.getUserData.friendImg,alt:"Profile Image",class:"profile-img md"},null,8,kt)):(r(),a("span",Gt,d(t.friendInitiative(t.getUserData.friendName)),1))]),n("div",Tt,[n("p",null,[n("span",wt,d(e.lg("friend_name"))+" :",1),p(d(t.getUserData.friendName??"????"),1)]),n("p",null,[n("span",Ft,d(e.lg("city"))+" :",1),p(d(t.getUserData.friendCity??"????"),1)]),n("p",null,[n("span",Dt,d(e.lg("friend_country"))+" :",1),p(d(t.getUserData.friendCountry??"????"),1)]),n("p",null,[n("span",Nt,d(e.lg("friend_des"))+" :",1)]),n("p",Et,d(t.getUserData.friendDescription??"??????"),1)])])):(r(),a("div",xt,[n("div",Mt,[n("span",{class:N(["tab-menu",{"active-tab":o.isListView}]),onClick:s[0]||(s[0]=l=>t.toogleTabView())},[n("span",Ut,[f(_)])],2),n("span",{class:N(["tab-menu",{"active-tab":!o.isListView}]),onClick:s[1]||(s[1]=l=>t.toogleTabView())},[n("span",Lt,[f(h)])],2)]),n("div",zt,[o.isListView?(r(),a("div",Pt,[n("ul",null,[(r(!0),a(y,null,C(i.friendGroup.groupUsers,(l,R)=>(r(),a("li",{key:"friend_list_"+R,class:"mb-1"},[n("p",null,[n("span",Bt,[l.friendImg?(r(),a("img",{key:0,src:l.friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,At)):(r(),a("span",Vt,d(t.friendInitiative(l.friendName)),1))]),s[4]||(s[4]=p()),n("span",{onClick:E=>t.viewDetails(R),class:"btn-link-no-underline text-bold font-lg"},d(l.friendName),9,Ot)])]))),128))])])):(r(),a("div",Ht,[n("div",Kt,[t.getUserData.friendImg?(r(),a("img",{key:0,src:t.getUserData.friendImg,alt:"Profile Image",class:"profile-img md"},null,8,Jt)):(r(),a("span",Qt,d(t.friendInitiative(t.getUserData.friendName)),1))]),n("div",Wt,[n("p",null,[n("span",Xt,d(e.lg("friend_name"))+" :",1),p(d(t.getUserData.friendName??"????"),1)]),n("p",null,[n("span",Yt,d(e.lg("city"))+" :",1),p(d(t.getUserData.friendCity??"????"),1)]),n("p",null,[n("span",Zt,d(e.lg("friend_country"))+" :",1),p(d(t.getUserData.friendCountry??"????"),1)]),n("p",null,[n("span",$t,d(e.lg("friend_des"))+" :",1)]),n("p",jt,d(t.getUserData.friendDescription??"??????"),1)]),n("div",en,[o.paginationIndex>0?(r(),a("button",{key:0,type:"button",class:"btn pag-btn",onClick:s[2]||(s[2]=(...l)=>t.paginateLeft&&t.paginateLeft(...l))},"<")):c("",!0),o.paginationIndex<t.paginationLength?(r(),a("button",{key:1,type:"button",class:"btn pag-btn",onClick:s[3]||(s[3]=(...l)=>t.paginatRight&&t.paginatRight(...l))},">")):c("",!0)])]))])]))])):c("",!0)])]),_:1},8,["show","title","onClose"])])}const tn=b(vt,[["render",sn]]),nn={components:{Modal:B,IconEdit:J,ContactImage:Z},props:["friendGroup","allFriends"],data(){return{editGroupName:"",editName:!1,missingGroupName:!1,selectedFriendsForDeleteFromGroup:[],selectedFriendsToAddGroup:[]}},computed:{...D(z),...S(k,["lg"]),showModal(){return!!this.friendGroup},modalTitle(){var e;return((e=this.friendGroup)==null?void 0:e.groupName)??""},hasUsers(){var e,s;return((s=(e=this.friendGroup)==null?void 0:e.groupUsers)==null?void 0:s.length)>0},removeGroup(){var e,s;return this.selectedFriendsForDeleteFromGroup.length==((s=(e=this.friendGroup)==null?void 0:e.groupUsers)==null?void 0:s.length)&&this.selectedFriendsToAddGroup.length==0},showSaveBtn(){return this.selectedFriendsForDeleteFromGroup.length>0||this.selectedFriendsToAddGroup.length>0||this.editName&&this.editGroupName!=this.modalTitle}},methods:{...T(L,["updateGroup","loadFriends"]),modalClose(e=!1){this.editGroupName="",this.editName=!1,this.selectedFriendsForDeleteFromGroup=[],this.selectedFriendsToAddGroup=[],this.$emit("closeEditDetails",e)},startNameEdit(){this.editGroupName=this.modalTitle,this.missingGroupName=!1,this.editName=!0,setTimeout(()=>{document.getElementById("edit_group_name").focus()},300)},cancelNameEdit(){this.editGroupName="",this.editName=!1,this.missingGroupName=!1},clearNameError(){this.missingGroupName=!1},canAddToGroup(e){var s;return(s=this.friendGroup)!=null&&s.groupUsers?!this.friendGroup.groupUsers.find(u=>u.friendId==e):!0},saveChanges(e=!1){if(!this.showSaveBtn)return;if(this.editName&&this.editGroupName.trim()==""&&!e){this.missingGroupName=!0,document.getElementById("edit_group_name").focus();return}this.loadingStore.startLoading();//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
let s={groupId:this.friendGroup.groupId};this.updateGroup(s).then(()=>{this.loadFriends(),this.loadingStore.finishLoading(),this.modalClose("SUC")}).catch(i=>{this.loadingStore.finishLoading(),i==401?this.$router.push("/login"):this.modalClose("ER")})}}},rn={class:"text-left"},an={key:0},on={key:0},dn={for:"edit_group_name"},ln={key:0,class:"text-danger"},un={class:"text-right mt-1"},cn={key:1},hn={class:"text-bold"},gn=["id","value"],fn=["for"],mn={key:0},_n={key:2},pn={class:"text-bold"},bn={key:0,class:"friend-checkbox green-check"},Sn=["id","value"],qn=["for"],vn={key:0},Rn={class:"text-center mt-2"};function In(e,s,i,u,o,t){const _=g("IconEdit"),h=g("ContactImage"),q=g("Modal");return r(),a("div",null,[f(q,{show:t.showModal,size:"md",title:t.modalTitle,headerClass:"text-left",showFooter:!1,onClose:t.modalClose},{default:F(()=>[n("div",rn,[t.hasUsers?(r(),a("div",an,[o.editName?(r(),a("div",on,[n("label",dn,d(e.lg("group_new_name_lbl")),1),w(n("input",{type:"text",id:"edit_group_name",onInput:s[0]||(s[0]=(...l)=>t.clearNameError&&t.clearNameError(...l)),"onUpdate:modelValue":s[1]||(s[1]=l=>o.editGroupName=l)},null,544),[[P,o.editGroupName]]),o.missingGroupName?(r(),a("p",ln,d(e.lg("group_new_name_missing")),1)):c("",!0),n("div",un,[n("button",{type:"button",class:"btn-sm btn-secondary ml-1",onClick:s[2]||(s[2]=(...l)=>t.cancelNameEdit&&t.cancelNameEdit(...l))},d(e.lg("cancel")),1)])])):(r(),a("div",cn,[n("h4",null,[p(d(t.modalTitle)+" ",1),n("span",{class:"icon-edit-btn mr-1",onClick:s[3]||(s[3]=(...l)=>t.startNameEdit&&t.startNameEdit(...l))},[f(_)])])])),s[9]||(s[9]=n("hr",{class:"mt-2 mb-2"},null,-1)),n("div",null,[n("p",hn,d(e.lg("friends_in_group")),1),(r(!0),a(y,null,C(i.friendGroup.groupUsers,l=>(r(),a("div",{key:"existing_friends_"+l.friendId,class:"friend-checkbox danger-check"},[w(n("input",{type:"checkbox",id:"existing_friends_"+l.friendId,value:l.friendId,"onUpdate:modelValue":s[4]||(s[4]=R=>o.selectedFriendsForDeleteFromGroup=R)},null,8,gn),[[V,o.selectedFriendsForDeleteFromGroup]]),n("label",{for:"existing_friends_"+l.friendId},[f(h,{friends:[l]},null,8,["friends"]),p(" "+d(l.friendName)+" ",1),l.friendCity?(r(),a("span",mn,"( "+d(l.friendCity)+" )",1)):c("",!0)],8,fn)]))),128))]),s[10]||(s[10]=n("hr",{class:"mt-2 mb-2"},null,-1)),i.allFriends?(r(),a("div",_n,[n("p",pn,d(e.lg("friends_outside_group")),1),(r(!0),a(y,null,C(i.allFriends,l=>(r(),a("div",{key:"all_friends_"+l.friendId},[t.canAddToGroup(l.friendId)?(r(),a("div",bn,[w(n("input",{type:"checkbox",id:"all_friends_"+l.friendId,value:l.friendId,"onUpdate:modelValue":s[5]||(s[5]=R=>o.selectedFriendsToAddGroup=R)},null,8,Sn),[[V,o.selectedFriendsToAddGroup]]),n("label",{for:"all_friends_"+l.friendId},[f(h,{friends:[l]},null,8,["friends"]),p(" "+d(l.friendName)+" ",1),l.friendCity?(r(),a("span",vn,"( "+d(l.friendCity)+" )",1)):c("",!0)],8,qn)])):c("",!0)]))),128))])):c("",!0),n("div",Rn,[n("button",{type:"button",class:"btn btn-secondary",onClick:s[6]||(s[6]=(...l)=>t.modalClose&&t.modalClose(...l))},d(e.lg("cancel")),1),t.showSaveBtn&&!t.removeGroup?(r(),a("button",{key:0,type:"button",class:"btn btn-primary ml-1",onClick:s[7]||(s[7]=(...l)=>t.saveChanges&&t.saveChanges(...l))},d(e.lg("save")),1)):c("",!0),t.showSaveBtn&&t.removeGroup?(r(),a("button",{key:1,type:"button",class:"btn btn-danger ml-1",onClick:s[8]||(s[8]=l=>t.saveChanges(!0))},d(e.lg("delete_group")),1)):c("",!0)])])):c("",!0)])]),_:1},8,["show","title","onClose"])])}const yn=b(nn,[["render",In]]),Cn={components:{Modal:B,ContactImage:Z,SuccessToast:X,FailToast:Q,IconEdit:J,ContactGroupDetailModal:tn,EditContactModal:yn},data(){return{showCreateGroupModal:!1,saveError:!1,saveSuccess:!1,newGroupName:"",missingGroupName:!1,selectedFriendsForNewGroup:[],noFriendSelected:!1,groupDetail:null,groupEdit:null}},computed:{...D($,z),...S(L,{numFriends:"numFriends",friends:"allFriends",groups:"allGroups",numGroups:"numGroups",friendData:"getFriendData"}),...S(k,["lg"]),groupCards(){let e=[];return this.groups.forEach(s=>{let i={groupId:s.id,groupName:s.group_name,groupCreated:s.created_at,owner:s.main_user==this.userStore.id,groupUsers:[]};s.users.forEach(u=>{if(u!==this.userStore.id){let o=this.friendData(u);o&&i.groupUsers.push(o)}}),e.push(i)}),e}},methods:{...T(L,["createGroup","loadFriends"]),createGroupModalOpen(){this.newGroupName="",this.missingGroupName=!1,this.selectedFriendsForNewGroup=[],this.noFriendSelected=!1,this.showCreateGroupModal=!0,setTimeout(()=>{document.getElementById("new_group_name").focus()},500)},createGroupModalClose(){this.showCreateGroupModal=!1},clearNameError(){this.missingGroupName=!1},checkBoxChange(){this.noFriendSelected=!1},validateAndCreateGroup(){this.newGroupName.trim()==""&&(this.missingGroupName=!0,document.getElementById("new_group_name").focus()),this.selectedFriendsForNewGroup.length<1&&(this.noFriendSelected=!0),!(this.missingGroupName||this.noFriendSelected)&&(this.saveSuccess=!1,this.loadingStore.startLoading(),this.createGroup({groupName:this.newGroupName.trim(),friends:this.selectedFriendsForNewGroup}).then(()=>{this.loadFriends(),this.loadingStore.finishLoading(),this.createGroupModalClose(),this.saveSuccess=!0,setTimeout(()=>{this.saveSuccess=!1},3e3)}).catch(e=>{this.loadingStore.finishLoading(),this.createGroupModalClose(),e==401?this.$router.push("/login"):(this.saveError=!0,setTimeout(()=>{this.saveError=!1},3e3))}))},showGroupDetail(e){this.groupDetail=e},hideGroupDetail(){this.groupDetail=null},showGroupEdit(e){console.log(e),this.groupEdit=e},hideGroupEdit(e){this.groupEdit=null,e&&(e=="SUC"&&(this.saveSuccess=!0,setTimeout(()=>{this.saveSuccess=!1},3e3)),e=="ER"&&(this.saveError=!0,setTimeout(()=>{this.saveError=!1},3e3)))}}},kn={class:"friend-list-container"},Gn={class:"friend-actions"},Tn={class:"contact-total"},wn={class:"friend-list"},Fn={class:"friend-data"},Dn=["onClick"],Nn=["onClick"],En={class:"btn-sm btn-primary"},xn={for:"new_group_name"},Mn={key:0,class:"text-danger"},Un={class:"contact-total"},Ln=["id","value"],zn=["for"],Pn={key:0},Bn={key:0,class:"text-danger"},An={class:"mt-2"};function Vn(e,s,i,u,o,t){const _=g("ContactImage"),h=g("IconEdit"),q=g("Modal"),l=g("ContactGroupDetailModal"),R=g("EditContactModal"),E=g("SuccessToast"),A=g("FailToast");return r(),a("div",kn,[n("div",Gn,[n("p",Tn,d(e.lg("friends_and_groups_count"))+" : "+d(e.numGroups),1),n("button",{class:"btn-sm btn-secondary",onClick:s[0]||(s[0]=(...m)=>t.createGroupModalOpen&&t.createGroupModalOpen(...m))},d(e.lg("create_group")),1)]),n("div",wn,[(r(!0),a(y,null,C(t.groupCards,m=>(r(),a("div",{key:m.groupId,class:"friend-wrapper mb-1"},[n("div",Fn,[f(_,{friends:m.groupUsers},null,8,["friends"]),n("div",null,[n("h5",{onClick:G=>t.showGroupDetail(m)},d(m.groupName),9,Dn)])]),n("div",null,[m.owner?(r(),a("span",{key:0,class:"icon-edit-btn mr-1",onClick:G=>t.showGroupEdit(m)},[f(h)],8,Nn)):c("",!0),n("button",En,d(e.lg("send_message")),1)])]))),128))]),f(q,{show:o.showCreateGroupModal,size:"lg",title:e.lg("create_group"),showFooter:!1,onClose:t.createGroupModalClose},{default:F(()=>[n("div",null,[n("div",null,[n("label",xn,d(e.lg("new_group_name_lbl")),1),w(n("input",{type:"text",id:"new_group_name",onInput:s[1]||(s[1]=(...m)=>t.clearNameError&&t.clearNameError(...m)),"onUpdate:modelValue":s[2]||(s[2]=m=>o.newGroupName=m)},null,544),[[P,o.newGroupName]]),o.missingGroupName?(r(),a("p",Mn,d(e.lg("new_group_name_missing")),1)):c("",!0)]),s[6]||(s[6]=n("hr",{class:"mt-2"},null,-1)),n("div",null,[n("p",Un,d(e.lg("friends_count"))+" : "+d(e.numFriends),1),(r(!0),a(y,null,C(e.friends,m=>(r(),a("div",{key:"friends_"+m.friendId,class:"friend-checkbox"},[w(n("input",{type:"checkbox",id:"friend_"+m.friendId,value:m.friendId,onChange:s[3]||(s[3]=(...G)=>t.checkBoxChange&&t.checkBoxChange(...G)),"onUpdate:modelValue":s[4]||(s[4]=G=>o.selectedFriendsForNewGroup=G)},null,40,Ln),[[V,o.selectedFriendsForNewGroup]]),n("label",{for:"friend_"+m.friendId},[f(_,{friends:[m]},null,8,["friends"]),p(" "+d(m.friendName)+" ",1),m.friendCity?(r(),a("span",Pn,"( "+d(m.friendCity)+" )",1)):c("",!0)],8,zn)]))),128)),o.noFriendSelected?(r(),a("p",Bn,d(e.lg("no_friend_selected")),1)):c("",!0)]),n("div",An,[n("button",{class:"btn btn-primary",onClick:s[5]||(s[5]=(...m)=>t.validateAndCreateGroup&&t.validateAndCreateGroup(...m))},d(e.lg("create_group")),1)])])]),_:1},8,["show","title","onClose"]),f(l,{friendGroup:o.groupDetail,onCloseDetails:t.hideGroupDetail},null,8,["friendGroup","onCloseDetails"]),f(R,{friendGroup:o.groupEdit,allFriends:e.friends,onCloseEditDetails:t.hideGroupEdit},null,8,["friendGroup","allFriends","onCloseEditDetails"]),o.saveSuccess?(r(),I(E,{key:0})):c("",!0),o.saveError?(r(),I(A,{key:1})):c("",!0)])}const On=b(Cn,[["render",Vn]]),Hn={components:{ContactTabs:et,Contacts:On}},Kn={class:"mt-2"};function Jn(e,s,i,u,o,t){const _=g("ContactTabs"),h=g("Contacts");return r(),a("div",null,[n("div",null,[f(_)]),n("div",Kn,[f(h)])])}const Qn=b(Hn,[["render",Jn]]),Wn={components:{BaseLayout:j,Home:Qn},props:["socket"]};function Xn(e,s,i,u,o,t){const _=g("Home"),h=g("BaseLayout");return r(),I(h,null,{default:F(()=>[f(_)]),_:1})}const ei=b(Wn,[["render",Xn]]);export{ei as default};
