import{l as G,p as z,B as J}from"./BaseLayout-auzj6oC9.js";import{I as x}from"./IconUser-C2jlynSh.js";import{_ as p,x as r,g as o,h as t,d as M,f as q,e as m,z as v,u as T,i as g,t as l,w as E,k as R,o as f,l as P,v as N,s as h,m as C,A as Q,F as w,B as F,q as b,n as D}from"./index-BlKDyXGW.js";import{M as W,I as X,F as B,S as Y}from"./SuccessToast-D8TpD-ht.js";const Z={},j={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function ee(e,s){return r(),o("svg",j,s[0]||(s[0]=[t("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"},null,-1)]))}const U=p(Z,[["render",ee]]),se={},te={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function ne(e,s){return r(),o("svg",te,s[0]||(s[0]=[t("path",{d:"M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"},null,-1)]))}const ie=p(se,[["render",ne]]),ae={},re={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"};function de(e,s){return r(),o("svg",re,s[0]||(s[0]=[t("path",{d:"M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"},null,-1)]))}const oe=p(ae,[["render",de]]),I=M("requestSend",{state:()=>({loaded:!1,requests:[]}),getters:{numSendRequests:e=>e.requests.length??0,isLoaded:e=>e.loaded,sendRequests:e=>e.requests},actions:{loadRequests(){return new Promise((e,s)=>{q.get("/api/resources/sended-friend-requests").then(i=>{var d;this.requests=((d=i.data)==null?void 0:d.sendedRequests)??[],this.loaded=!0,e(!0)}).catch(i=>{i.response.status==401?s(401):s(i)})})},sendRequest(e){return new Promise((s,i)=>{q.post("/api/resources/friend-request-send",e).then(d=>{var a;this.requests=((a=d.data)==null?void 0:a.sendedRequests)??[],s(!0)}).catch(d=>{d.response.status==401?i(401):i(d)})})},cancelFrienRequest(e){return new Promise((s,i)=>{q.post("/api/resources/friend-request-delete",e).then(d=>{var a;this.requests=((a=d.data)==null?void 0:a.sendedRequests)??[],s(!0)}).catch(d=>{d.response.status==401?i(401):i(d)})})},editFriendRequest(e){return new Promise((s,i)=>{q.post("/api/resources/friend-request-edit",e).then(d=>{var a;this.requests=((a=d.data)==null?void 0:a.sendedRequests)??[],s(!0)}).catch(d=>{d.response.status==401?i(401):i(d)})})}}}),y=M("requestGet",{state:()=>({loaded:!1,requests:[]}),getters:{numGetRequests:e=>e.requests.length??0,isLoaded:e=>e.loaded,getRequests:e=>e.requests},actions:{loadRequests(){return new Promise((e,s)=>{q.get("/api/resources/received-friend-requests").then(i=>{var d;this.requests=((d=i.data)==null?void 0:d.receivedRequests)??[],this.loaded=!0,e(!0)}).catch(i=>{i.response.status==401?s(401):s(i)})})},acceptRequest(e){return new Promise((s,i)=>{q.post("/api/resources/friend-request-accept",e).then(d=>{var a;this.requests=((a=d.data)==null?void 0:a.receivedRequests)??[],s(!0)}).catch(d=>{d.response.status==401?i(401):i(d)})})},denieRequest(e){return new Promise((s,i)=>{q.post("/api/resources/friend-request-denie",e).then(d=>{var a;this.requests=((a=d.data)==null?void 0:a.receivedRequests)??[],s(!0)}).catch(d=>{d.response.status==401?i(401):i(d)})})}}}),A=M("friends",{state:()=>({friends:[],groups:[]}),getters:{numFriends:e=>e.friends.length??0,allFriends:e=>e.friends},actions:{loadFriends(){return new Promise((e,s)=>{q.get("/api/resources/friends").then(i=>{var d,a;this.friends=((d=i.data)==null?void 0:d.friends)??[],this.groups=((a=i.data)==null?void 0:a.groups)??[],console.log(this.groups),e(!0)}).catch(i=>{console.log(i),i.response.status==401?s(401):s(i)})})}}}),le={props:{friend:{type:Object,default(e){return{friendId:null,friendName:"",friendDescription:"",friendCountry:"",friendCity:"",friendImg:null,reqId:null,reqAcceptedDate:null,sendId:null,sendAcceptedDate:null,messageToFriend:"",messageFromFriend:""}}}},components:{IconUser:x,Modal:W,IconEdit:X},data(){return{showDetails:!1,sending:!1,showRequestModal:!1,requestText:"",editing:!1}},computed:{...m(T,["lg"]),hasFriend(){return this.friend.friendId!=null},isFriend(){return this.friend.reqId&&this.friend.reqAcceptedDate||this.friend.sendId&&this.friend.sendAcceptedDate},isReqGet(){return this.friend.reqId&&!this.friend.reqAcceptedDate},isReqSend(){return this.friend.sendId&&!this.friend.sendAcceptedDate}},methods:{...v(I,["sendRequest","cancelFrienRequest","editFriendRequest"]),...v(y,["acceptRequest","denieRequest"]),modalClose(){this.showDetails=!1},openModal(){this.showDetails=!0},openRequestModal(){this.requestText="",this.showRequestModal=!0,setTimeout(()=>{document.getElementById("request_text_input_field").focus()},300)},sendFriendRequest(){this.editing?(this.showRequestModal=!1,this.sending=!0,this.editFriendRequest({requestId:this.friend.sendId,text:this.requestText.trim()}).then(()=>{this.sending=!1,this.friend.messageToFriend=this.requestText,this.editing=!1,this.showDetails=!0}).catch(e=>{this.sending=!1,this.editing=!1,e==401&&this.$router.push("/login")})):(this.showRequestModal=!1,this.sending=!0,this.sendRequest({friendId:this.friend.friendId,text:this.requestText.trim()}).then(()=>{this.sending=!1,this.$emit("reloadData","SUCCESS",this.lg("frind_request_send"))}).catch(e=>{this.sending=!1,e==401?this.$router.push("/login"):this.$emit("reloadData","ERROR",this.lg("frind_request_send_fail"))}))},acceptFriendRequest(){this.sending=!0,this.acceptRequest({requestId:this.friend.reqId}).then(()=>{this.sending=!1,this.$emit("reloadData","SUCCESS",this.lg("frien_request_accepted"))}).catch(e=>{this.sending=!1,e==401?this.$router.push("/login"):this.$emit("reloadData","ERROR",this.lg("general_error"))})},denieFriendRequest(){this.sending=!0,this.denieRequest({requestId:this.friend.reqId}).then(()=>{this.sending=!1,this.$emit("reloadData","SUCCESS",this.lg("request_denited"))}).catch(e=>{this.sending=!1,e==401?this.$router.push("/login"):this.$emit("reloadData","ERROR",this.lg("general_error"))})},cancelRequest(){this.sending=!0,this.cancelFrienRequest({requestId:this.friend.sendId}).then(()=>{this.sending=!1,this.$emit("reloadData","SUCCESS",this.lg("request_canceled"))}).catch(e=>{this.sending=!1,e==401?this.$router.push("/login"):this.$emit("reloadData","ERROR",this.lg("general_error"))})},editRequestMessage(){this.showDetails=!1,this.editing=!0,this.requestText=this.friend.messageToFriend??"",this.showRequestModal=!0,setTimeout(()=>{document.getElementById("request_text_input_field").focus().select()},300)},sendMessage(){}}},ue={key:0,class:"friend-card"},ce={class:"friend-card-img"},he=["src"],ge={key:1,class:"icon-lg"},_e={class:"friend-card-action"},fe=["disabled"],me={key:1},pe=["disabled"],qe=["disabled"],Re={key:2},be=["disabled"],Se=["disabled"],Te={class:"text-left"},ve={class:"text-center mt-1 mb-2"},ke=["src"],Ie={key:1,class:"icon-lg"},ye={class:"friend-modal-des"},Ce={class:"text-bold"},we={class:"text-bold"},Fe={class:"text-bold"},De={class:"mb-2"},Ee={key:0},ze={key:0},xe={key:1},Me={class:"mt-2 friend-card-btns"},Le=["disabled"],Ge=["disabled"],Pe={key:1},Ne={key:0},Be={key:1},Ue={class:"request-modal-body"},Ae={for:"request_text_input_field"};function Oe(e,s,i,d,a,n){const _=h("IconUser"),c=h("IconEdit"),S=h("Modal");return n.hasFriend?(r(),o("div",ue,[t("div",ce,[i.friend.friendImg?(r(),o("img",{key:0,src:i.friend.friendImg,alt:"Profile Image",class:"profile-img md"},null,8,he)):(r(),o("span",ge,[g(_)]))]),t("div",{class:"friend-card-name",onClick:s[0]||(s[0]=(...u)=>n.openModal&&n.openModal(...u))},[t("h5",null,l(i.friend.friendName),1)]),t("div",_e,[n.isFriend?(r(),o("button",{key:0,class:"btn-sm btn-primary btn-block",onClick:s[1]||(s[1]=(...u)=>n.sendMessage&&n.sendMessage(...u)),disabled:a.sending},l(a.sending?e.lg("sending"):e.lg("send_message")),9,fe)):n.isReqGet?(r(),o("div",me,[t("button",{class:"btn-sm btn-primary btn-block",onClick:s[2]||(s[2]=(...u)=>n.acceptFriendRequest&&n.acceptFriendRequest(...u)),disabled:a.sending},l(a.sending?e.lg("sending"):e.lg("accept_request")),9,pe),t("button",{class:"btn-sm btn-danger btn-block",onClick:s[3]||(s[3]=(...u)=>n.denieFriendRequest&&n.denieFriendRequest(...u)),disabled:a.sending},l(a.sending?e.lg("sending"):e.lg("denie_request")),9,qe)])):n.isReqSend?(r(),o("div",Re,[t("p",null,l(e.lg("already_send")),1),t("button",{class:"btn-sm btn-danger btn-block",onClick:s[4]||(s[4]=(...u)=>n.cancelRequest&&n.cancelRequest(...u)),disabled:a.sending},l(a.sending?e.lg("sending"):e.lg("cancel_request")),9,be)])):(r(),o("button",{key:3,class:"btn-sm btn-primary btn-block",onClick:s[5]||(s[5]=(...u)=>n.openRequestModal&&n.openRequestModal(...u)),disabled:a.sending},l(a.sending?e.lg("sending"):e.lg("send_request")),9,Se))]),g(S,{show:a.showDetails,size:"md",title:i.friend.friendName,headerClass:"text-left",showFooter:!1,onClose:n.modalClose},{default:E(()=>[t("div",Te,[t("div",ve,[i.friend.friendImg?(r(),o("img",{key:0,src:i.friend.friendImg,alt:"Profile Image",class:"profile-img md"},null,8,ke)):(r(),o("span",Ie,[g(_)]))]),t("div",ye,[t("p",null,[t("span",Ce,l(e.lg("city"))+" :",1),R(l(i.friend.friendCity??"????"),1)]),t("p",null,[t("span",we,l(e.lg("friend_country"))+" :",1),R(l(i.friend.friendCountry??"????"),1)]),t("p",null,[t("span",Fe,l(e.lg("friend_des"))+" :",1)]),t("p",De,l(i.friend.friendDescription??"??????"),1),n.isReqGet?(r(),o("div",Ee,[t("p",null,l(e.lg("message")),1),i.friend.messageFromFriend?(r(),o("p",ze,l(i.friend.messageFromFriend),1)):(r(),o("p",xe,l(e.lg("no_message")),1)),t("div",Me,[t("button",{class:"btn btn-primary",onClick:s[6]||(s[6]=(...u)=>n.acceptFriendRequest&&n.acceptFriendRequest(...u)),disabled:a.sending},l(a.sending?e.lg("sending"):e.lg("accept_request")),9,Le),t("button",{class:"btn btn-danger",onClick:s[7]||(s[7]=(...u)=>n.denieFriendRequest&&n.denieFriendRequest(...u)),disabled:a.sending},l(a.sending?e.lg("sending"):e.lg("denie_request")),9,Ge)])])):f("",!0),n.isReqSend?(r(),o("div",Pe,[t("p",null,l(e.lg("you_request_text")),1),i.friend.messageToFriend?(r(),o("p",Ne,[R(l(i.friend.messageToFriend)+" ",1),t("span",{class:"icon-edit-btn ml-1",onClick:s[8]||(s[8]=(...u)=>n.editRequestMessage&&n.editRequestMessage(...u))},[g(c)])])):(r(),o("p",Be,[R(l(e.lg("no_request_send_text"))+" ",1),t("span",{class:"icon-edit-btn ml-1",onClick:s[9]||(s[9]=(...u)=>n.editRequestMessage&&n.editRequestMessage(...u))},[g(c)])]))])):f("",!0)])])]),_:1},8,["show","title","onClose"]),g(S,{show:a.showRequestModal,size:"sm",title:e.lg("send_request"),headerClass:"text-left",showCancel:!0,cancelBtnText:e.lg("cancel"),okBtnText:e.lg("send"),onClose:s[11]||(s[11]=u=>a.showRequestModal=!1),onCancel:s[12]||(s[12]=u=>a.showRequestModal=!1),onOk:n.sendFriendRequest},{default:E(()=>[t("div",Ue,[t("p",null,[R(l(e.lg("addresse"))+" ",1),t("span",null,l(i.friend.friendName),1)]),t("label",Ae,l(e.lg("few_words")),1),P(t("textarea",{name:"requestText",id:"request_text_input_field","onUpdate:modelValue":s[10]||(s[10]=u=>a.requestText=u)},null,512),[[N,a.requestText]])])]),_:1},8,["show","title","cancelBtnText","okBtnText","onOk"])])):f("",!0)}const L=p(le,[["render",Oe]]),$e={components:{IconSearch:U,FailToast:B,FriendCard:L},data(){return{submitting:!1,searchText:"",firstSearch:!0,searchResult:[],searchError:!1,paginationIndex:0}},computed:{...m(T,["lg"]),...C(z,G),hasSearchResult(){return this.searchResult.length>0},hasPagination(){return this.searchResult.length>this.paginationSizesStore.topSize},rightPaginationDisabled(){return this.paginationIndex*this.paginationSizesStore.topSize+this.paginationSizesStore.topSize>=this.searchResult.length},cardsToShow(){let e=[];if(!this.hasSearchResult)return e;let s=this.paginationIndex*this.paginationSizesStore.topSize;s>this.searchResult.length-1&&(s=this.searchResult.length-1),this.paginationSizesStore.topSize>=this.searchResult.length&&(s=0);let i=s+this.paginationSizesStore.topSize;i>this.searchResult.length&&(i=this.searchResult.length);for(let d=s;d<i;d++)e.push(this.searchResult[d]);return e}},methods:{searchUsers(){this.searchText.trim()!=""&&(this.firstSearch=!1,this.submitting=!0,this.loadingStore.startLoading(),this.searchError=!1,q.get("/api/resources/search-user?un="+this.searchText.trim()).then(e=>{this.submitting=!1,this.loadingStore.finishLoading(),this.searchResult=e.data.users}).catch(e=>{this.submitting=!1,this.loadingStore.finishLoading(),this.searchError=!0,setTimeout(()=>{this.searchError=!1},3e3),console.log(e)}))},paginateLeft(){this.paginationIndex--},paginateRight(){this.paginationIndex++},reloadData(e,s){this.$emit("reloadData",e,s)}},mounted(){this.submitting=!1,this.searchText="",this.firstSearch=!0,document.getElementById("search_input").focus()}},He={class:"search-menu"},Ve={class:"user-search-input"},Ke={for:"search_input"},Je={class:"password-container"},Qe=["disabled"],We=["disabled"],Xe={class:"icon"},Ye={key:0,class:"search-result-holder"},Ze={class:"results"},je={key:0},es=["disabled"],ss={class:"result-cards"},ts={key:1},ns=["disabled"],is={key:1,class:"search-result-no-result-holder"},as={key:0},rs={key:1};function ds(e,s,i,d,a,n){const _=h("IconSearch"),c=h("FriendCard"),S=h("FailToast");return r(),o("div",null,[t("div",He,[t("div",Ve,[t("label",Ke,l(e.lg("user_search")),1),t("div",Je,[P(t("input",{id:"search_input",type:"text","onUpdate:modelValue":s[0]||(s[0]=u=>a.searchText=u),disabled:a.submitting,onKeypress:s[1]||(s[1]=Q((...u)=>n.searchUsers&&n.searchUsers(...u),["enter"]))},null,40,Qe),[[N,a.searchText]]),t("button",{type:"button",onClick:s[2]||(s[2]=(...u)=>n.searchUsers&&n.searchUsers(...u)),disabled:a.submitting},[t("span",Xe,[g(_)])],8,We)])])]),t("div",null,[n.hasSearchResult?(r(),o("div",Ye,[t("p",null,[t("span",null,l(a.searchResult.length),1),s[5]||(s[5]=R()),t("span",null,l(e.lg("results")),1)]),t("div",Ze,[n.hasPagination?(r(),o("div",je,[t("button",{type:"button",disabled:a.paginationIndex==0,class:"pag-btn",onClick:s[3]||(s[3]=(...u)=>n.paginateLeft&&n.paginateLeft(...u))},"<",8,es)])):f("",!0),t("div",ss,[(r(!0),o(w,null,F(n.cardsToShow,u=>(r(),b(c,{key:"friend_"+u.friendId,friend:u,onReloadData:n.reloadData},null,8,["friend","onReloadData"]))),128))]),n.hasPagination?(r(),o("div",ts,[t("button",{type:"button",disabled:n.rightPaginationDisabled,class:"pag-btn",onClick:s[4]||(s[4]=(...u)=>n.paginateRight&&n.paginateRight(...u))},">",8,ns)])):f("",!0)])])):(r(),o("div",is,[a.firstSearch?(r(),o("p",as,l(e.lg("user_search_before")),1)):(r(),o("p",rs,l(e.lg("user_search_not_find")),1))]))]),a.searchError?(r(),b(S,{key:0})):f("",!0)])}const os=p($e,[["render",ds]]),ls={components:{FriendCard:L},data(){return{paginationIndex:0}},computed:{...m(T,["lg"]),...m(I,["numSendRequests","sendRequests"]),...C(z),hasPagination(){return this.numSendRequests>this.paginationSizesStore.topSize},rightPaginationDisabled(){return this.paginationIndex*this.paginationSizesStore.topSize+this.paginationSizesStore.topSize>=this.numSendRequests},cardsToShow(){let e=[];if(this.numSendRequests<1)return e;let s=this.paginationIndex*this.paginationSizesStore.topSize;s>this.sendRequests.length-1&&(s=this.sendRequests.length-1),this.paginationSizesStore.topSize>=this.sendRequests.length&&(s=0);let i=s+this.paginationSizesStore.topSize;i>this.sendRequests.length&&(i=this.sendRequests.length);for(let d=s;d<i;d++)e.push(this.sendRequests[d]);return e}},methods:{paginateLeft(){this.paginationIndex--},paginateRight(){this.paginationIndex++},changeTabToSearch(){this.$emit("changeTab")},reloadData(e,s){this.$emit("reloadData",e,s)}}},us={key:0,class:"search-result-holder"},cs={class:"results"},hs={key:0},gs=["disabled"],_s={class:"result-cards"},fs={key:1},ms=["disabled"],ps={key:1,class:"text-center m-2"};function qs(e,s,i,d,a,n){const _=h("FriendCard");return r(),o("div",null,[e.numSendRequests?(r(),o("div",us,[t("div",cs,[n.hasPagination?(r(),o("div",hs,[t("button",{type:"button",disabled:a.paginationIndex==0,class:"pag-btn",onClick:s[0]||(s[0]=(...c)=>n.paginateLeft&&n.paginateLeft(...c))},"<",8,gs)])):f("",!0),t("div",_s,[(r(!0),o(w,null,F(n.cardsToShow,c=>(r(),b(_,{key:"send__request_"+c.friendId,friend:c,onReloadData:n.reloadData},null,8,["friend","onReloadData"]))),128))]),n.hasPagination?(r(),o("div",fs,[t("button",{type:"button",disabled:n.rightPaginationDisabled,class:"pag-btn",onClick:s[1]||(s[1]=(...c)=>n.paginateRight&&n.paginateRight(...c))},">",8,ms)])):f("",!0)])])):(r(),o("div",ps,[t("p",null,[R(l(e.lg("not_send_any_request_yet"))+" ",1),t("span",{class:"btn-link",onClick:s[2]||(s[2]=(...c)=>n.changeTabToSearch&&n.changeTabToSearch(...c))},l(e.lg("contact_search")),1)])]))])}const Rs=p(ls,[["render",qs]]),bs={components:{FriendCard:L},data(){return{paginationIndex:0}},computed:{...m(T,["lg"]),...m(y,["numGetRequests","getRequests"]),...C(z),hasPagination(){return this.numGetRequests>this.paginationSizesStore.topSize},rightPaginationDisabled(){return this.paginationIndex*this.paginationSizesStore.topSize+this.paginationSizesStore.topSize>=this.numGetRequests},cardsToShow(){let e=[];if(this.numGetRequests<1)return e;let s=this.paginationIndex*this.paginationSizesStore.topSize;s>this.getRequests.length-1&&(s=this.getRequests.length-1),this.paginationSizesStore.topSize>=this.getRequests.length&&(s=0);let i=s+this.paginationSizesStore.topSize;i>this.getRequests.length&&(i=this.getRequests.length);for(let d=s;d<i;d++)e.push(this.getRequests[d]);return e}},methods:{paginateLeft(){this.paginationIndex--},paginateRight(){this.paginationIndex++},changeTabToSearch(){this.$emit("changeTab")},reloadData(e,s){this.$emit("reloadData",e,s)}}},Ss={key:0,class:"search-result-holder"},Ts={class:"results"},vs={key:0},ks=["disabled"],Is={class:"result-cards"},ys={key:1},Cs=["disabled"],ws={key:1,class:"text-center m-2"};function Fs(e,s,i,d,a,n){const _=h("FriendCard");return r(),o("div",null,[e.numGetRequests?(r(),o("div",Ss,[t("div",Ts,[n.hasPagination?(r(),o("div",vs,[t("button",{type:"button",disabled:a.paginationIndex==0,class:"pag-btn",onClick:s[0]||(s[0]=(...c)=>n.paginateLeft&&n.paginateLeft(...c))},"<",8,ks)])):f("",!0),t("div",Is,[(r(!0),o(w,null,F(n.cardsToShow,c=>(r(),b(_,{key:"send__request_"+c.friendId,friend:c,onReloadData:n.reloadData},null,8,["friend","onReloadData"]))),128))]),n.hasPagination?(r(),o("div",ys,[t("button",{type:"button",disabled:n.rightPaginationDisabled,class:"pag-btn",onClick:s[1]||(s[1]=(...c)=>n.paginateRight&&n.paginateRight(...c))},">",8,Cs)])):f("",!0)])])):(r(),o("div",ws,[t("p",null,[R(l(e.lg("not_send_any_request_yet"))+" ",1),t("span",{class:"btn-link",onClick:s[2]||(s[2]=(...c)=>n.changeTabToSearch&&n.changeTabToSearch(...c))},l(e.lg("contact_search")),1)])]))])}const Ds=p(bs,[["render",Fs]]),Es={components:{IconUser:x,IconSearch:U,IconLeft:ie,IconRight:oe,SearchContactTab:os,SendRequestsTab:Rs,GetRequestsTab:Ds,SuccessToast:Y,FailToast:B},data(){return{selectedTab:"GET",saveSuccess:!1,saveError:!1,toastMessage:""}},computed:{...C(G),...m(T,["lg"]),...m(I,{numSendRequests:"numSendRequests",isSendStoreLoaded:"isLoaded"}),...m(y,{numGetRequests:"numGetRequests",isGetStoreLoaded:"isLoaded"})},methods:{...v(I,{loadSendRequests:"loadRequests"}),...v(y,{loadGetRequests:"loadRequests"}),...v(A,{loadFriends:"loadFriends"}),selectTab(e){e==this.selectedTab?this.selectedTab="NONE":this.selectedTab=e},loadStores(e="NONE",s=""){let i=[];this.isSendStoreLoaded||i.push(this.loadSendRequests()),this.isGetStoreLoaded||i.push(this.loadGetRequests()),i.push(this.loadFriends()),this.loadingStore.startLoading(),Promise.all(i).then(()=>{this.loadingStore.finishLoading(),this.numGetRequests>0?this.selectedTab="GET":this.selectedTab="NONE",e!=="NONE"&&(e==="SUCCESS"&&(this.toastMessage=s,this.saveSuccess=!0,setTimeout(()=>{this.saveSuccess=!1,this.toastMessage=""},3e3)),e==="ERROR"&&(this.toastMessage=s,this.saveError=!0,setTimeout(()=>{this.saveError=!1,this.toastMessage=""},3e3)))}).catch(d=>{this.loadingStore.finishLoading(),d==401?this.$router.push("/login"):(this.toastMessage=this.lg("general_error"),this.saveError=!0,setTimeout(()=>{this.saveError=!1,this.toastMessage=""},3e3))})}},mounted(){this.loadStores()}},zs={class:"contact-tabs"},xs={class:"tab"},Ms={class:"icon"},Ls={class:"icon"},Gs={class:"tab-text"},Ps={class:"icon"},Ns={class:"icon"},Bs={class:"tab-text"},Us={key:0,class:"tab-num"},As={class:"icon"},Os={class:"icon"},$s={class:"tab-text"},Hs={key:0,class:"tab-num"},Vs={key:0,class:"tab-content"},Ks={key:0},Js={key:1},Qs={key:2};function Ws(e,s,i,d,a,n){const _=h("IconUser"),c=h("IconSearch"),S=h("IconLeft"),u=h("IconRight"),O=h("SearchContactTab"),$=h("GetRequestsTab"),H=h("SendRequestsTab"),V=h("SuccessToast"),K=h("FailToast");return r(),o("div",zs,[t("div",xs,[t("span",{class:D(["tab-menu",{"active-tab":a.selectedTab=="SEARCH"}]),onClick:s[0]||(s[0]=k=>n.selectTab("SEARCH"))},[t("span",Ms,[g(_)]),t("span",Ls,[g(c)]),t("span",Gs,l(e.lg("contact_search")),1)],2),t("span",{class:D(["tab-menu",{"active-tab":a.selectedTab=="GET"}]),onClick:s[1]||(s[1]=k=>n.selectTab("GET"))},[t("span",Ps,[g(_)]),t("span",Ns,[g(S)]),t("span",Bs,l(e.lg("friend_requests")),1),e.numGetRequests?(r(),o("sup",Us,l(e.numGetRequests),1)):f("",!0)],2),t("span",{class:D(["tab-menu",{"active-tab":a.selectedTab=="SEND"}]),onClick:s[2]||(s[2]=k=>n.selectTab("SEND"))},[t("span",As,[g(_)]),t("span",Os,[g(u)]),t("span",$s,l(e.lg("send_requests")),1),e.numSendRequests?(r(),o("sup",Hs,l(e.numSendRequests),1)):f("",!0)],2)]),a.selectedTab!="NONE"?(r(),o("div",Vs,[a.selectedTab=="SEARCH"?(r(),o("div",Ks,[g(O,{onReloadData:n.loadStores},null,8,["onReloadData"])])):f("",!0),a.selectedTab=="GET"?(r(),o("div",Js,[g($,{onChangeTab:s[3]||(s[3]=k=>n.selectTab("SEARCH")),onReloadData:n.loadStores},null,8,["onReloadData"])])):f("",!0),a.selectedTab=="SEND"?(r(),o("div",Qs,[g(H,{onChangeTab:s[4]||(s[4]=k=>n.selectTab("SEARCH")),onReloadData:n.loadStores},null,8,["onReloadData"])])):f("",!0)])):f("",!0),a.saveSuccess?(r(),b(V,{key:1,msg:a.toastMessage},null,8,["msg"])):f("",!0),a.saveError?(r(),b(K,{key:2,msg:a.toastMessage},null,8,["msg"])):f("",!0)])}const Xs=p(Es,[["render",Ws]]),Ys={components:{IconUser:x},computed:{...m(A,{numFriends:"numFriends",friends:"allFriends"}),...m(T,["lg"])}},Zs={class:"friend-list-container"},js={class:"contact-total"},et={class:"friend-list"},st={class:"friend-data"},tt={class:"friend-img"},nt=["src"],it={key:1,class:"icon-lg"},at={class:"btn-sm btn-primary"};function rt(e,s,i,d,a,n){const _=h("IconUser");return r(),o("div",Zs,[t("p",js,l(e.lg("friends_count"))+" : "+l(e.numFriends),1),t("div",et,[(r(!0),o(w,null,F(e.friends,c=>(r(),o("div",{key:c.friendId,class:"friend-wrapper"},[t("div",st,[t("div",tt,[c.friendImg?(r(),o("img",{key:0,src:c.friendImg,alt:"Profile Image",class:"profile-img sm"},null,8,nt)):(r(),o("span",it,[g(_)]))]),t("div",null,[t("h5",null,l(c.friendName),1)])]),t("div",null,[t("button",at,l(e.lg("send_message")),1)])]))),128))])])}const dt=p(Ys,[["render",rt]]),ot={components:{ContactTabs:Xs,Contacts:dt}},lt={class:"mt-2"};function ut(e,s,i,d,a,n){const _=h("ContactTabs"),c=h("Contacts");return r(),o("div",null,[t("div",null,[g(_)]),t("div",lt,[g(c)])])}const ct=p(ot,[["render",ut]]),ht={components:{BaseLayout:J,Home:ct},props:["socket"]};function gt(e,s,i,d,a,n){const _=h("Home"),c=h("BaseLayout");return r(),b(c,null,{default:E(()=>[g(_)]),_:1})}const qt=p(ht,[["render",gt]]);export{qt as default};
