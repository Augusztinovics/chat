import{d as T,_ as N,R as B,I as C,a as V,b as M,c as L,L as A,m as x,e as D,f as S,g as d,h as t,i as p,w,t as n,j as O,k as l,l as g,v as I,n as f,o as m,p as E,q as _,r as j,u as q,s as u,x as a}from"./index-CVhGPTwQ.js";import{I as z}from"./IconUser-BEaKiZlA.js";const F=T("register",{state:()=>({username:"",password:"",acceptTerms:!1})}),H={components:{RouterLink:B,IconUser:z,IconTerms:C,IconShield:V,IconEyeClose:M,IconEyeOpen:L,LgSelector:A},data(){return{passwordRepeate:"",showPassword:!1,showPasswordRepeate:!1,submitting:!1,missingUsername:!1,missingPassword:!1,invalidUser:!1,missingPasswordRepeate:!1,passwordRepeateNotMatch:!1,termsNotAccepted:!1,generalError:!1,hpot:""}},computed:{...x(F),...D(q,["lg"]),passwordInputType(){return this.showPassword?"text":"password"},passwordRepeateInputType(){return this.showPasswordRepeate?"text":"password"}},methods:{submit(){if(this.submitting||this.validateInput())return;this.generalError=!1,this.submitting=!0;let s="HU";try{s=localStorage.getItem("y_chat_selected_lg")}catch(e){console.log(e)}S.post("/api/register",{username:this.registerStore.username.trim(),password:this.registerStore.password.trim(),acceptTerms:this.registerStore.acceptTerms,lg:s,hpot:this.hpot}).then(()=>{this.submitting=!1,this.registerStore.username="",this.registerStore.password="",this.registerStore.acceptTerms=!1,this.$router.push("/home/profile")}).catch(e=>{var b,r;this.submitting=!1;let c=(r=(b=e==null?void 0:e.response)==null?void 0:b.data)==null?void 0:r.message;if(c==="username"){this.missingUsername=!0,document.getElementById("username_input").focus();return}if(c==="password"){this.missingPassword=!0,document.getElementById("password_input").focus();return}if(c==="terms"){this.termsNotAccepted=!0;return}if(c==="invalid_username"){this.invalidUser=!0,document.getElementById("username_input").focus();return}if(c==="pot"){this.generalError=!0,this.submitting=!0,this.hpot="",setTimeout(()=>{this.generalError=!1,this.submitting=!1},5e3);return}this.generalError=!0,setTimeout(()=>{this.generalError=!1},3e3)})},toogleShowPassword(){this.showPassword=!this.showPassword},toogleShowPasswordRepeate(){this.showPasswordRepeate=!this.showPasswordRepeate},clearErrors(){this.missingUsername=!1,this.missingPassword=!1,this.invalidUser=!1,this.missingPasswordRepeate=!1,this.passwordRepeateNotMatch=!1,this.termsNotAccepted=!1},validateInput(){let s=!1;if(this.invalidUser){let e=document.getElementById("username_input");e.focus(),e.select(),s=!0}if(this.registerStore.username.trim()===""&&(this.missingUsername=!0,document.getElementById("username_input").focus(),s=!0),this.registerStore.password.trim()===""&&(this.missingPassword=!0,s||(document.getElementById("password_input").focus(),s=!0)),this.passwordRepeate.trim()===""&&(this.missingPasswordRepeate=!0,s||(document.getElementById("password_repeate").focus(),s=!0)),this.registerStore.password&&this.passwordRepeate&&this.passwordRepeate!==this.registerStore.password){if(this.passwordRepeateNotMatch=!0,!s){let e=document.getElementById("password_repeate");e.focus(),e.select(),s=!0}setTimeout(()=>{this.showPassword=!0,this.showPasswordRepeate=!0},100)}return this.registerStore.acceptTerms||(this.termsNotAccepted=!0,s=!0),s},checkUsername(){this.registerStore.username.trim()!==""&&S.post("/api/username-check",{username:this.registerStore.username.trim()}).catch(s=>{console.log(s),this.invalidUser=!0})}}},G={class:"welcome-wrapper"},J={class:"welcome-register"},K={class:"menu-box"},Q={class:"icon"},W={class:"icon"},X={class:"menu-box"},Y={class:"icon"},Z={class:"text-center m-2"},$={class:"card"},ee={for:"username_input"},se=["disabled"],te={key:0,class:"invalid-text"},re={key:1,class:"invalid-text"},oe={for:"password_input"},ie={class:"password-container"},ne=["type","disabled"],ae={class:"icon"},le={key:0,class:"invalid-text"},de={for:"password_repeate"},pe={class:"password-container"},me=["type","disabled"],ue={class:"icon"},ce={key:0,class:"invalid-text"},ge={key:1,class:"invalid-text"},he={class:"simple-checkbox"},we={for:"accept_terms"},fe=["disabled"],_e={key:2,class:"invalid-text pb-1"},be={class:"text-center mb-2"},ye=["disabled"],ve={key:0,class:"invalid-text"};function Se(s,e,c,b,r,i){const R=u("IconTerms"),h=u("RouterLink"),P=u("IconShield"),k=u("IconUser"),U=u("LgSelector"),y=u("IconEyeClose"),v=u("IconEyeOpen");return a(),d("div",G,[t("header",J,[t("div",K,[p(h,{to:"/terms",class:"mr-2 menu-item"},{default:w(()=>[t("span",Q,[p(R)]),l(" "+n(s.lg("terms")),1)]),_:1}),p(h,{to:"/privacy",class:"menu-item"},{default:w(()=>[t("span",W,[p(P)]),l(" "+n(s.lg("privacy")),1)]),_:1})]),t("div",X,[p(h,{to:"/",class:"menu-item mr-2"},{default:w(()=>[t("span",Y,[p(k)]),l(" "+n(s.lg("login")),1)]),_:1}),p(U,{class:"menu-item"})])]),t("h1",Z,n(s.lg("register")),1),t("main",null,[t("div",$,[t("form",{novalidate:"",onSubmit:e[12]||(e[12]=O((...o)=>i.submit&&i.submit(...o),["prevent"]))},[t("label",ee,[l(n(s.lg("username"))+" ",1),e[13]||(e[13]=t("span",null,"*",-1))]),g(t("input",{id:"username_input",type:"text",class:f({"invalid-input":r.missingUsername||r.invalidUser}),"onUpdate:modelValue":e[0]||(e[0]=o=>s.registerStore.username=o),onInput:e[1]||(e[1]=(...o)=>i.clearErrors&&i.clearErrors(...o)),onBlur:e[2]||(e[2]=(...o)=>i.checkUsername&&i.checkUsername(...o)),disabled:r.submitting},null,42,se),[[I,s.registerStore.username]]),r.missingUsername?(a(),d("p",te,n(s.lg("missing_username")),1)):m("",!0),r.invalidUser?(a(),d("p",re,n(s.lg("username_exists")),1)):m("",!0),t("div",null,[t("label",oe,[l(n(s.lg("password"))+" ",1),e[14]||(e[14]=t("span",null,"*",-1))]),t("div",ie,[g(t("input",{id:"password_input",type:i.passwordInputType,class:f({"invalid-input":r.missingPassword}),"onUpdate:modelValue":e[3]||(e[3]=o=>s.registerStore.password=o),onInput:e[4]||(e[4]=(...o)=>i.clearErrors&&i.clearErrors(...o)),disabled:r.submitting},null,42,ne),[[E,s.registerStore.password]]),t("button",{type:"button",onClick:e[5]||(e[5]=(...o)=>i.toogleShowPassword&&i.toogleShowPassword(...o))},[t("span",ae,[r.showPassword?(a(),_(y,{key:0})):(a(),_(v,{key:1}))])])]),r.missingPassword?(a(),d("p",le,n(s.lg("missing_password")),1)):m("",!0)]),t("div",null,[t("label",de,[l(n(s.lg("password_repeate"))+" ",1),e[15]||(e[15]=t("span",null,"*",-1))]),t("div",pe,[g(t("input",{id:"password_repeate",type:i.passwordRepeateInputType,class:f({"invalid-input":r.missingPasswordRepeate||r.passwordRepeateNotMatch}),"onUpdate:modelValue":e[6]||(e[6]=o=>r.passwordRepeate=o),onInput:e[7]||(e[7]=(...o)=>i.clearErrors&&i.clearErrors(...o)),disabled:r.submitting},null,42,me),[[E,r.passwordRepeate]]),t("button",{type:"button",onClick:e[8]||(e[8]=(...o)=>i.toogleShowPasswordRepeate&&i.toogleShowPasswordRepeate(...o))},[t("span",ue,[r.showPasswordRepeate?(a(),_(y,{key:0})):(a(),_(v,{key:1}))])])]),r.missingPasswordRepeate?(a(),d("p",ce,n(s.lg("missing_password_repeate")),1)):m("",!0),r.passwordRepeateNotMatch?(a(),d("p",ge,n(s.lg("password_repeate_not_match")),1)):m("",!0)]),t("div",he,[t("label",we,[g(t("input",{type:"checkbox",id:"accept_terms","onUpdate:modelValue":e[9]||(e[9]=o=>s.registerStore.acceptTerms=o),class:f({"invalid-input":r.termsNotAccepted}),onChange:e[10]||(e[10]=(...o)=>i.clearErrors&&i.clearErrors(...o)),disabled:r.submitting},null,42,fe),[[j,s.registerStore.acceptTerms]]),l(" "+n(s.lg("accept_terms"))+" ",1),e[16]||(e[16]=t("span",null,"*",-1))])]),r.termsNotAccepted?(a(),d("p",_e,[l(n(s.lg("terms_not_accepted")),1),p(h,{to:"/terms",class:"ml-1"},{default:w(()=>[l(n(s.lg("terms")),1)]),_:1})])):m("",!0),g(t("input",{type:"text",class:"hidden-input","onUpdate:modelValue":e[11]||(e[11]=o=>r.hpot=o)},null,512),[[I,r.hpot]]),t("div",be,[t("button",{type:"submit",class:"btn btn-block btn-primary",disabled:r.submitting},n(s.lg("register")),9,ye),r.generalError?(a(),d("p",ve,n(s.lg("general_error")),1)):m("",!0)])],32)])])])}const Re=N(H,[["render",Se]]);export{Re as default};
