import{d as I,f as y,_ as u,x as a,g as l,h as s,i as c,E as C,C as z,o as g,l as M,v as $,A as H,n as E,s as h,R as D,y as k,I as B,a as T,c as P,L as V,m as W,e as N,G as O,u as R,w as _,t as p,D as X,q as U}from"./index-BTef6Aq0.js";const Y=I("user",{state:()=>({loaded:!1,id:null,username:"",email:"",lg:"HU",country:"",city:"",description:"",profileImg:null}),actions:{load(){return new Promise((e,t)=>{y.get("/api/resources/user-data").then(n=>{this.id=n.data.userId,this.username=n.data.username,this.email=n.data.userEmail,this.lg=n.data.userLg,this.country=n.data.userCountry,this.city=n.data.userCity,this.description=n.data.userDescription,this.profileImg=n.data.userProfileImg,this.loaded=!0,e(!0)}).catch(n=>{n.response.status==401?t(401):t(n)})})},updateUser(e){return new Promise((t,n)=>{y.post("/api/resources/user-update",e).then(o=>{this.id=o.data.userId,this.username=o.data.username,this.email=o.data.userEmail,this.lg=o.data.userLg,this.country=o.data.userCountry,this.city=o.data.userCity,this.description=o.data.userDescription,this.profileImg=o.data.userProfileImg,this.loaded=!0,t(!0)}).catch(o=>{var d;o.response.status==401?n(401):o.response.status==417?n(417):o.response.status==400?n((d=o.response.data)==null?void 0:d.message):n(o)})})},deleteUser(e){return new Promise((t,n)=>{y.post("/api/resources/user-delete",e).then(()=>{this.id=null,this.username="",this.email="",this.lg="HU",this.country="",this.city="",this.description="",this.profileImg=null,this.loaded=!1,t(!0)}).catch(o=>{n(o)})})}}}),F=I("paginationSizes",{state:()=>({topSize:5}),actions:{calculatePaginationStep(){if(window.innerWidth>1600){this.topSize=5;return}if(window.innerWidth>1160){this.topSize=4;return}if(window.innerWidth>915){this.topSize=3;return}if(window.innerWidth>749){this.topSize=2;return}if(window.innerWidth>685){this.topSize=3;return}if(window.innerWidth>505){this.topSize=2;return}this.topSize=1}}}),A=I("loading",{state:()=>({counter:0,showLoading:!1}),actions:{startLoading(){this.counter++,this.showLoading||(this.showLoading=!0)},finishLoading(){this.counter--,this.counter<1&&(this.showLoading=!1)}}}),G={},J={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"};function K(e,t){return a(),l("svg",J,t[0]||(t[0]=[s("path",{d:"M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"},null,-1)]))}const q=u(G,[["render",K]]),j={},Q={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 512"};function Z(e,t){return a(),l("svg",Q,t[0]||(t[0]=[s("path",{d:"M64 64l224 0 0 9.8c0 39-23.7 74-59.9 88.4C167.6 186.5 128 245 128 310.2l0 73.8s0 0 0 0l-64 0L64 64zm288 0l224 0 0 320-67.7 0-3.7-4.5-75.2-90.2c-9.1-10.9-22.6-17.3-36.9-17.3l-71.1 0-41-63.1c-.3-.5-.6-1-1-1.4c44.7-29 72.5-79 72.5-133.6l0-9.8zm73 320l-45.8 0 42.7 64L592 448c26.5 0 48-21.5 48-48l0-352c0-26.5-21.5-48-48-48L48 0C21.5 0 0 21.5 0 48L0 400c0 26.5 21.5 48 48 48l260.2 0 33.2 49.8c9.8 14.7 29.7 18.7 44.4 8.9s18.7-29.7 8.9-44.4L310.5 336l74.6 0 40 48zm-159.5 0L192 384s0 0 0 0l0-73.8c0-10.2 1.6-20.1 4.7-29.5L265.5 384zM192 128a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"},null,-1)]))}const tt=u(j,[["render",Z]]),st={},et={class:"overlay"};function nt(e,t){return a(),l("div",et,t[0]||(t[0]=[s("div",{class:"overlay-icon-box"},[s("span",{class:"loader"})],-1)]))}const ot=u(st,[["render",nt]]),it={},at={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function rt(e,t){return a(),l("svg",at,t[0]||(t[0]=[s("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM164.1 325.5C182 346.2 212.6 368 256 368s74-21.8 91.9-42.5c5.8-6.7 15.9-7.4 22.6-1.6s7.4 15.9 1.6 22.6C349.8 372.1 311.1 400 256 400s-93.8-27.9-116.1-53.5c-5.8-6.7-5.1-16.8 1.6-22.6s16.8-5.1 22.6 1.6zM144.4 208a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm192-32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"},null,-1)]))}const ct=u(it,[["render",rt]]),lt={},dt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"};function ht(e,t){return a(),l("svg",dt,t[0]||(t[0]=[s("path",{d:"M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM64 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm152 32c5.3 0 10.2 2.6 13.2 6.9l88 128c3.4 4.9 3.7 11.3 1 16.5s-8.2 8.6-14.2 8.6l-88 0-40 0-48 0-48 0c-5.8 0-11.1-3.1-13.9-8.1s-2.8-11.2 .2-16.1l48-80c2.9-4.8 8.1-7.8 13.7-7.8s10.8 2.9 13.7 7.8l12.8 21.4 48.3-70.2c3-4.3 7.9-6.9 13.2-6.9z"},null,-1)]))}const ut=u(lt,[["render",ht]]),mt={},gt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function pt(e,t){return a(),l("svg",gt,t[0]||(t[0]=[s("path",{d:"M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4L224 214.3l0 41.7 0 41.7L52.5 440.6zM256 352l0-96 0-128 0-32c0-12.4 7.2-23.7 18.4-29s24.5-3.6 34.1 4.4l192 160c7.3 6.1 11.5 15.1 11.5 24.6s-4.2 18.5-11.5 24.6l-192 160c-9.5 7.9-22.8 9.7-34.1 4.4s-18.4-16.6-18.4-29l0-64z"},null,-1)]))}const _t=u(mt,[["render",pt]]),ft={},wt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function vt(e,t){return a(),l("svg",wt,t[0]||(t[0]=[s("path",{d:"M439 7c9.4-9.4 24.6-9.4 33.9 0l32 32c9.4 9.4 9.4 24.6 0 33.9l-87 87 39 39c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8l-144 0c-13.3 0-24-10.7-24-24l0-144c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2l39 39L439 7zM72 272l144 0c13.3 0 24 10.7 24 24l0 144c0 9.7-5.8 18.5-14.8 22.2s-19.3 1.7-26.2-5.2l-39-39L73 505c-9.4 9.4-24.6 9.4-33.9 0L7 473c-9.4-9.4-9.4-24.6 0-33.9l87-87L55 313c-6.9-6.9-8.9-17.2-5.2-26.2s12.5-14.8 22.2-14.8z"},null,-1)]))}const xt=u(ft,[["render",vt]]),St={},Lt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"};function yt(e,t){return a(),l("svg",Lt,t[0]||(t[0]=[s("path",{d:"M344 0L488 0c13.3 0 24 10.7 24 24l0 144c0 9.7-5.8 18.5-14.8 22.2s-19.3 1.7-26.2-5.2l-39-39-87 87c-9.4 9.4-24.6 9.4-33.9 0l-32-32c-9.4-9.4-9.4-24.6 0-33.9l87-87L327 41c-6.9-6.9-8.9-17.2-5.2-26.2S334.3 0 344 0zM168 512L24 512c-13.3 0-24-10.7-24-24L0 344c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2l39 39 87-87c9.4-9.4 24.6-9.4 33.9 0l32 32c9.4 9.4 9.4 24.6 0 33.9l-87 87 39 39c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8z"},null,-1)]))}const It=u(St,[["render",yt]]),Ct={},bt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512"};function zt(e,t){return a(),l("svg",bt,t[0]||(t[0]=[s("path",{d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},null,-1)]))}const Mt=u(Ct,[["render",zt]]),$t={},Ht={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 640 640"};function Et(e,t){return a(),l("svg",Ht,t[0]||(t[0]=[s("path",{d:"M96 320C96 289.1 121.1 264 152 264C182.9 264 208 289.1 208 320C208 350.9 182.9 376 152 376C121.1 376 96 350.9 96 320zM264 320C264 289.1 289.1 264 320 264C350.9 264 376 289.1 376 320C376 350.9 350.9 376 320 376C289.1 376 264 350.9 264 320zM488 264C518.9 264 544 289.1 544 320C544 350.9 518.9 376 488 376C457.1 376 432 350.9 432 320C432 289.1 457.1 264 488 264z"},null,-1)]))}const Dt=u($t,[["render",Et]]),kt={components:{EmojiIcon:ct,ImageIcon:ut,IconSend:_t,IconMinimize:xt,IconMaximize:It,IconX:Mt,IconDots:Dt},data(){return{xVW:1,yVH:1,dragging:!1,startX:0,startY:0,showChat:!0,closing:!1,fullScreen:!1,img:null,msgText:"",openHelper:"NON",maxHeight:"100%"}},computed:{showSendBtn(){return this.img||this.msgText.length>0}},methods:{sendMsg(){if(!this.showSendBtn)return;let e={group_id:1,from_id:1,from:"Somebody",msg:this.msgText,img:this.img,reaction:null};console.log(e),this.msgText="",this.img=null,this.$refs.msg_text.focus()},sendReaction(e){console.log({group_id:1,from_id:1,from:"Somebody",msg:"",img:null,reaction:e})},openHelperContainer(e){this.emtyFileInput(),e==this.openHelper?(this.openHelper="NON",this.maxHeight="100%"):(this.openHelper=e,this.fullScreen?this.maxHeight="85%":this.maxHeight="70%")},emtyFileInput(){this.img=null},closeChat(){this.closing=!0,setTimeout(()=>{this.showChat=!1,this.closing=!1},150)},toogleFullScreen(){this.fullScreen=!this.fullScreen,this.fullScreen&&(this.dragging&&this.endDrag(),this.xVW=1,this.yVH=1),this.openHelper!="NON"&&(this.fullScreen?this.maxHeight="85%":this.maxHeight="70%")},startDrag(e){if(this.fullScreen)return;this.dragging=!0;const t=this.getPoint(e);this.startX=t.x-this.vwToPx(this.xVW),this.startY=t.y-this.vhToPx(this.yVH),window.addEventListener("mousemove",this.onDrag),window.addEventListener("mouseup",this.endDrag),window.addEventListener("touchmove",this.onDrag,{passive:!1}),window.addEventListener("touchend",this.endDrag)},onDrag(e){if(!this.dragging)return;e.preventDefault();const t=this.getPoint(e),n=(t.x-this.startX)/window.innerWidth*100,o=(t.y-this.startY)/window.innerHeight*100;this.xVW=Math.max(0,Math.min(75,n)),this.yVH=Math.max(0,Math.min(75,o))},endDrag(){this.dragging=!1,window.removeEventListener("mousemove",this.onDrag),window.removeEventListener("mouseup",this.endDrag),window.removeEventListener("touchmove",this.onDrag),window.removeEventListener("touchend",this.endDrag)},getPoint(e){return e.touches?{x:e.touches[0].clientX,y:e.touches[0].clientY}:{x:e.clientX,y:e.clientY}},vwToPx(e){return window.innerWidth*e/100},vhToPx(e){return window.innerHeight*e/100}}},Bt={class:"controls"},Tt={key:0,class:"icon"},Pt={key:1,class:"icon"},Vt={class:"icon"},Wt={class:"chat-body"},Nt={key:0,class:"help-box"},Ot={key:1,class:"help-box"},Rt={key:2,class:"help-box"},Xt={class:"chat-footer"},Ut={class:"icon-btn-container"},Yt={class:"icon"},Ft={class:"icon"},At={class:"msg-input-container"},Gt={class:"icon"},Jt={class:"icon-btn-container reaction"},Kt={class:"icon"};function qt(e,t,n,o,d,r){const f=h("IconMinimize"),m=h("IconMaximize"),w=h("IconX"),v=h("ImageIcon"),x=h("EmojiIcon"),S=h("IconSend"),L=h("IconDots");return d.showChat?(a(),l("div",{key:0,class:E(["chat-container",{"full-screen":d.fullScreen,closing:d.closing}]),style:C({left:d.xVW+"vw",top:d.yVH+"vh"})},[s("div",{class:"chat-header",onMousedown:t[2]||(t[2]=(...i)=>r.startDrag&&r.startDrag(...i)),onTouchstart:t[3]||(t[3]=(...i)=>r.startDrag&&r.startDrag(...i))},[t[11]||(t[11]=s("h4",null,"The group name",-1)),s("div",Bt,[s("button",{type:"button",class:"minimaize-btn",onClick:t[0]||(t[0]=(...i)=>r.toogleFullScreen&&r.toogleFullScreen(...i))},[d.fullScreen?(a(),l("span",Tt,[c(f)])):(a(),l("span",Pt,[c(m)]))]),s("button",{type:"button",onClick:t[1]||(t[1]=(...i)=>r.closeChat&&r.closeChat(...i))},[s("span",Vt,[c(w)])])])],32),s("div",Wt,[s("div",{class:"msg-and-user",style:C({"max-height":d.maxHeight})},t[12]||(t[12]=[z('<div class="user-box"></div><div class="msg-box"><p>first message</p><p>second message</p><p>second message</p><p>second message</p><p>second message</p><p>second message</p><p>second message</p><p>second message</p><p>second message</p><p>second message</p><p>second message</p><p>second message</p><p>second message</p><p>last message</p></div>',2)]),4),d.openHelper=="IMG"?(a(),l("div",Nt," Image upload!!!! ")):g("",!0),d.openHelper=="EMOJI"?(a(),l("div",Ot," Emmojiiiisss!!!! ")):g("",!0),d.openHelper=="REACTION"?(a(),l("div",Rt," Reactions!!!! ")):g("",!0)]),s("div",Xt,[s("div",Ut,[s("button",{type:"button",onClick:t[4]||(t[4]=i=>r.openHelperContainer("IMG"))},[s("span",Yt,[c(v)])]),s("button",{type:"button",onClick:t[5]||(t[5]=i=>r.openHelperContainer("EMOJI"))},[s("span",Ft,[c(x)])])]),s("div",At,[M(s("input",{type:"text",name:"msg_text",ref:"msg_text",onKeyup:t[6]||(t[6]=H((...i)=>r.sendMsg&&r.sendMsg(...i),["enter"])),"onUpdate:modelValue":t[7]||(t[7]=i=>d.msgText=i)},null,544),[[$,d.msgText]]),r.showSendBtn?(a(),l("button",{key:0,type:"button",class:"chat-send-btn",onClick:t[8]||(t[8]=(...i)=>r.sendMsg&&r.sendMsg(...i))},[s("span",Gt,[c(S)])])):g("",!0)]),s("div",Jt,[s("button",{type:"button",class:"reaction-btn",onClick:t[9]||(t[9]=i=>r.sendReaction("ðŸ‘"))},"ðŸ‘"),s("button",{type:"button",class:"reaction-btn",onClick:t[10]||(t[10]=i=>r.openHelperContainer("REACTION"))},[s("span",Kt,[c(L)])])])])],6)):g("",!0)}const jt=u(kt,[["render",qt]]),Qt={components:{RouterLink:D,IconIdCard:k,IconTerms:B,IconShield:T,IconEyeOpen:P,LgSelector:V,IconHome:q,ExitIcon:tt,LoadingOverlay:ot,ChatBox:jt},data(){return{loadingError:!1}},computed:{...W(Y,F,A,O),...N(R,["lg"])},methods:{loadUser(){this.userStore.loaded||(this.loadingStore.startLoading(),this.loadingError=!1,this.userStore.load().then(()=>{this.loadingStore.finishLoading(),this.socketStore.socket&&this.socketStore.socket.emit("identify",{user_id:this.userStore.id})}).catch(e=>{this.loadingStore.finishLoading(),e==401?this.$router.push("/login"):this.loadingError=!0}))}},mounted(){this.loadUser(),this.paginationSizesStore.calculatePaginationStep(),window.addEventListener("resize",this.paginationSizesStore.calculatePaginationStep)},beforeUnmount(){window.removeEventListener("resize",this.paginationSizesStore.calculatePaginationStep)}},Zt={class:"base-layout-body"},ts={class:"top-nav"},ss={class:"nav-box"},es={class:"icon"},ns={class:"hide-mb ml-05 text-bold"},os={class:"icon"},is={class:"hide-mb ml-05 text-bold"},as={class:"nav-box"},rs={class:"icon"},cs={class:"hide-mb ml-05 text-bold"},ls={class:"icon"},ds={class:"hide-mb ml-05 text-bold"},hs={class:"nav-box"},us={href:"/logout",class:"menu-item ml-2"},ms={class:"icon"},gs={class:"hide-mb ml-05 text-bold"},ps={class:"content"};function _s(e,t,n,o,d,r){const f=h("IconTerms"),m=h("RouterLink"),w=h("IconShield"),v=h("IconHome"),x=h("IconIdCard"),S=h("LgSelector"),L=h("ExitIcon"),i=h("LoadingOverlay"),b=h("ChatBox");return a(),l("div",Zt,[s("div",ts,[s("nav",null,[s("div",ss,[c(m,{to:"/home/terms",class:"mr-2 menu-item"},{default:_(()=>[s("span",es,[c(f)]),s("span",ns,p(e.lg("terms")),1)]),_:1}),c(m,{to:"/home/privacy",class:"mr-2 menu-item"},{default:_(()=>[s("span",os,[c(w)]),s("span",is,p(e.lg("privacy")),1)]),_:1})]),s("div",as,[c(m,{to:"/home",class:"menu-item mr-2"},{default:_(()=>[s("span",rs,[c(v)]),s("span",cs,p(e.lg("home")),1)]),_:1}),c(m,{to:"/home/profile",class:"menu-item mr-2"},{default:_(()=>[s("span",ls,[c(x)]),s("span",ds,p(e.lg("profile")),1)]),_:1})]),s("div",hs,[c(S,{class:"menu-item"}),s("a",us,[s("span",ms,[c(L)]),s("span",gs,p(e.lg("logout")),1)])])])]),t[0]||(t[0]=s("div",{class:"side-nav"},[s("div",{class:"side-nav-box"},[s("p",null,"Side"),s("p",null,"Side"),s("p",null,"Side"),s("p",null,"Side"),s("p",null,"Side"),s("p",null,"Side"),s("p",null,"Side"),s("p",null,"Side")])],-1)),s("div",ps,[X(e.$slots,"default")]),e.loadingStore.showLoading?(a(),U(i,{key:0})):g("",!0),c(b)])}const ws=u(Qt,[["render",_s]]);export{ws as B,A as l,F as p,Y as u};
